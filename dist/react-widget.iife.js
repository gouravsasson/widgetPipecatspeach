var Im=Object.defineProperty;var Nm=(J,ht,_t)=>ht in J?Im(J,ht,{enumerable:!0,configurable:!0,writable:!0,value:_t}):J[ht]=_t;var Dl=(J,ht,_t)=>Nm(J,typeof ht!="symbol"?ht+"":ht,_t);(function(J,ht){"use strict";function _t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fn={exports:{}},bn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys;function Il(){if(ys)return bn;ys=1;var t=J,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(c,l,u){var d,p={},w=null,b=null;u!==void 0&&(w=""+u),l.key!==void 0&&(w=""+l.key),l.ref!==void 0&&(b=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(p[d]=l[d]);if(c&&c.defaultProps)for(d in l=c.defaultProps,l)p[d]===void 0&&(p[d]=l[d]);return{$$typeof:e,type:c,key:w,ref:b,props:p,_owner:i.current}}return bn.Fragment=n,bn.jsx=a,bn.jsxs=a,bn}var _n={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs;function Nl(){return vs||(vs=1,process.env.NODE_ENV!=="production"&&function(){var t=J,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),y=Symbol.iterator,_="@@iterator";function S(g){if(g===null||typeof g!="object")return null;var R=y&&g[y]||g[_];return typeof R=="function"?R:null}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function A(g){{for(var R=arguments.length,V=new Array(R>1?R-1:0),Y=1;Y<R;Y++)V[Y-1]=arguments[Y];N("error",g,V)}}function N(g,R,V){{var Y=O.ReactDebugCurrentFrame,ue=Y.getStackAddendum();ue!==""&&(R+="%s",V=V.concat([ue]));var ye=V.map(function(ae){return String(ae)});ye.unshift("Warning: "+R),Function.prototype.apply.call(console[g],console,ye)}}var E=!1,k=!1,M=!1,D=!1,F=!1,z;z=Symbol.for("react.module.reference");function L(g){return!!(typeof g=="string"||typeof g=="function"||g===r||g===s||F||g===i||g===u||g===d||D||g===b||E||k||M||typeof g=="object"&&g!==null&&(g.$$typeof===w||g.$$typeof===p||g.$$typeof===a||g.$$typeof===c||g.$$typeof===l||g.$$typeof===z||g.getModuleId!==void 0))}function j(g,R,V){var Y=g.displayName;if(Y)return Y;var ue=R.displayName||R.name||"";return ue!==""?V+"("+ue+")":V}function P(g){return g.displayName||"Context"}function I(g){if(g==null)return null;if(typeof g.tag=="number"&&A("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case r:return"Fragment";case n:return"Portal";case s:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case c:var R=g;return P(R)+".Consumer";case a:var V=g;return P(V._context)+".Provider";case l:return j(g,g.render,"ForwardRef");case p:var Y=g.displayName||null;return Y!==null?Y:I(g.type)||"Memo";case w:{var ue=g,ye=ue._payload,ae=ue._init;try{return I(ae(ye))}catch{return null}}}return null}var U=Object.assign,B=0,$,W,ne,he,te,_e,Ue;function ke(){}ke.__reactDisabledLog=!0;function o(){{if(B===0){$=console.log,W=console.info,ne=console.warn,he=console.error,te=console.group,_e=console.groupCollapsed,Ue=console.groupEnd;var g={configurable:!0,enumerable:!0,value:ke,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}B++}}function h(){{if(B--,B===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:U({},g,{value:$}),info:U({},g,{value:W}),warn:U({},g,{value:ne}),error:U({},g,{value:he}),group:U({},g,{value:te}),groupCollapsed:U({},g,{value:_e}),groupEnd:U({},g,{value:Ue})})}B<0&&A("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var f=O.ReactCurrentDispatcher,v;function m(g,R,V){{if(v===void 0)try{throw Error()}catch(ue){var Y=ue.stack.trim().match(/\n( *(at )?)/);v=Y&&Y[1]||""}return`
`+v+g}}var T=!1,q;{var H=typeof WeakMap=="function"?WeakMap:Map;q=new H}function re(g,R){if(!g||T)return"";{var V=q.get(g);if(V!==void 0)return V}var Y;T=!0;var ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ye;ye=f.current,f.current=null,o();try{if(R){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Je){Y=Je}Reflect.construct(g,[],ae)}else{try{ae.call()}catch(Je){Y=Je}g.call(ae.prototype)}}else{try{throw Error()}catch(Je){Y=Je}g()}}catch(Je){if(Je&&Y&&typeof Je.stack=="string"){for(var ie=Je.stack.split(`
`),De=Y.stack.split(`
`),Ce=ie.length-1,Te=De.length-1;Ce>=1&&Te>=0&&ie[Ce]!==De[Te];)Te--;for(;Ce>=1&&Te>=0;Ce--,Te--)if(ie[Ce]!==De[Te]){if(Ce!==1||Te!==1)do if(Ce--,Te--,Te<0||ie[Ce]!==De[Te]){var Qe=`
`+ie[Ce].replace(" at new "," at ");return g.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",g.displayName)),typeof g=="function"&&q.set(g,Qe),Qe}while(Ce>=1&&Te>=0);break}}}finally{T=!1,f.current=ye,h(),Error.prepareStackTrace=ue}var vn=g?g.displayName||g.name:"",Zt=vn?m(vn):"";return typeof g=="function"&&q.set(g,Zt),Zt}function Oe(g,R,V){return re(g,!1)}function we(g){var R=g.prototype;return!!(R&&R.isReactComponent)}function $e(g,R,V){if(g==null)return"";if(typeof g=="function")return re(g,we(g));if(typeof g=="string")return m(g);switch(g){case u:return m("Suspense");case d:return m("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case l:return Oe(g.render);case p:return $e(g.type,R,V);case w:{var Y=g,ue=Y._payload,ye=Y._init;try{return $e(ye(ue),R,V)}catch{}}}return""}var qe=Object.prototype.hasOwnProperty,Ye={},Qt=O.ReactDebugCurrentFrame;function ft(g){if(g){var R=g._owner,V=$e(g.type,g._source,R?R.type:null);Qt.setExtraStackFrame(V)}else Qt.setExtraStackFrame(null)}function Me(g,R,V,Y,ue){{var ye=Function.call.bind(qe);for(var ae in g)if(ye(g,ae)){var ie=void 0;try{if(typeof g[ae]!="function"){var De=Error((Y||"React class")+": "+V+" type `"+ae+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[ae]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw De.name="Invariant Violation",De}ie=g[ae](R,ae,Y,V,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ce){ie=Ce}ie&&!(ie instanceof Error)&&(ft(ue),A("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Y||"React class",V,ae,typeof ie),ft(null)),ie instanceof Error&&!(ie.message in Ye)&&(Ye[ie.message]=!0,ft(ue),A("Failed %s type: %s",V,ie.message),ft(null))}}}var at=Array.isArray;function ot(g){return at(g)}function Xt(g){{var R=typeof Symbol=="function"&&Symbol.toStringTag,V=R&&g[Symbol.toStringTag]||g.constructor.name||"Object";return V}}function Nn(g){try{return gn(g),!1}catch{return!0}}function gn(g){return""+g}function El(g){if(Nn(g))return A("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Xt(g)),gn(g)}var Cl=O.ReactCurrentOwner,vm={key:!0,ref:!0,__self:!0,__source:!0},Tl,Ol;function bm(g){if(qe.call(g,"ref")){var R=Object.getOwnPropertyDescriptor(g,"ref").get;if(R&&R.isReactWarning)return!1}return g.ref!==void 0}function _m(g){if(qe.call(g,"key")){var R=Object.getOwnPropertyDescriptor(g,"key").get;if(R&&R.isReactWarning)return!1}return g.key!==void 0}function wm(g,R){typeof g.ref=="string"&&Cl.current}function Sm(g,R){{var V=function(){Tl||(Tl=!0,A("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",R))};V.isReactWarning=!0,Object.defineProperty(g,"key",{get:V,configurable:!0})}}function km(g,R){{var V=function(){Ol||(Ol=!0,A("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",R))};V.isReactWarning=!0,Object.defineProperty(g,"ref",{get:V,configurable:!0})}}var Em=function(g,R,V,Y,ue,ye,ae){var ie={$$typeof:e,type:g,key:R,ref:V,props:ae,_owner:ye};return ie._store={},Object.defineProperty(ie._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ie,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Y}),Object.defineProperty(ie,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ue}),Object.freeze&&(Object.freeze(ie.props),Object.freeze(ie)),ie};function Cm(g,R,V,Y,ue){{var ye,ae={},ie=null,De=null;V!==void 0&&(El(V),ie=""+V),_m(R)&&(El(R.key),ie=""+R.key),bm(R)&&(De=R.ref,wm(R,ue));for(ye in R)qe.call(R,ye)&&!vm.hasOwnProperty(ye)&&(ae[ye]=R[ye]);if(g&&g.defaultProps){var Ce=g.defaultProps;for(ye in Ce)ae[ye]===void 0&&(ae[ye]=Ce[ye])}if(ie||De){var Te=typeof g=="function"?g.displayName||g.name||"Unknown":g;ie&&Sm(ae,Te),De&&km(ae,Te)}return Em(g,ie,De,ue,Y,Cl.current,ae)}}var hs=O.ReactCurrentOwner,Ml=O.ReactDebugCurrentFrame;function yn(g){if(g){var R=g._owner,V=$e(g.type,g._source,R?R.type:null);Ml.setExtraStackFrame(V)}else Ml.setExtraStackFrame(null)}var ps;ps=!1;function ms(g){return typeof g=="object"&&g!==null&&g.$$typeof===e}function Al(){{if(hs.current){var g=I(hs.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function Tm(g){return""}var Pl={};function Om(g){{var R=Al();if(!R){var V=typeof g=="string"?g:g.displayName||g.name;V&&(R=`

Check the top-level render call using <`+V+">.")}return R}}function xl(g,R){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var V=Om(R);if(Pl[V])return;Pl[V]=!0;var Y="";g&&g._owner&&g._owner!==hs.current&&(Y=" It was passed a child from "+I(g._owner.type)+"."),yn(g),A('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',V,Y),yn(null)}}function Ll(g,R){{if(typeof g!="object")return;if(ot(g))for(var V=0;V<g.length;V++){var Y=g[V];ms(Y)&&xl(Y,R)}else if(ms(g))g._store&&(g._store.validated=!0);else if(g){var ue=S(g);if(typeof ue=="function"&&ue!==g.entries)for(var ye=ue.call(g),ae;!(ae=ye.next()).done;)ms(ae.value)&&xl(ae.value,R)}}}function Mm(g){{var R=g.type;if(R==null||typeof R=="string")return;var V;if(typeof R=="function")V=R.propTypes;else if(typeof R=="object"&&(R.$$typeof===l||R.$$typeof===p))V=R.propTypes;else return;if(V){var Y=I(R);Me(V,g.props,"prop",Y,g)}else if(R.PropTypes!==void 0&&!ps){ps=!0;var ue=I(R);A("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ue||"Unknown")}typeof R.getDefaultProps=="function"&&!R.getDefaultProps.isReactClassApproved&&A("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Am(g){{for(var R=Object.keys(g.props),V=0;V<R.length;V++){var Y=R[V];if(Y!=="children"&&Y!=="key"){yn(g),A("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Y),yn(null);break}}g.ref!==null&&(yn(g),A("Invalid attribute `ref` supplied to `React.Fragment`."),yn(null))}}var jl={};function Rl(g,R,V,Y,ue,ye){{var ae=L(g);if(!ae){var ie="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(ie+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var De=Tm();De?ie+=De:ie+=Al();var Ce;g===null?Ce="null":ot(g)?Ce="array":g!==void 0&&g.$$typeof===e?(Ce="<"+(I(g.type)||"Unknown")+" />",ie=" Did you accidentally export a JSX literal instead of a component?"):Ce=typeof g,A("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ce,ie)}var Te=Cm(g,R,V,ue,ye);if(Te==null)return Te;if(ae){var Qe=R.children;if(Qe!==void 0)if(Y)if(ot(Qe)){for(var vn=0;vn<Qe.length;vn++)Ll(Qe[vn],g);Object.freeze&&Object.freeze(Qe)}else A("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ll(Qe,g)}if(qe.call(R,"key")){var Zt=I(g),Je=Object.keys(R).filter(function(Dm){return Dm!=="key"}),gs=Je.length>0?"{key: someKey, "+Je.join(": ..., ")+": ...}":"{key: someKey}";if(!jl[Zt+gs]){var Rm=Je.length>0?"{"+Je.join(": ..., ")+": ...}":"{}";A(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,gs,Zt,Rm,Zt),jl[Zt+gs]=!0}}return g===r?Am(Te):Mm(Te),Te}}function Pm(g,R,V){return Rl(g,R,V,!0)}function xm(g,R,V){return Rl(g,R,V,!1)}var Lm=xm,jm=Pm;_n.Fragment=r,_n.jsx=Lm,_n.jsxs=jm}()),_n}var bs;function Fl(){return bs||(bs=1,process.env.NODE_ENV==="production"?Fn.exports=Il():Fn.exports=Nl()),Fn.exports}var X=Fl(),en={},_s;function Bl(){if(_s)return en;_s=1;var t=ht;if(process.env.NODE_ENV==="production")en.createRoot=t.createRoot,en.hydrateRoot=t.hydrateRoot;else{var e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;en.createRoot=function(n,r){e.usingClientEntryPoint=!0;try{return t.createRoot(n,r)}finally{e.usingClientEntryPoint=!1}},en.hydrateRoot=function(n,r,i){e.usingClientEntryPoint=!0;try{return t.hydrateRoot(n,r,i)}finally{e.usingClientEntryPoint=!1}}}return en}var Ul=Bl();const $l=_t(Ul);var Dr,ws;function Ss(){if(ws)return Dr;ws=1;var t=Object.prototype.toString;Dr=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var w=typeof p;if(w==="boolean")return"boolean";if(w==="string")return"string";if(w==="number")return"number";if(w==="symbol")return"symbol";if(w==="function")return a(p)?"generatorfunction":"function";if(n(p))return"array";if(u(p))return"buffer";if(l(p))return"arguments";if(i(p))return"date";if(r(p))return"error";if(s(p))return"regexp";switch(e(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(c(p))return"generator";switch(w=t.call(p),w){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return w.slice(8,-1).toLowerCase().replace(/\s/g,"")};function e(d){return typeof d.constructor=="function"?d.constructor.name:null}function n(d){return Array.isArray?Array.isArray(d):d instanceof Array}function r(d){return d instanceof Error||typeof d.message=="string"&&d.constructor&&typeof d.constructor.stackTraceLimit=="number"}function i(d){return d instanceof Date?!0:typeof d.toDateString=="function"&&typeof d.getDate=="function"&&typeof d.setDate=="function"}function s(d){return d instanceof RegExp?!0:typeof d.flags=="string"&&typeof d.ignoreCase=="boolean"&&typeof d.multiline=="boolean"&&typeof d.global=="boolean"}function a(d,p){return e(d)==="GeneratorFunction"}function c(d){return typeof d.throw=="function"&&typeof d.return=="function"&&typeof d.next=="function"}function l(d){try{if(typeof d.length=="number"&&typeof d.callee=="function")return!0}catch(p){if(p.message.indexOf("callee")!==-1)return!0}return!1}function u(d){return d.constructor&&typeof d.constructor.isBuffer=="function"?d.constructor.isBuffer(d):!1}return Dr}/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ir,ks;function ql(){if(ks)return Ir;ks=1;const t=Symbol.prototype.valueOf,e=Ss();function n(l,u){switch(e(l)){case"array":return l.slice();case"object":return Object.assign({},l);case"date":return new l.constructor(Number(l));case"map":return new Map(l);case"set":return new Set(l);case"buffer":return a(l);case"symbol":return c(l);case"arraybuffer":return i(l);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return s(l);case"regexp":return r(l);case"error":return Object.create(l);default:return l}}function r(l){const u=l.flags!==void 0?l.flags:/\w+$/.exec(l)||void 0,d=new l.constructor(l.source,u);return d.lastIndex=l.lastIndex,d}function i(l){const u=new l.constructor(l.byteLength);return new Uint8Array(u).set(new Uint8Array(l)),u}function s(l,u){return new l.constructor(l.buffer,l.byteOffset,l.length)}function a(l){const u=l.length,d=Buffer.allocUnsafe?Buffer.allocUnsafe(u):Buffer.from(u);return l.copy(d),d}function c(l){return t?Object(t.call(l)):{}}return Ir=n,Ir}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Nr,Es;function Jl(){return Es||(Es=1,Nr=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),Nr}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Fr,Cs;function Vl(){if(Cs)return Fr;Cs=1;var t=Jl();function e(n){return t(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}return Fr=function(r){var i,s;return!(e(r)===!1||(i=r.constructor,typeof i!="function")||(s=i.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},Fr}var Br,Ts;function zl(){if(Ts)return Br;Ts=1;const t=ql(),e=Ss(),n=Vl();function r(a,c){switch(e(a)){case"object":return i(a,c);case"array":return s(a,c);default:return t(a)}}function i(a,c){if(typeof c=="function")return c(a);if(c||n(a)){const l=new a.constructor;for(let u in a)l[u]=r(a[u],c);return l}return a}function s(a,c){const l=new a.constructor(a.length);for(let u=0;u<a.length;u++)l[u]=r(a[u],c);return l}return Br=r,Br}var Wl=zl();const Os=_t(Wl);var Bn={exports:{}},Ms;function Hl(){if(Ms)return Bn.exports;Ms=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(k,M,D){return Function.prototype.apply.call(k,M,D)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(E){console&&console.warn&&console.warn(E)}var i=Number.isNaN||function(k){return k!==k};function s(){s.init.call(this)}Bn.exports=s,Bn.exports.once=O,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(E){if(typeof E!="number"||E<0||i(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");a=E}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(E){return E._maxListeners===void 0?s.defaultMaxListeners:E._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(k){for(var M=[],D=1;D<arguments.length;D++)M.push(arguments[D]);var F=k==="error",z=this._events;if(z!==void 0)F=F&&z.error===void 0;else if(!F)return!1;if(F){var L;if(M.length>0&&(L=M[0]),L instanceof Error)throw L;var j=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw j.context=L,j}var P=z[k];if(P===void 0)return!1;if(typeof P=="function")e(P,this,M);else for(var I=P.length,U=y(P,I),D=0;D<I;++D)e(U[D],this,M);return!0};function u(E,k,M,D){var F,z,L;if(c(M),z=E._events,z===void 0?(z=E._events=Object.create(null),E._eventsCount=0):(z.newListener!==void 0&&(E.emit("newListener",k,M.listener?M.listener:M),z=E._events),L=z[k]),L===void 0)L=z[k]=M,++E._eventsCount;else if(typeof L=="function"?L=z[k]=D?[M,L]:[L,M]:D?L.unshift(M):L.push(M),F=l(E),F>0&&L.length>F&&!L.warned){L.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=E,j.type=k,j.count=L.length,r(j)}return E}s.prototype.addListener=function(k,M){return u(this,k,M,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(k,M){return u(this,k,M,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(E,k,M){var D={fired:!1,wrapFn:void 0,target:E,type:k,listener:M},F=d.bind(D);return F.listener=M,D.wrapFn=F,F}s.prototype.once=function(k,M){return c(M),this.on(k,p(this,k,M)),this},s.prototype.prependOnceListener=function(k,M){return c(M),this.prependListener(k,p(this,k,M)),this},s.prototype.removeListener=function(k,M){var D,F,z,L,j;if(c(M),F=this._events,F===void 0)return this;if(D=F[k],D===void 0)return this;if(D===M||D.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete F[k],F.removeListener&&this.emit("removeListener",k,D.listener||M));else if(typeof D!="function"){for(z=-1,L=D.length-1;L>=0;L--)if(D[L]===M||D[L].listener===M){j=D[L].listener,z=L;break}if(z<0)return this;z===0?D.shift():_(D,z),D.length===1&&(F[k]=D[0]),F.removeListener!==void 0&&this.emit("removeListener",k,j||M)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(k){var M,D,F;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[k]),this;if(arguments.length===0){var z=Object.keys(D),L;for(F=0;F<z.length;++F)L=z[F],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=D[k],typeof M=="function")this.removeListener(k,M);else if(M!==void 0)for(F=M.length-1;F>=0;F--)this.removeListener(k,M[F]);return this};function w(E,k,M){var D=E._events;if(D===void 0)return[];var F=D[k];return F===void 0?[]:typeof F=="function"?M?[F.listener||F]:[F]:M?S(F):y(F,F.length)}s.prototype.listeners=function(k){return w(this,k,!0)},s.prototype.rawListeners=function(k){return w(this,k,!1)},s.listenerCount=function(E,k){return typeof E.listenerCount=="function"?E.listenerCount(k):b.call(E,k)},s.prototype.listenerCount=b;function b(E){var k=this._events;if(k!==void 0){var M=k[E];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(E,k){for(var M=new Array(k),D=0;D<k;++D)M[D]=E[D];return M}function _(E,k){for(;k+1<E.length;k++)E[k]=E[k+1];E.pop()}function S(E){for(var k=new Array(E.length),M=0;M<k.length;++M)k[M]=E[M].listener||E[M];return k}function O(E,k){return new Promise(function(M,D){function F(L){E.removeListener(k,z),D(L)}function z(){typeof E.removeListener=="function"&&E.removeListener("error",F),M([].slice.call(arguments))}N(E,k,z,{once:!0}),k!=="error"&&A(E,F,{once:!0})})}function A(E,k,M){typeof E.on=="function"&&N(E,"error",k,M)}function N(E,k,M,D){if(typeof E.on=="function")D.once?E.once(k,M):E.on(k,M);else if(typeof E.addEventListener=="function")E.addEventListener(k,function F(z){D.once&&E.removeEventListener(k,F),M(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Bn.exports}var Gl=Hl();const Kl=_t(Gl);for(var Ae=[],Ur=0;Ur<256;++Ur)Ae.push((Ur+256).toString(16).slice(1));function Yl(t,e=0){return(Ae[t[e+0]]+Ae[t[e+1]]+Ae[t[e+2]]+Ae[t[e+3]]+"-"+Ae[t[e+4]]+Ae[t[e+5]]+"-"+Ae[t[e+6]]+Ae[t[e+7]]+"-"+Ae[t[e+8]]+Ae[t[e+9]]+"-"+Ae[t[e+10]]+Ae[t[e+11]]+Ae[t[e+12]]+Ae[t[e+13]]+Ae[t[e+14]]+Ae[t[e+15]]).toLowerCase()}var Un,Ql=new Uint8Array(16);function Xl(){if(!Un&&(Un=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Un))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Un(Ql)}var Zl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const As={randomUUID:Zl};function eu(t,e,n){if(As.randomUUID&&!e&&!t)return As.randomUUID();t=t||{};var r=t.random||(t.rng||Xl)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Yl(r)}function Se(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function tu(t){return t&&t.__esModule?t.default:t}var nu={};Se(nu,"httpActionGenerator",()=>Ps);async function Ps(t,e,n,r){try{pe.debug("[RTVI] Fetch action",t,e);const i=new Headers({...Object.fromEntries((n.headers??new Headers).entries())});i.has("Content-Type")||i.set("Content-Type","application/json"),i.set("Cache-Control","no-cache"),i.set("Connection","keep-alive");const s=await fetch(t,{method:"POST",headers:i,body:JSON.stringify({...n.requestData,actions:[e]})}),a=s.headers.get("content-type");if(!s.ok){const c=await s.text();throw new He(`Failed to resolve action: ${c}`,s.status)}if(s.body&&(a!=null&&a.includes("text/event-stream"))){const c=s.body.pipeThrough(new TextDecoderStream).getReader();let l="";for(;;){const{value:u,done:d}=await c.read();if(d)break;l+=u;let p=l.indexOf(`

`);for(;p!==-1;){const w=l.slice(0,p);l=l.slice(p+2);const b=w.split(`
`);let y="";for(const _ of b){const S=_.indexOf(":");S!==-1&&(y+=_.slice(S+1).trim())}try{const _=atob(y),S=JSON.parse(_);r(S)}catch(_){throw pe.error("[RTVI] Failed to parse JSON:",_),_}p=l.indexOf(`

`)}}}else{const c=await s.json();r(c)}}catch(i){throw pe.error("[RTVI] Error during fetch:",i),i}}var ru={};Se(ru,"RTVIClient",()=>pt);var xs={};xs=JSON.parse('{"name":"@pipecat-ai/client-js","version":"0.3.2","license":"BSD-2-Clause","main":"dist/index.js","module":"dist/index.module.js","types":"dist/index.d.ts","source":"src/index.ts","repository":{"type":"git","url":"git+https://github.com/pipecat-ai/pipecat-client-web.git"},"files":["dist","package.json","README.md"],"scripts":{"build":"jest --silent && parcel build --no-cache","dev":"parcel watch","lint":"eslint src/ --report-unused-disable-directives --max-warnings 0","test":"jest"},"jest":{"preset":"ts-jest","testEnvironment":"node"},"devDependencies":{"@jest/globals":"^29.7.0","@types/clone-deep":"^4.0.4","@types/jest":"^29.5.12","@types/uuid":"^10.0.0","eslint":"^9.11.1","eslint-config-prettier":"^9.1.0","eslint-plugin-simple-import-sort":"^12.1.1","jest":"^29.7.0","ts-jest":"^29.2.5"},"dependencies":{"@types/events":"^3.0.3","clone-deep":"^4.0.1","events":"^3.3.0","typed-emitter":"^2.1.0","uuid":"^10.0.0"}}');var Lt={};Se(Lt,"RTVIError",()=>He),Se(Lt,"ConnectionTimeoutError",()=>Ls),Se(Lt,"StartBotError",()=>$r),Se(Lt,"TransportStartError",()=>js),Se(Lt,"BotNotReadyError",()=>wt),Se(Lt,"ConfigUpdateError",()=>iu),Se(Lt,"ActionEndpointNotSetError",()=>Rs);class He extends Error{constructor(e,n){super(e),this.status=n}}class Ls extends He{constructor(e){super(e??"Bot did not enter ready state within the specified timeout period.")}}class $r extends He{constructor(e,n){super(e??"Failed to connect / invalid auth bundle from base url",n??500),this.error="invalid-request-error"}}class js extends He{constructor(e){super(e??"Unable to connect to transport")}}class wt extends He{constructor(e){super(e??"Attempt to call action on transport when not in 'ready' state.")}}class iu extends He{constructor(e){super(e??"Unable to update configuration"),this.status=400}}class Rs extends He{constructor(e){super(e??"Action endpoint is not set")}}function tn(t,e,n){const r=n.value;return n.value=function(...i){if(this.state==="ready")return r.apply(this,i);throw new wt(`Attempt to call ${e.toString()} when transport not in ready state. Await connect() first.`)},n}function su(...t){return t=["ready",...t],function(e,n,r){const i=r.get;return r.get=function(){if(t.includes(this.state))return i==null?void 0:i.apply(this);throw new wt(`Attempt to call ${n.toString()} when transport not in ${t}. Await connect() first.`)},r}}var au={};Se(au,"RTVIEvent",()=>G);var G;(function(t){t.MessageError="messageError",t.Error="error",t.Connected="connected",t.Disconnected="disconnected",t.TransportStateChanged="transportStateChanged",t.Config="config",t.ConfigDescribe="configDescribe",t.ActionsAvailable="actionsAvailable",t.ParticipantConnected="participantConnected",t.ParticipantLeft="participantLeft",t.TrackStarted="trackStarted",t.TrackStopped="trackStopped",t.ScreenTrackStarted="screenTrackStarted",t.ScreenTrackStopped="screenTrackStopped",t.ScreenShareError="screenShareError",t.AvailableCamsUpdated="availableCamsUpdated",t.AvailableMicsUpdated="availableMicsUpdated",t.AvailableSpeakersUpdated="availableSpeakersUpdated",t.CamUpdated="camUpdated",t.MicUpdated="micUpdated",t.SpeakerUpdated="speakerUpdated",t.BotConnected="botConnected",t.BotReady="botReady",t.BotDisconnected="botDisconnected",t.BotStartedSpeaking="botStartedSpeaking",t.BotStoppedSpeaking="botStoppedSpeaking",t.RemoteAudioLevel="remoteAudioLevel",t.UserStartedSpeaking="userStartedSpeaking",t.UserStoppedSpeaking="userStoppedSpeaking",t.LocalAudioLevel="localAudioLevel",t.Metrics="metrics",t.UserTranscript="userTranscript",t.BotTranscript="botTranscript",t.BotLlmText="botLlmText",t.BotLlmStarted="botLlmStarted",t.BotLlmStopped="botLlmStopped",t.BotTtsText="botTtsText",t.BotTtsStarted="botTtsStarted",t.BotTtsStopped="botTtsStopped",t.LLMFunctionCall="llmFunctionCall",t.LLMFunctionCallStart="llmFunctionCallStart",t.LLMJsonCompletion="llmJsonCompletion",t.StorageItemStored="storageItemStored"})(G||(G={}));var ou={};Se(ou,"RTVIClientHelper",()=>qr);class qr{constructor(e){this._options=e}set client(e){this._client=e}set service(e){this._service=e}}var Ds={};Se(Ds,"LogLevel",()=>St),Se(Ds,"logger",()=>pe);var St;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG"})(St||(St={}));class nn{constructor(){this.level=St.DEBUG}static getInstance(){return nn.instance||(nn.instance=new nn),nn.instance}setLevel(e){this.level=e}debug(...e){this.level>=St.DEBUG&&console.debug(...e)}info(...e){this.level>=St.INFO&&console.info(...e)}warn(...e){this.level>=St.WARN&&console.warn(...e)}error(...e){this.level>=St.ERROR&&console.error(...e)}}const pe=nn.getInstance();var rn={};Se(rn,"RTVI_MESSAGE_LABEL",()=>Is),Se(rn,"RTVIMessageType",()=>oe),Se(rn,"RTVIMessage",()=>Pe),Se(rn,"RTVI_ACTION_TYPE",()=>Ns),Se(rn,"RTVIActionRequest",()=>Fs),Se(rn,"MessageDispatcher",()=>Bs);const Is="rtvi-ai";var oe;(function(t){t.CLIENT_READY="client-ready",t.UPDATE_CONFIG="update-config",t.GET_CONFIG="get-config",t.DESCRIBE_CONFIG="describe-config",t.DESCRIBE_ACTIONS="describe-actions",t.DISCONNECT_BOT="disconnect-bot",t.BOT_READY="bot-ready",t.ERROR="error",t.ERROR_RESPONSE="error-response",t.CONFIG="config",t.CONFIG_AVAILABLE="config-available",t.CONFIG_ERROR="config-error",t.ACTIONS_AVAILABLE="actions-available",t.ACTION_RESPONSE="action-response",t.METRICS="metrics",t.USER_TRANSCRIPTION="user-transcription",t.BOT_TRANSCRIPTION="bot-transcription",t.USER_STARTED_SPEAKING="user-started-speaking",t.USER_STOPPED_SPEAKING="user-stopped-speaking",t.BOT_STARTED_SPEAKING="bot-started-speaking",t.BOT_STOPPED_SPEAKING="bot-stopped-speaking",t.USER_LLM_TEXT="user-llm-text",t.BOT_LLM_TEXT="bot-llm-text",t.BOT_LLM_STARTED="bot-llm-started",t.BOT_LLM_STOPPED="bot-llm-stopped",t.BOT_TTS_TEXT="bot-tts-text",t.BOT_TTS_STARTED="bot-tts-started",t.BOT_TTS_STOPPED="bot-tts-stopped",t.STORAGE_ITEM_STORED="storage-item-stored"})(oe||(oe={}));class Pe{constructor(e,n,r){this.label=Is,this.type=e,this.data=n,this.id=r||eu().slice(0,8)}static clientReady(){return new Pe(oe.CLIENT_READY,{})}static updateConfig(e,n=!1){return new Pe(oe.UPDATE_CONFIG,{config:e,interrupt:n})}static describeConfig(){return new Pe(oe.DESCRIBE_CONFIG,{})}static getBotConfig(){return new Pe(oe.GET_CONFIG,{})}static describeActions(){return new Pe(oe.DESCRIBE_ACTIONS,{})}static disconnectBot(){return new Pe(oe.DISCONNECT_BOT,{})}}const Ns="action";class Fs extends Pe{constructor(e){super(Ns,e)}}class Bs{constructor(e){this._queue=new Array,this._gcTime=1e4,this._queue=[],this._client=e}dispatch(e){const n=new Promise((r,i)=>{this._queue.push({message:e,timestamp:Date.now(),resolve:r,reject:i})});return pe.debug("[MessageDispatcher] dispatch",e),this._client.sendMessage(e),this._gc(),n}async dispatchAction(e,n){var i;const r=new Promise((s,a)=>{this._queue.push({message:e,timestamp:Date.now(),resolve:s,reject:a})});if(pe.debug("[MessageDispatcher] action",e),this._client.connected)this._client.sendMessage(e);else{if(!((i=this._client.params.endpoints)!=null&&i.action))throw pe.error("[MessageDispatcher] Action endpoint is required when dispatching action in disconnected state"),new Rs;const s=this._client.constructUrl("action");try{await Ps(s,e,this._client.params,a=>{n(a)})}catch{n(new Pe(oe.ERROR_RESPONSE,`Action endpoint '${s}' returned an error response`,e.id))}}return this._gc(),r}_resolveReject(e,n=!0){const r=this._queue.find(i=>i.message.id===e.id);return r&&(n?(pe.debug("[MessageDispatcher] Resolve",e),r.resolve((e.type===oe.ACTION_RESPONSE,e))):(pe.debug("[MessageDispatcher] Reject",e),r.reject(e)),this._queue=this._queue.filter(i=>i.message.id!==e.id),pe.debug("[MessageDispatcher] Queue",this._queue)),e}resolve(e){return this._resolveReject(e,!0)}reject(e){return this._resolveReject(e,!1)}_gc(){this._queue=this._queue.filter(e=>Date.now()-e.timestamp<this._gcTime),pe.debug("[MessageDispatcher] GC",this._queue)}}var jt=function(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};const cu={connect:"/connect",action:"/action"};class lu extends Kl{}class pt extends lu{constructor(e){super(),this.params={...e.params,endpoints:{...cu,...e.params.endpoints??{}}},this._helpers={},this._transport=e.transport;const n={...e.callbacks,onMessageError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onMessageError)==null||s.call(i,r),this.emit(G.MessageError,r)},onError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onError)==null||s.call(i,r),this.emit(G.Error,r)},onConnected:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onConnected)==null||i.call(r),this.emit(G.Connected)},onDisconnected:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onDisconnected)==null||i.call(r),this.emit(G.Disconnected)},onTransportStateChanged:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onTransportStateChanged)==null||s.call(i,r),this.emit(G.TransportStateChanged,r)},onConfig:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onConfig)==null||s.call(i,r),this.emit(G.Config,r)},onConfigDescribe:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onConfigDescribe)==null||s.call(i,r),this.emit(G.ConfigDescribe,r)},onActionsAvailable:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onActionsAvailable)==null||s.call(i,r),this.emit(G.ActionsAvailable,r)},onParticipantJoined:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onParticipantJoined)==null||s.call(i,r),this.emit(G.ParticipantConnected,r)},onParticipantLeft:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onParticipantLeft)==null||s.call(i,r),this.emit(G.ParticipantLeft,r)},onTrackStarted:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onTrackStarted)==null||a.call(s,r,i),this.emit(G.TrackStarted,r,i)},onTrackStopped:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onTrackStopped)==null||a.call(s,r,i),this.emit(G.TrackStopped,r,i)},onScreenTrackStarted:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onScreenTrackStarted)==null||a.call(s,r,i),this.emit(G.ScreenTrackStarted,r,i)},onScreenTrackStopped:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onScreenTrackStopped)==null||a.call(s,r,i),this.emit(G.ScreenTrackStopped,r,i)},onScreenShareError:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onScreenShareError)==null||s.call(i,r),this.emit(G.ScreenShareError,r)},onAvailableCamsUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableCamsUpdated)==null||s.call(i,r),this.emit(G.AvailableCamsUpdated,r)},onAvailableMicsUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableMicsUpdated)==null||s.call(i,r),this.emit(G.AvailableMicsUpdated,r)},onAvailableSpeakersUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onAvailableSpeakersUpdated)==null||s.call(i,r),this.emit(G.AvailableSpeakersUpdated,r)},onCamUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onCamUpdated)==null||s.call(i,r),this.emit(G.CamUpdated,r)},onMicUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onMicUpdated)==null||s.call(i,r),this.emit(G.MicUpdated,r)},onSpeakerUpdated:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onSpeakerUpdated)==null||s.call(i,r),this.emit(G.SpeakerUpdated,r)},onBotConnected:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotConnected)==null||s.call(i,r),this.emit(G.BotConnected,r)},onBotReady:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotReady)==null||s.call(i,r),this.emit(G.BotReady,r)},onBotDisconnected:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotDisconnected)==null||s.call(i,r),this.emit(G.BotDisconnected,r)},onBotStartedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotStartedSpeaking)==null||i.call(r),this.emit(G.BotStartedSpeaking)},onBotStoppedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotStoppedSpeaking)==null||i.call(r),this.emit(G.BotStoppedSpeaking)},onRemoteAudioLevel:(r,i)=>{var s,a;(a=(s=e==null?void 0:e.callbacks)==null?void 0:s.onRemoteAudioLevel)==null||a.call(s,r,i),this.emit(G.RemoteAudioLevel,r,i)},onUserStartedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onUserStartedSpeaking)==null||i.call(r),this.emit(G.UserStartedSpeaking)},onUserStoppedSpeaking:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onUserStoppedSpeaking)==null||i.call(r),this.emit(G.UserStoppedSpeaking)},onLocalAudioLevel:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onLocalAudioLevel)==null||s.call(i,r),this.emit(G.LocalAudioLevel,r)},onUserTranscript:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onUserTranscript)==null||s.call(i,r),this.emit(G.UserTranscript,r)},onBotTranscript:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotTranscript)==null||s.call(i,r),this.emit(G.BotTranscript,r)},onBotLlmText:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotLlmText)==null||s.call(i,r),this.emit(G.BotLlmText,r)},onBotLlmStarted:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotLlmStarted)==null||i.call(r),this.emit(G.BotLlmStarted)},onBotLlmStopped:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotLlmStopped)==null||i.call(r),this.emit(G.BotLlmStopped)},onBotTtsText:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onBotTtsText)==null||s.call(i,r),this.emit(G.BotTtsText,r)},onBotTtsStarted:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotTtsStarted)==null||i.call(r),this.emit(G.BotTtsStarted)},onBotTtsStopped:()=>{var r,i;(i=(r=e==null?void 0:e.callbacks)==null?void 0:r.onBotTtsStopped)==null||i.call(r),this.emit(G.BotTtsStopped)},onStorageItemStored:r=>{var i,s;(s=(i=e==null?void 0:e.callbacks)==null?void 0:i.onStorageItemStored)==null||s.call(i,r),this.emit(G.StorageItemStored,r)}};this._options={...e,callbacks:n,enableMic:e.enableMic??!0,enableCam:e.enableCam??!1},this._initialize(),pe.debug("[RTVI Client] Initialized",this.version)}constructUrl(e){var r;if(!this.params.baseUrl)throw new He("Base URL not set. Please set rtviClient.params.baseUrl");return this.params.baseUrl.replace(/\/+$/,"")+(((r=this.params.endpoints)==null?void 0:r[e])??"")}setLogLevel(e){pe.setLevel(e)}async initDevices(){pe.debug("[RTVI Client] Initializing devices..."),await this._transport.initDevices()}async connect(){if(["authenticating","connecting","connected","ready"].includes(this._transport.state))throw new He("Voice client has already been started. Please call disconnect() before starting again.");return this._abortController=new AbortController,new Promise((e,n)=>{(async()=>{var s,a,c;this._startResolve=e,this._transport.state==="disconnected"&&await this._transport.initDevices(),this._transport.state="authenticating",this._options.timeout&&(this._handshakeTimeout=setTimeout(async()=>{var l;(l=this._abortController)==null||l.abort(),await this.disconnect(),this._transport.state="error",n(new Ls)},this._options.timeout));let r;const i=this._options.customConnectHandler;if(pe.debug("[RTVI Client] Start params",this.params),this.params={...this.params,requestData:{...this.params.requestData,rtvi_client_version:this.version}},!this.params.baseUrl&&!((s=this.params.endpoints)!=null&&s.connect))pe.debug("[RTVI Client] Connecting directly (skipping handshake / auth)..."),clearTimeout(this._handshakeTimeout);else{const l=this.constructUrl("connect");pe.debug("[RTVI Client] Connecting...",l),pe.debug("[RTVI Client] Start params",this.params);try{i?r=await i(this.params,this._handshakeTimeout,this._abortController):r=await fetch(l,{method:"POST",mode:"cors",headers:new Headers({"Content-Type":"application/json",...Object.fromEntries((this.params.headers??new Headers).entries())}),body:JSON.stringify({config:this.params.config,...this.params.services?{services:this.params.services}:{},...this.params.requestData}),signal:(a=this._abortController)==null?void 0:a.signal}).then(u=>(clearTimeout(this._handshakeTimeout),u.ok?u.json():Promise.reject(u)))}catch(u){if(clearTimeout(this._handshakeTimeout),(c=this._abortController)!=null&&c.signal.aborted)return;if(this._transport.state="error",u instanceof Response){const d=await u.json();n(new $r(d.info??d.detail??u.statusText,u.status))}else n(new $r);return}pe.debug("[RTVI Client] Auth bundle received",r)}try{await this._transport.connect(r,this._abortController)}catch(l){clearTimeout(this._handshakeTimeout),n(l);return}await this._transport.sendReadyMessage()})()})}async disconnect(){this._abortController&&this._abortController.abort(),clearTimeout(this._handshakeTimeout),await this._transport.disconnect(),this._initialize()}_initialize(){this._transport=this._options.transport,this._transport.initialize(this._options,this.handleMessage.bind(this)),this._messageDispatcher=new Bs(this)}get connected(){return["connected","ready"].includes(this._transport.state)}get state(){return this._transport.state}get version(){return tu(xs).version}async getAllMics(){return await this._transport.getAllMics()}async getAllCams(){return await this._transport.getAllCams()}async getAllSpeakers(){return await this._transport.getAllSpeakers()}get selectedMic(){return this._transport.selectedMic}get selectedCam(){return this._transport.selectedCam}get selectedSpeaker(){return this._transport.selectedSpeaker}updateMic(e){this._transport.updateMic(e)}updateCam(e){this._transport.updateCam(e)}updateSpeaker(e){this._transport.updateSpeaker(e)}enableMic(e){this._transport.enableMic(e)}get isMicEnabled(){return this._transport.isMicEnabled}enableCam(e){this._transport.enableCam(e)}get isCamEnabled(){return this._transport.isCamEnabled}tracks(){return this._transport.tracks()}enableScreenShare(e){return this._transport.enableScreenShare(e)}get isSharingScreen(){return this._transport.isSharingScreen}async getConfig(){return(await this._messageDispatcher.dispatch(Pe.getBotConfig())).data.config}async updateConfig(e,n=!1){return pe.debug("[RTVI Client] Updating config",e),this._messageDispatcher.dispatch(Pe.updateConfig(e,n))}async describeConfig(){return this._messageDispatcher.dispatch(Pe.describeConfig())}async getServiceOptionsFromConfig(e,n){if(!n&&this.state!=="ready")throw new wt("getServiceOptionsFromConfig called without config array before bot is ready");return Promise.resolve().then(async()=>{if(!e){pe.debug("Target service name is required");return}const i=(n??await this.getConfig()).find(s=>s.service===e);if(!i){pe.debug("No service with name "+e+" not found in config");return}return i})}async getServiceOptionValueFromConfig(e,n,r){const i=await this.getServiceOptionsFromConfig(e,r);if(!i){pe.debug("Service with name "+e+" not found in config");return}const s=i.options.find(a=>a.name===n);return s?s.value:void 0}_updateOrAddOption(e,n){const r=e.findIndex(i=>i.name===n.name);return r!==-1?e.map((i,s)=>s===r?{...i,value:n.value}:i):[...e,{name:n.name,value:n.value}]}async setServiceOptionInConfig(e,n,r){const i=Os(r??await this.getConfig());if(!await this.getServiceOptionsFromConfig(e,i))return pe.debug("Service with name '"+e+"' not found in config"),i;const a=Array.isArray(n)?n:[n];for(const c of a){const l=i.find(d=>d.service===e),u=l?this._updateOrAddOption(l.options,c):[{name:c.name,value:c.value}];l?l.options=u:i.push({service:e,options:u})}return i}async setConfigOptions(e,n){let r=Os(n??await this.getConfig());for(const i of e)r=await this.setServiceOptionInConfig(i.service,i.options,r)||r;return r}async action(e){return this._messageDispatcher.dispatchAction(new Fs(e),this.handleMessage.bind(this))}async describeActions(){return this._messageDispatcher.dispatch(Pe.describeActions())}get transportExpiry(){return this._transport.expiry}sendMessage(e){this._transport.sendMessage(e)}disconnectBot(){this._transport.sendMessage(new Pe(oe.DISCONNECT_BOT,{}))}handleMessage(e){var n,r,i,s,a,c,l,u,d,p,w,b,y,_,S,O,A,N,E,k,M,D,F,z,L,j,P,I,U,B,$,W,ne,he,te,_e,Ue,ke,o,h,f,v,m;switch(pe.debug("[RTVI Message]",e),e.type){case oe.BOT_READY:clearTimeout(this._handshakeTimeout),(n=this._startResolve)==null||n.call(this,e.data),(i=(r=this._options.callbacks)==null?void 0:r.onBotReady)==null||i.call(r,e.data);break;case oe.CONFIG_AVAILABLE:this._messageDispatcher.resolve(e),(a=(s=this._options.callbacks)==null?void 0:s.onConfigDescribe)==null||a.call(s,e.data);break;case oe.CONFIG:{const T=this._messageDispatcher.resolve(e);(l=(c=this._options.callbacks)==null?void 0:c.onConfig)==null||l.call(c,T.data.config);break}case oe.ACTIONS_AVAILABLE:this._messageDispatcher.resolve(e),(d=(u=this._options.callbacks)==null?void 0:u.onActionsAvailable)==null||d.call(u,e.data);break;case oe.ACTION_RESPONSE:this._messageDispatcher.resolve(e);break;case oe.ERROR_RESPONSE:{const T=this._messageDispatcher.reject(e);(w=(p=this._options.callbacks)==null?void 0:p.onMessageError)==null||w.call(p,T);break}case oe.ERROR:(y=(b=this._options.callbacks)==null?void 0:b.onError)==null||y.call(b,e);break;case oe.USER_STARTED_SPEAKING:(S=(_=this._options.callbacks)==null?void 0:_.onUserStartedSpeaking)==null||S.call(_);break;case oe.USER_STOPPED_SPEAKING:(A=(O=this._options.callbacks)==null?void 0:O.onUserStoppedSpeaking)==null||A.call(O);break;case oe.BOT_STARTED_SPEAKING:(E=(N=this._options.callbacks)==null?void 0:N.onBotStartedSpeaking)==null||E.call(N);break;case oe.BOT_STOPPED_SPEAKING:(M=(k=this._options.callbacks)==null?void 0:k.onBotStoppedSpeaking)==null||M.call(k);break;case oe.USER_TRANSCRIPTION:{const T=e.data;(F=(D=this._options.callbacks)==null?void 0:D.onUserTranscript)==null||F.call(D,T);break}case oe.BOT_TRANSCRIPTION:(L=(z=this._options.callbacks)==null?void 0:z.onBotTranscript)==null||L.call(z,e.data);break;case oe.BOT_LLM_TEXT:(P=(j=this._options.callbacks)==null?void 0:j.onBotLlmText)==null||P.call(j,e.data);break;case oe.BOT_LLM_STARTED:(U=(I=this._options.callbacks)==null?void 0:I.onBotLlmStarted)==null||U.call(I);break;case oe.BOT_LLM_STOPPED:($=(B=this._options.callbacks)==null?void 0:B.onBotLlmStopped)==null||$.call(B);break;case oe.BOT_TTS_TEXT:(ne=(W=this._options.callbacks)==null?void 0:W.onBotTtsText)==null||ne.call(W,e.data);break;case oe.BOT_TTS_STARTED:(te=(he=this._options.callbacks)==null?void 0:he.onBotTtsStarted)==null||te.call(he);break;case oe.BOT_TTS_STOPPED:(Ue=(_e=this._options.callbacks)==null?void 0:_e.onBotTtsStopped)==null||Ue.call(_e);break;case oe.METRICS:this.emit(G.Metrics,e.data),(o=(ke=this._options.callbacks)==null?void 0:ke.onMetrics)==null||o.call(ke,e.data);break;case oe.STORAGE_ITEM_STORED:(f=(h=this._options.callbacks)==null?void 0:h.onStorageItemStored)==null||f.call(h,e.data);break;default:{let T=!1;for(const q of Object.values(this._helpers))q.getMessageTypes().includes(e.type)&&(T=!0,q.handleMessage(e));T||(m=(v=this._options.callbacks)==null?void 0:v.onGenericMessage)==null||m.call(v,e.data)}}}registerHelper(e,n){if(this._helpers[e])throw new Error(`Helper with name '${e}' already registered`);if(!(n instanceof qr))throw new Error("Helper must be an instance of RTVIClientHelper");return n.service=e,n.client=this,this._helpers[e]=n,this._helpers[e]}getHelper(e){const n=this._helpers[e];if(!n){pe.debug(`Helper targeting service '${e}' not found`);return}return n}unregisterHelper(e){this._helpers[e]&&delete this._helpers[e]}}jt([tn],pt.prototype,"getConfig",null),jt([tn],pt.prototype,"updateConfig",null),jt([tn],pt.prototype,"describeConfig",null),jt([tn],pt.prototype,"describeActions",null),jt([su("connected","ready")],pt.prototype,"transportExpiry",null),jt([tn],pt.prototype,"sendMessage",null),jt([tn],pt.prototype,"disconnectBot",null);var Us={};Se(Us,"LLMMessageType",()=>kt),Se(Us,"LLMHelper",()=>Jr);var kt;(function(t){t.LLM_FUNCTION_CALL="llm-function-call",t.LLM_FUNCTION_CALL_START="llm-function-call-start",t.LLM_FUNCTION_CALL_RESULT="llm-function-call-result",t.LLM_JSON_COMPLETION="llm-json-completion"})(kt||(kt={}));class Jr extends qr{constructor(e){super(e),this._functionCallCallback=null}getMessageTypes(){return Object.values(kt)}async getContext(){if(this._client.state!=="ready")throw new wt("getContext called while transport not in ready state");return(await this._client.action({service:this._service,action:"get_context"})).data.result}async setContext(e,n=!1){if(this._client.state!=="ready")throw new wt("setContext called while transport not in ready state");return!!(await this._client.action({service:this._service,action:"set_context",arguments:[{name:"messages",value:e.messages},{name:"interrupt",value:n}]})).data.result}async appendToMessages(e,n=!1){if(this._client.state!=="ready")throw new wt("setContext called while transport not in ready state");return!!(await this._client.action({service:this._service,action:"append_to_messages",arguments:[{name:"messages",value:[e]},{name:"run_immediately",value:n}]})).data.result}async run(e=!1){if(this._client.state==="ready")return this._client.action({service:this._service,action:"run",arguments:[{name:"interrupt",value:e}]})}handleFunctionCall(e){this._functionCallCallback=e}handleMessage(e){var n,r,i,s,a,c;switch(e.type){case kt.LLM_JSON_COMPLETION:(r=(n=this._options.callbacks)==null?void 0:n.onLLMJsonCompletion)==null||r.call(n,e.data),this._client.emit(G.LLMJsonCompletion,e.data);break;case kt.LLM_FUNCTION_CALL:{const l=e.data;if((s=(i=this._options.callbacks)==null?void 0:i.onLLMFunctionCall)==null||s.call(i,e.data),this._client.emit(G.LLMFunctionCall,e.data),this._functionCallCallback){const u={functionName:l.function_name,arguments:l.args};if(this._client.state==="ready")this._functionCallCallback(u).then(d=>{this._client.sendMessage(new Pe(kt.LLM_FUNCTION_CALL_RESULT,{function_name:l.function_name,tool_call_id:l.tool_call_id,arguments:l.args,result:d}))});else throw new wt("Attempted to send a function call result from bot while transport not in ready state")}break}case kt.LLM_FUNCTION_CALL_START:{const l=e.data;(c=(a=this._options.callbacks)==null?void 0:a.onLLMFunctionCallStart)==null||c.call(a,l.function_name),this._client.emit(G.LLMFunctionCallStart,l.function_name);break}}}}var uu={};Se(uu,"Transport",()=>$s);class $s{constructor(){this._state="disconnected",this._expiry=void 0}get expiry(){return this._expiry}}function qs(t,e){if(t==null)return{};var n,r,i=function(a,c){if(a==null)return{};var l,u,d={},p=Object.keys(a);for(u=0;u<p.length;u++)l=p[u],c.indexOf(l)>=0||(d[l]=a[l]);return d}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function de(t){return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function Js(t){var e=function(n,r){if(de(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(de(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return de(e)==="symbol"?e:String(e)}function Vs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Js(r.key),r)}}function Ze(t,e,n){return e&&Vs(t.prototype,e),n&&Vs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},wn(t,e)}function $n(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}function qn(t,e){if(e&&(de(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mt(t)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(t)}function gt(t,e,n){return(e=Js(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zs(t,e,n,r,i,s,a){try{var c=t[s](a),l=c.value}catch(u){return void n(u)}c.done?e(l):Promise.resolve(l).then(r,i)}function K(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function a(l){zs(s,r,i,a,c,"next",l)}function c(l){zs(s,r,i,a,c,"throw",l)}a(void 0)})}}function Ws(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rt(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var s,a,c,l,u=[],d=!0,p=!1;try{if(c=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(s=c.call(i)).done)&&(u.push(s.value),u.length!==r);d=!0);}catch(w){p=!0,a=w}finally{try{if(!d&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(p)throw a}}return u}}(t,e)||function(n,r){if(n){if(typeof n=="string")return Ws(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ws(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Hs,yt={},du={get exports(){return yt},set exports(t){yt=t}},sn=typeof Reflect=="object"?Reflect:null,Gs=sn&&typeof sn.apply=="function"?sn.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Hs=sn&&typeof sn.ownKeys=="function"?sn.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Ks=Number.isNaN||function(t){return t!=t};function fe(){fe.init.call(this)}du.exports=fe,yt.once=function(t,e){return new Promise(function(n,r){function i(a){t.removeListener(e,s),r(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}ra(t,e,s,{once:!0}),e!=="error"&&function(a,c,l){typeof a.on=="function"&&ra(a,"error",c,l)}(t,i,{once:!0})})},fe.EventEmitter=fe,fe.prototype._events=void 0,fe.prototype._eventsCount=0,fe.prototype._maxListeners=void 0;var Ys=10;function Jn(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Qs(t){return t._maxListeners===void 0?fe.defaultMaxListeners:t._maxListeners}function Xs(t,e,n,r){var i,s,a,c;if(Jn(n),(s=t._events)===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]),a===void 0)a=s[e]=n,++t._eventsCount;else if(typeof a=="function"?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=Qs(t))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,c=l,console&&console.warn&&console.warn(c)}return t}function fu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zs(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=fu.bind(r);return i.listener=n,r.wrapFn=i,i}function ea(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?function(s){for(var a=new Array(s.length),c=0;c<a.length;++c)a[c]=s[c].listener||s[c];return a}(i):na(i,i.length)}function ta(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function na(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ra(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)})}}Object.defineProperty(fe,"defaultMaxListeners",{enumerable:!0,get:function(){return Ys},set:function(t){if(typeof t!="number"||t<0||Ks(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Ys=t}}),fe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},fe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ks(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},fe.prototype.getMaxListeners=function(){return Qs(this)},fe.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")Gs(c,this,e);else{var l=c.length,u=na(c,l);for(n=0;n<l;++n)Gs(u[n],this,e)}return!0},fe.prototype.addListener=function(t,e){return Xs(this,t,e,!1)},fe.prototype.on=fe.prototype.addListener,fe.prototype.prependListener=function(t,e){return Xs(this,t,e,!0)},fe.prototype.once=function(t,e){return Jn(e),this.on(t,Zs(this,t,e)),this},fe.prototype.prependOnceListener=function(t,e){return Jn(e),this.prependListener(t,Zs(this,t,e)),this},fe.prototype.removeListener=function(t,e){var n,r,i,s,a;if(Jn(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,i=s;break}if(i<0)return this;i===0?n.shift():function(c,l){for(;l+1<c.length;l++)c[l]=c[l+1];c.pop()}(n,i),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this},fe.prototype.off=fe.prototype.removeListener,fe.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i,s=Object.keys(n);for(r=0;r<s.length;++r)(i=s[r])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},fe.prototype.listeners=function(t){return ea(this,t,!0)},fe.prototype.rawListeners=function(t){return ea(this,t,!1)},fe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ta.call(t,e)},fe.prototype.listenerCount=ta,fe.prototype.eventNames=function(){return this._eventsCount>0?Hs(this._events):[]};var ia=Object.prototype.hasOwnProperty;function sa(t,e,n){for(n of t.keys())if(Ie(n,e))return n}function Ie(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Ie(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((i=r)&&typeof i=="object"&&!(i=sa(e,i))||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((i=r[0])&&typeof i=="object"&&!(i=sa(e,i))||!Ie(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(ia.call(t,n)&&++r&&!ia.call(e,n)||!(n in e)||!Ie(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const hu={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},aa={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ee={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Re={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Et={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class x{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=x.getVersionPrecision(e),s=x.getVersionPrecision(n);let a=Math.max(i,s),c=0;const l=x.map([e,n],u=>{const d=a-x.getVersionPrecision(u),p=u+new Array(d+1).join(".0");return x.map(p.split("."),w=>new Array(20-w.length).join("0")+w).reverse()});for(r&&(c=a-Math.min(i,s)),a-=1;a>=c;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===c)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let i,s;if(Object.assign)return Object.assign(e,...n);for(i=0,s=n.length;i<s;i+=1){const a=n[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(c=>{r[c]=a[c]})}return e}static getBrowserAlias(e){return hu[e]}static getBrowserTypeByAlias(e){return aa[e]||""}}const me=/version\/(\d+(\.?_?\d+)+)/i,pu=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=x.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=x.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=x.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=x.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=x.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=x.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=x.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=x.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=x.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=x.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=x.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=x.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=x.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=x.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=x.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=x.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=x.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=x.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=x.getFirstMatch(me,t)||x.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=x.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=x.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=x.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=x.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=x.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=x.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=x.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=x.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=x.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=x.getFirstMatch(me,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:x.getFirstMatch(e,t),version:x.getSecondMatch(e,t)}}}];var mu=[{test:[/Roku\/DVP/],describe(t){const e=x.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Re.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=x.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Re.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=x.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=x.getWindowsVersionName(e);return{name:Re.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Re.iOS},n=x.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=x.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=x.getMacOSVersionName(e),r={name:Re.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=x.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Re.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=x.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=x.getAndroidVersionName(e),r={name:Re.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=x.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Re.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=x.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||x.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||x.getFirstMatch(/\bbb(\d+)/i,t);return{name:Re.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=x.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Re.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=x.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Re.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:Re.Linux})},{test:[/CrOS/],describe:()=>({name:Re.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=x.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Re.PlayStation4,version:e}}}],gu=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=x.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Ee.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Ee.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Ee.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Ee.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Ee.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Ee.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Ee.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=x.getFirstMatch(/(ipod|iphone)/i,t);return{type:Ee.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Ee.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Ee.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:Ee.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:Ee.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:Ee.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:Ee.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:Ee.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:Ee.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:Ee.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:Ee.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:Ee.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:Ee.tv})}],yu=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:Et.Blink};const e=x.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Et.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:Et.Trident},n=x.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:Et.Presto},n=x.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Et.Gecko},n=x.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Et.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:Et.WebKit},n=x.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class oa{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=x.find(pu,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=x.find(mu,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=x.find(gu,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=x.find(yu,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return x.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let s=0;if(Object.keys(e).forEach(a=>{const c=e[a];typeof c=="string"?(i[a]=c,s+=1):typeof c=="object"&&(n[a]=c,r+=1)}),r>0){const a=Object.keys(n),c=x.find(a,u=>this.isOS(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}const l=x.find(a,u=>this.isPlatform(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}}if(s>0){const a=Object.keys(i),c=x.find(a,l=>this.isBrowser(l,!0));if(c!==void 0)return this.compareVersion(i[c])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const s=x.getBrowserTypeByAlias(i);return n&&s&&(i=s.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(x.compareVersions(s,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class vu{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new oa(e,n)}static parse(e){return new oa(e).getResult()}static get BROWSER_MAP(){return aa}static get ENGINE_MAP(){return Et}static get OS_MAP(){return Re}static get PLATFORMS_MAP(){return Ee}}function Vn(){return Date.now()+Math.random().toString()}function Sn(){throw new Error("Method must be implemented in subclass")}function ca(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function zn(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:ca("https://c.daily.co/call-machine/versioned/".concat("0.73.0","/static/call-machine-object-bundle.js"),t)}function Wn(t){try{new URL(t)}catch{return!1}return!0}const la=Object.prototype.toString;function Vr(t){switch(la.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Dt(t,Error)}}function an(t,e){return la.call(t)===`[object ${e}]`}function ua(t){return an(t,"ErrorEvent")}function da(t){return an(t,"DOMError")}function vt(t){return an(t,"String")}function zr(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Wr(t){return t===null||zr(t)||typeof t!="object"&&typeof t!="function"}function on(t){return an(t,"Object")}function Hn(t){return typeof Event<"u"&&Dt(t,Event)}function Gn(t){return!!(t&&t.then&&typeof t.then=="function")}function Dt(t,e){try{return t instanceof e}catch{return!1}}function fa(t){return!(typeof t!="object"||t===null||!t.__isVue&&!t._isVue)}function cn(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function ha(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{fa(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function bu(t,e,n=!1){return!!vt(t)&&(an(e,"RegExp")?e.test(t):!!vt(e)&&(n?t===e:t.includes(e)))}function Kn(t,e=[],n=!1){return e.some(r=>bu(t,r,n))}function _u(t,e,n=250,r,i,s,a){if(!(s.exception&&s.exception.values&&a&&Dt(a.originalException,Error)))return;const c=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var l,u;c&&(s.exception.values=(l=Hr(t,e,i,a.originalException,r,s.exception.values,c,0),u=n,l.map(d=>(d.value&&(d.value=cn(d.value,u)),d))))}function Hr(t,e,n,r,i,s,a,c){if(s.length>=n+1)return s;let l=[...s];if(Dt(r[i],Error)){pa(a,c);const u=t(e,r[i]),d=l.length;ma(u,i,d,c),l=Hr(t,e,n,r[i],i,[u,...l],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Dt(u,Error)){pa(a,c);const p=t(e,u),w=l.length;ma(p,`errors[${d}]`,w,c),l=Hr(t,e,n,u,i,[p,...l],p,w)}}),l}function pa(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function ma(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function ga(t){return t===void 0?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const It="8.33.1",ce=globalThis;function Yn(t,e,n){const r=ce,i=r.__SENTRY__=r.__SENTRY__||{},s=i[It]=i[It]||{};return s[t]||(s[t]=e())}const Gr=ce;function ya(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,a=0;const c=" > ",l=c.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&s++<r&&(u=wu(n,d),!(u==="html"||s>1&&a+i.length*l+u.length>=p));)i.push(u),a+=u.length,n=n.parentNode;return i.reverse().join(c)}catch{return"<unknown>"}}function wu(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(Gr.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(a=>n.getAttribute(a)).map(a=>[a,n.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{r.push(`[${a[0]}="${a[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const a=n.className;if(a&&vt(a)){const c=a.split(/\s+/);for(const l of c)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const a of s){const c=n.getAttribute(a);c&&r.push(`[${a}="${c}"]`)}return r.join("")}const kn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Kr=["debug","info","warn","error","log","assert","trace"],Qn={};function Yr(t){if(!("console"in ce))return t();const e=ce.console,n={},r=Object.keys(Qn);r.forEach(i=>{const s=Qn[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}const ee=Yn("logger",function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return kn?Kr.forEach(n=>{e[n]=(...r)=>{t&&Yr(()=>{ce.console[n](`Sentry Logger [${n}]:`,...r)})}}):Kr.forEach(n=>{e[n]=()=>{}}),e}),Su=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Xn(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:a,protocol:c,publicKey:l}=t;return`${c}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${a}`}function va(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function ku(t){const e=typeof t=="string"?function(n){const r=Su.exec(n);if(!r)return void Yr(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});const[i,s,a="",c="",l="",u=""]=r.slice(1);let d="",p=u;const w=p.split("/");if(w.length>1&&(d=w.slice(0,-1).join("/"),p=w.pop()),p){const b=p.match(/^\d+/);b&&(p=b[0])}return va({host:c,pass:a,path:d,projectId:p,port:l,protocol:i,publicKey:s})}(t):va(t);if(e&&function(n){if(!kn)return!0;const{port:r,projectId:i,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(a=>!n[a]&&(ee.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(i.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(s)?r&&isNaN(parseInt(r,10))&&(ee.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(ee.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(ee.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}class ct extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Ve(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&ba(i,r),t[e]=i}function Nt(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{kn&&ee.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function ba(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Nt(t,"__sentry_original__",e)}catch{}}function Qr(t){return t.__sentry_original__}function _a(t){if(Vr(t))return{message:t.message,name:t.name,stack:t.stack,...Sa(t)};if(Hn(t)){const e={type:t.type,target:wa(t.target),currentTarget:wa(t.currentTarget),...Sa(t)};return typeof CustomEvent<"u"&&Dt(t,CustomEvent)&&(e.detail=t.detail),e}return t}function wa(t){try{return e=t,typeof Element<"u"&&Dt(e,Element)?ya(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function Sa(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function tt(t){return Xr(t,new Map)}function Xr(t,e){if(function(n){if(!on(n))return!1;try{const r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.getOwnPropertyNames(t))t[i]!==void 0&&(r[i]=Xr(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(Xr(i,e))}),r}return t}const Ft="?",ka=/\(error: (.*)\)/,Ea=/captureMessage|captureException/;function Zn(t){return t[t.length-1]||{}}const Ca="<anonymous>";function Ct(t){try{return t&&typeof t=="function"&&t.name||Ca}catch{return Ca}}function Ta(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const er={},Oa={};function Bt(t,e){er[t]=er[t]||[],er[t].push(e)}function Ut(t,e){Oa[t]||(e(),Oa[t]=!0)}function nt(t,e){const n=t&&er[t];if(n)for(const r of n)try{r(e)}catch(i){kn&&ee.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Ct(r)}
Error:`,i)}}function Eu(){"console"in ce&&Kr.forEach(function(t){t in ce.console&&Ve(ce.console,t,function(e){return Qn[t]=e,function(...n){nt("console",{args:n,level:t});const r=Qn[t];r&&r.apply(ce.console,n)}})})}const Zr=ce;function ei(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Cu(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in Zr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(ei(Zr.fetch))return!0;let t=!1;const e=Zr.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=ei(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){kn&&ee.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function En(){return Date.now()/1e3}const Tt=function(){const{performance:t}=ce;if(!t||!t.now)return En;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/1e3}();function Tu(t,e){const n="fetch";Bt(n,t),Ut(n,()=>function(r,i=!1){i&&!Cu()||Ve(ce,"fetch",function(s){return function(...a){const{method:c,url:l}=function(p){if(p.length===0)return{method:"GET",url:""};if(p.length===2){const[b,y]=p;return{url:Ma(b),method:ti(y,"method")?String(y.method).toUpperCase():"GET"}}const w=p[0];return{url:Ma(w),method:ti(w,"method")?String(w.method).toUpperCase():"GET"}}(a),u={args:a,fetchData:{method:c,url:l},startTimestamp:1e3*Tt()};nt("fetch",{...u});const d=new Error().stack;return s.apply(ce,a).then(async p=>(nt("fetch",{...u,endTimestamp:1e3*Tt(),response:p}),p),p=>{throw nt("fetch",{...u,endTimestamp:1e3*Tt(),error:p}),Vr(p)&&p.stack===void 0&&(p.stack=d,Nt(p,"framesToPop",1)),p})}})}(void 0,e))}function ti(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Ma(t){return typeof t=="string"?t:t?ti(t,"url")?t.url:t.toString?t.toString():"":""}(()=>{const{performance:t}=ce;if(!t||!t.now)return;const e=36e5,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,a=t.timing&&t.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-r):e;(s||c<e)&&i<=c&&t.timeOrigin})();let tr=null;function Ou(){tr=ce.onerror,ce.onerror=function(t,e,n,r,i){return nt("error",{column:r,error:i,line:n,msg:t,url:e}),!(!tr||tr.__SENTRY_LOADER__)&&tr.apply(this,arguments)},ce.onerror.__SENTRY_INSTRUMENTED__=!0}let nr=null;function Mu(){nr=ce.onunhandledrejection,ce.onunhandledrejection=function(t){return nt("unhandledrejection",t),!(nr&&!nr.__SENTRY_LOADER__)||nr.apply(this,arguments)},ce.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function rt(){const t=ce,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function Aa(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ot(t){const{message:e,event_id:n}=t;if(e)return e;const r=Aa(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ni(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function Cn(t,e){const n=Aa(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const i={...r&&r.data,...e.data};n.mechanism.data=i}}function Pa(t){if(t&&t.__sentry_captured__)return!0;try{Nt(t,"__sentry_captured__",!0)}catch{}return!1}function Mt(t,e=100,n=1/0){try{return ri("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function xa(t,e=3,n=102400){const r=Mt(t,e);return i=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(i))>n?xa(t,e-1,n):r;var i}function ri(t,e,n=1/0,r=1/0,i=function(){const s=typeof WeakSet=="function",a=s?new WeakSet:[];return[function(c){if(s)return!!a.has(c)||(a.add(c),!1);for(let l=0;l<a.length;l++)if(a[l]===c)return!0;return a.push(c),!1},function(c){if(s)a.delete(c);else for(let l=0;l<a.length;l++)if(a[l]===c){a.splice(l,1);break}}]}()){const[s,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const c=function(b,y){try{if(b==="domain"&&y&&typeof y=="object"&&y._events)return"[Domain]";if(b==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&y===global)return"[Global]";if(typeof window<"u"&&y===window)return"[Window]";if(typeof document<"u"&&y===document)return"[Document]";if(fa(y))return"[VueViewModel]";if(on(_=y)&&"nativeEvent"in _&&"preventDefault"in _&&"stopPropagation"in _)return"[SyntheticEvent]";if(typeof y=="number"&&!Number.isFinite(y))return`[${y}]`;if(typeof y=="function")return`[Function: ${Ct(y)}]`;if(typeof y=="symbol")return`[${String(y)}]`;if(typeof y=="bigint")return`[BigInt: ${String(y)}]`;const S=function(O){const A=Object.getPrototypeOf(O);return A?A.constructor.name:"null prototype"}(y);return/^HTML(\w*)Element$/.test(S)?`[HTMLElement: ${S}]`:`[object ${S}]`}catch(S){return`**non-serializable** (${S})`}var _}(t,e);if(!c.startsWith("[object "))return c;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return c.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{return ri("",u.toJSON(),l-1,r,i)}catch{}const d=Array.isArray(e)?[]:{};let p=0;const w=_a(e);for(const b in w){if(!Object.prototype.hasOwnProperty.call(w,b))continue;if(p>=r){d[b]="[MaxProperties ~]";break}const y=w[b];d[b]=ri(b,y,l-1,r,i),p++}return a(e),d}var bt;function $t(t){return new Ge(e=>{e(t)})}function rr(t){return new Ge((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(bt||(bt={}));class Ge{constructor(e){Ge.prototype.__init.call(this),Ge.prototype.__init2.call(this),Ge.prototype.__init3.call(this),Ge.prototype.__init4.call(this),this._state=bt.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Ge((r,i)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(a){i(a)}else r(s)},s=>{if(n)try{r(n(s))}catch(a){i(a)}else i(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Ge((n,r)=>{let i,s;return this.then(a=>{s=!1,i=a,e&&e()},a=>{s=!0,i=a,e&&e()}).then(()=>{s?r(i):n(i)})})}__init(){this._resolve=e=>{this._setResult(bt.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(bt.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{this._state===bt.PENDING&&(Gn(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===bt.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===bt.RESOLVED&&n[1](this._value),this._state===bt.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Au(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return rr(new ct("Not adding Promise because buffer limit was reached."));const i=r();return e.indexOf(i)===-1&&e.push(i),i.then(()=>n(i)).then(null,()=>n(i).then(null,()=>{})),i},drain:function(r){return new Ge((i,s)=>{let a=e.length;if(!a)return i(!0);const c=setTimeout(()=>{r&&r>0&&i(!1)},r);e.forEach(l=>{$t(l).then(()=>{--a||(clearTimeout(c),i(!0))},s)})})}}}function ii(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const Pu=["fatal","error","warning","log","info","debug"];function xu(t){return t==="warn"?"warning":Pu.includes(t)?t:"log"}const Lu=/^sentry-/;function ju(t){const e=function(r){if(!(!r||!vt(r)&&!Array.isArray(r)))return Array.isArray(r)?r.reduce((i,s)=>{const a=La(s);return Object.entries(a).forEach(([c,l])=>{i[c]=l}),i},{}):La(r)}(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>(i.match(Lu)&&(r[i.slice(7)]=s),r),{});return Object.keys(n).length>0?n:void 0}function La(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function Tn(t,e=[]){return[t,e]}function Ru(t,e){const[n,r]=t;return[n,[...r,e]]}function ja(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function si(t){return ce.__SENTRY__&&ce.__SENTRY__.encodePolyfill?ce.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function Du(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[si(r),s]:r.push(typeof s=="string"?si(s):s)}for(const s of n){const[a,c]=s;if(i(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let l;try{l=JSON.stringify(c)}catch{l=JSON.stringify(Mt(c))}i(l)}}return typeof r=="string"?r:function(s){const a=s.reduce((u,d)=>u+d.length,0),c=new Uint8Array(a);let l=0;for(const u of s)c.set(u,l),l+=u.length;return c}(r)}function Iu(t){const e=typeof t.data=="string"?si(t.data):t.data;return[tt({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const Nu={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Ra(t){return Nu[t]}function Da(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function Fu(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(s)for(const c of s.trim().split(",")){const[l,u,,,d]=c.split(":",5),p=parseInt(l,10),w=1e3*(isNaN(p)?60:p);if(u)for(const b of u.split(";"))b==="metric_bucket"&&d&&!d.split(";").includes("custom")||(i[b]=r+w);else i.all=r+w}else a?i.all=r+function(c,l=Date.now()){const u=parseInt(`${c}`,10);if(!isNaN(u))return 1e3*u;const d=Date.parse(`${c}`);return isNaN(d)?6e4:d-l}(a,r):e===429&&(i.all=r+6e4);return i}function Ia(){return{traceId:rt(),spanId:rt().substring(16)}}const ir=ce,ve=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function sr(){return ai(ce),ce}function ai(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||It,e[It]=e[It]||{}}function oi(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Tt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:rt()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}const ci="_sentrySpan";function Na(t,e){e?Nt(t,ci,e):delete t[ci]}function Fa(t){return t[ci]}class li{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Ia()}clone(){const e=new li;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Na(e,Fa(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&oi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof At?[n.getScopeData(),n.getRequestSession()]:on(n)?[e,e.requestSession]:[],{tags:s,extra:a,user:c,contexts:l,level:u,fingerprint:d=[],propagationContext:p}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},c&&Object.keys(c).length&&(this._user=c),u&&(this._level=u),d.length&&(this._fingerprint=d),p&&(this._propagationContext=p),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Na(this,void 0),this._attachments=[],this._propagationContext=Ia(),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const i={timestamp:En(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Fa(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:rt();if(!this._client)return ee.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:rt();if(!this._client)return ee.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:rt();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(ee.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const At=li;class Bu{constructor(e,n){let r,i;r=e||new At,i=n||new At,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Gn(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ln(){const t=ai(sr());return t.stack=t.stack||new Bu(Yn("defaultCurrentScope",()=>new At),Yn("defaultIsolationScope",()=>new At))}function Uu(t){return ln().withScope(t)}function $u(t,e){const n=ln();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Ba(t){return ln().withScope(()=>t(ln().getIsolationScope()))}function ui(t){const e=ai(t);return e.acs?e.acs:{withIsolationScope:Ba,withScope:Uu,withSetScope:$u,withSetIsolationScope:(n,r)=>Ba(r),getCurrentScope:()=>ln().getScope(),getIsolationScope:()=>ln().getIsolationScope()}}function di(){return ui(sr()).getCurrentScope()}function Ua(){return ui(sr()).getIsolationScope()}function Ne(){return di().getClient()}function qu(t){const e=t._sentryMetrics;if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(tt(i));return n}function Ju(t){const{spanId:e,traceId:n}=t.spanContext(),{parent_span_id:r}=ar(t);return tt({parent_span_id:r,span_id:e,trace_id:n})}function $a(t){return typeof t=="number"?qa(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?qa(t.getTime()):Tt()}function qa(t){return t>9999999999?t/1e3:t}function ar(t){if(function(e){return typeof e.getSpanJSON=="function"}(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(function(r){const i=r;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(t)){const{attributes:r,startTime:i,name:s,endTime:a,parentSpanId:c,status:l}=t;return tt({span_id:e,trace_id:n,data:r,description:s,parent_span_id:c,start_timestamp:$a(i),timestamp:$a(a)||void 0,status:Vu(l),op:r["sentry.op"],origin:r["sentry.origin"],_metrics_summary:qu(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function Vu(t){if(t&&t.code!==0)return t.code===1?"ok":t.message||"unknown_error"}function Ja(t){return t._sentryRootSpan||t}const Va="production";function za(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=tt({environment:n.environment||Va,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function zu(t){const e=Ne();if(!e)return{};const n=za(ar(t).trace_id||"",e),r=Ja(t),i=r._frozenDsc;if(i)return i;const s=r.spanContext().traceState,a=s&&s.get("sentry.dsc"),c=a&&ju(a);if(c)return c;const l=ar(r),u=l.data||{},d=u["sentry.sample_rate"];d!=null&&(n.sample_rate=`${d}`);const p=u["sentry.source"],w=l.description;return p!=="url"&&w&&(n.transaction=w),function(b){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const y=Ne(),_=y&&y.getOptions();return!!_&&(_.enableTracing||"tracesSampleRate"in _||"tracesSampler"in _)}()&&(n.sampled=String(function(b){const{traceFlags:y}=b.spanContext();return y===1}(r))),e.emit("createDsc",n,r),n}function Wu(t,e,n,r){const i=Da(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(c,l){l&&(c.sdk=c.sdk||{},c.sdk.name=c.sdk.name||l.name,c.sdk.version=c.sdk.version||l.version,c.sdk.integrations=[...c.sdk.integrations||[],...l.integrations||[]],c.sdk.packages=[...c.sdk.packages||[],...l.packages||[]])})(t,n&&n.sdk);const a=function(c,l,u,d){const p=c.sdkProcessingMetadata&&c.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:c.event_id,sent_at:new Date().toISOString(),...l&&{sdk:l},...!!u&&d&&{dsn:Xn(d)},...p&&{trace:tt({...p})}}}(t,i,r,e);return delete t.sdkProcessingMetadata,Tn(a,[[{type:s},t]])}function fi(t,e,n,r=0){return new Ge((i,s)=>{const a=t[r];if(e===null||typeof a!="function")i(e);else{const c=a({...e},n);ve&&a.id&&c===null&&ee.log(`Event processor "${a.id}" dropped event`),Gn(c)?c.then(l=>fi(t,l,n,r+1).then(i)).then(null,s):fi(t,c,n,r+1).then(i).then(null,s)}})}function Hu(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;(function(a,c){const{extra:l,tags:u,user:d,contexts:p,level:w,transactionName:b}=c,y=tt(l);y&&Object.keys(y).length&&(a.extra={...y,...a.extra});const _=tt(u);_&&Object.keys(_).length&&(a.tags={..._,...a.tags});const S=tt(d);S&&Object.keys(S).length&&(a.user={...S,...a.user});const O=tt(p);O&&Object.keys(O).length&&(a.contexts={...O,...a.contexts}),w&&(a.level=w),b&&a.type!=="transaction"&&(a.transaction=b)})(t,e),r&&function(a,c){a.contexts={trace:Ju(c),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:zu(c),...a.sdkProcessingMetadata};const l=Ja(c),u=ar(l).description;u&&!a.transaction&&a.type==="transaction"&&(a.transaction=u)}(t,r),function(a,c){a.fingerprint=a.fingerprint?function(l){return Array.isArray(l)?l:[l]}(a.fingerprint):[],c&&(a.fingerprint=a.fingerprint.concat(c)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint}(t,n),function(a,c){const l=[...a.breadcrumbs||[],...c];a.breadcrumbs=l.length?l:void 0}(t,i),function(a,c){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...c}}(t,s)}function Wa(t,e){const{extra:n,tags:r,user:i,contexts:s,level:a,sdkProcessingMetadata:c,breadcrumbs:l,fingerprint:u,eventProcessors:d,attachments:p,propagationContext:w,transactionName:b,span:y}=e;On(t,"extra",n),On(t,"tags",r),On(t,"user",i),On(t,"contexts",s),On(t,"sdkProcessingMetadata",c),a&&(t.level=a),b&&(t.transactionName=b),y&&(t.span=y),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),d.length&&(t.eventProcessors=[...t.eventProcessors,...d]),p.length&&(t.attachments=[...t.attachments,...p]),t.propagationContext={...t.propagationContext,...w}}function On(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function Gu(t,e,n,r,i,s){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=t,l={...e,event_id:e.event_id||n.event_id||rt(),timestamp:e.timestamp||En()},u=n.integrations||t.integrations.map(y=>y.name);(function(y,_){const{environment:S,release:O,dist:A,maxValueLength:N=250}=_;"environment"in y||(y.environment="environment"in _?S:Va),y.release===void 0&&O!==void 0&&(y.release=O),y.dist===void 0&&A!==void 0&&(y.dist=A),y.message&&(y.message=cn(y.message,N));const E=y.exception&&y.exception.values&&y.exception.values[0];E&&E.value&&(E.value=cn(E.value,N));const k=y.request;k&&k.url&&(k.url=cn(k.url,N))})(l,t),function(y,_){_.length>0&&(y.sdk=y.sdk||{},y.sdk.integrations=[...y.sdk.integrations||[],..._])}(l,u),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&function(y,_){const S=ce._sentryDebugIds;if(!S)return;let O;const A=Ha.get(_);A?O=A:(O=new Map,Ha.set(_,O));const N=Object.entries(S).reduce((E,[k,M])=>{let D;const F=O.get(k);F?D=F:(D=_(k),O.set(k,D));for(let z=D.length-1;z>=0;z--){const L=D[z];if(L.filename){E[L.filename]=M;break}}return E},{});try{y.exception.values.forEach(E=>{E.stacktrace.frames.forEach(k=>{k.filename&&(k.debug_id=N[k.filename])})})}catch{}}(l,t.stackParser);const d=function(y,_){if(!_)return y;const S=y?y.clone():new At;return S.update(_),S}(r,n.captureContext);n.mechanism&&Cn(l,n.mechanism);const p=i?i.getEventProcessors():[],w=Yn("globalScope",()=>new At).getScopeData();s&&Wa(w,s.getScopeData()),d&&Wa(w,d.getScopeData());const b=[...n.attachments||[],...w.attachments];return b.length&&(n.attachments=b),Hu(l,w),fi([...p,...w.eventProcessors],l,n).then(y=>(y&&function(_){const S={};try{_.exception.values.forEach(A=>{A.stacktrace.frames.forEach(N=>{N.debug_id&&(N.abs_path?S[N.abs_path]=N.debug_id:N.filename&&(S[N.filename]=N.debug_id),delete N.debug_id)})})}catch{}if(Object.keys(S).length===0)return;_.debug_meta=_.debug_meta||{},_.debug_meta.images=_.debug_meta.images||[];const O=_.debug_meta.images;Object.entries(S).forEach(([A,N])=>{O.push({type:"sourcemap",code_file:A,debug_id:N})})}(y),typeof a=="number"&&a>0?function(_,S,O){if(!_)return null;const A={..._,..._.breadcrumbs&&{breadcrumbs:_.breadcrumbs.map(N=>({...N,...N.data&&{data:Mt(N.data,S,O)}}))},..._.user&&{user:Mt(_.user,S,O)},..._.contexts&&{contexts:Mt(_.contexts,S,O)},..._.extra&&{extra:Mt(_.extra,S,O)}};return _.contexts&&_.contexts.trace&&A.contexts&&(A.contexts.trace=_.contexts.trace,_.contexts.trace.data&&(A.contexts.trace.data=Mt(_.contexts.trace.data,S,O))),_.spans&&(A.spans=_.spans.map(N=>({...N,...N.data&&{data:Mt(N.data,S,O)}}))),A}(y,a,c):y))}const Ha=new WeakMap;function Fm(t){}function Ga(t,e){return di().captureEvent(t,e)}function Ku(t,e){return n={sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}const Ka=[];function Ya(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Qa(t,e,n){if(n[e.name])ve&&ee.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,Ka.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Ka.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,a)=>r(s,a,t),{id:e.name});t.addEventProcessor(i)}ve&&ee.log(`Integration installed: ${e.name}`)}}const Xa="Not capturing exception because it's already been captured.";class Yu{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=ku(e.dsn):ve&&ee.warn("No DSN provided, client will not send events."),this._dsn){const s=(n=this._dsn,r=e.tunnel,i=e._metadata?e._metadata.sdk:void 0,r||`${function(a){return`${function(c){const l=c.protocol?`${c.protocol}:`:"",u=c.port?`:${c.port}`:"";return`${l}//${c.host}${u}${c.path?`/${c.path}`:""}/api/`}(a)}${a.projectId}/envelope/`}(n)}?${Ku(n,i)}`);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:s})}var n,r,i}captureException(e,n,r){const i=rt();if(Pa(e))return ve&&ee.log(Xa),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(a=>this._captureEvent(a,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:rt(),...r},a=zr(e)?e:String(e),c=Wr(e)?this.eventFromMessage(a,n,s):this.eventFromException(e,s);return this._process(c.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=rt();if(n&&n.originalException&&Pa(n.originalException))return ve&&ee.log(Xa),i;const s={event_id:i,...n},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?ve&&ee.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),oi(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):$t(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Qa(this,e,this._integrations),n||Ya(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Wu(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Ru(r,Iu(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=function(r,i,s,a){const c=Da(s);return Tn({sent_at:new Date().toISOString(),...c&&{sdk:c},...!!a&&i&&{dsn:Xn(i)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,s=`${e}:${n}`;ve&&ee.log(`Recording outcome: "${s}"${i>1?` (${i} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+i}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(ve&&ee.error("Error while sending event:",n),n)):(ve&&ee.error("Transport disabled"),$t({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(n,r){const i={};return r.forEach(s=>{s&&Qa(n,s,i)}),i}(this,e),Ya(this,e)}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const c of s){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(oi(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ge(n=>{let r=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i=Ua()){const s=this.getOptions(),a=Object.keys(this._integrations);return!n.integrations&&a.length>0&&(n.integrations=a),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),Gu(s,e,n,r,this,i).then(c=>{if(c===null)return c;const l={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(c.contexts&&c.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:p,dsc:w}=l;c.contexts={trace:tt({trace_id:u,span_id:d,parent_span_id:p}),...c.contexts};const b=w||za(u,this);c.sdkProcessingMetadata={dynamicSamplingContext:b,...c.sdkProcessingMetadata}}return c})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(ve){const s=i;s.logLevel==="log"?ee.log(s.message):ee.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,a=eo(e),c=Za(e),l=e.type||"error",u=`before send for type \`${l}\``,d=s===void 0?void 0:function(b){if(typeof b=="boolean")return Number(b);const y=typeof b=="string"?parseFloat(b):b;if(!(typeof y!="number"||isNaN(y)||y<0||y>1))return y;ve&&ee.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(b)} of type ${JSON.stringify(typeof b)}.`)}(s);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error",e),rr(new ct(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const p=l==="replay_event"?"replay":l,w=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,w).then(b=>{if(b===null)throw this.recordDroppedEvent("event_processor",p,e),new ct("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return b;const y=function(_,S,O,A){const{beforeSend:N,beforeSendTransaction:E,beforeSendSpan:k}=S;if(Za(O)&&N)return N(O,A);if(eo(O)){if(O.spans&&k){const M=[];for(const D of O.spans){const F=k(D);F?M.push(F):_.recordDroppedEvent("before_send","span")}O.spans=M}if(E){if(O.spans){const M=O.spans.length;O.sdkProcessingMetadata={...O.sdkProcessingMetadata,spanCountBeforeProcessing:M}}return E(O,A)}}return O}(this,i,b,n);return function(_,S){const O=`${S} must return \`null\` or a valid event.`;if(Gn(_))return _.then(A=>{if(!on(A)&&A!==null)throw new ct(O);return A},A=>{throw new ct(`${S} rejected with ${A}`)});if(!on(_)&&_!==null)throw new ct(O);return _}(y,u)}).then(b=>{if(b===null){if(this.recordDroppedEvent("before_send",p,e),a){const S=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw new ct(`${u} returned \`null\`, will not send event.`,"log")}const y=r&&r.getSession();if(!a&&y&&this._updateSessionFromEvent(y,b),a){const S=(b.sdkProcessingMetadata&&b.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(b.spans?b.spans.length:0);S>0&&this.recordDroppedEvent("before_send","span",S)}const _=b.transaction_info;if(a&&_&&b.transaction!==e.transaction){const S="custom";b.transaction_info={..._,source:S}}return this.sendEvent(b,n),b}).then(null,b=>{throw b instanceof ct?b:(this.captureException(b,{data:{__sentry__:!0},originalException:b}),new ct(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${b}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){ve&&ee.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(ve&&ee.log("No outcomes to send"));if(!this._dsn)return void(ve&&ee.log("No dsn provided, will not send outcomes"));ve&&ee.log("Sending outcomes:",e);const n=(r=e,Tn((i=this._options.tunnel&&Xn(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:s||En(),discarded_events:r}]]));var r,i,s;this.sendEnvelope(n)}}function Za(t){return t.type===void 0}function eo(t){return t.type==="transaction"}function Qu(t,e,n=Au(t.bufferSize||64)){let r={};return{send:function(i){const s=[];if(ja(i,(l,u)=>{const d=Ra(u);if(function(p,w,b=Date.now()){return function(y,_){return y[_]||y.all||0}(p,w)>b}(r,d)){const p=to(l,u);t.recordDroppedEvent("ratelimit_backoff",d,p)}else s.push(l)}),s.length===0)return $t({});const a=Tn(i[0],s),c=l=>{ja(a,(u,d)=>{const p=to(u,d);t.recordDroppedEvent(l,Ra(d),p)})};return n.add(()=>e({body:Du(a)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&ve&&ee.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Fu(r,l),l),l=>{throw c("network_error"),l})).then(l=>l,l=>{if(l instanceof ct)return ve&&ee.error("Skipped sending event because buffer is full."),c("queue_overflow"),$t({});throw l})},flush:i=>n.drain(i)}}function to(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const Xu=100;function qt(t,e){const n=Ne(),r=Ua();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Xu}=n.getOptions();if(s<=0)return;const a={timestamp:En(),...t},c=i?Yr(()=>i(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,s))}let no;const ro=new WeakMap,Zu=()=>({name:"FunctionToString",setupOnce(){no=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Qr(this),n=ro.has(Ne())&&e!==void 0?e:this;return no.apply(n,t)}}catch{}},setup(t){ro.set(t,!0)}}),ed=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],td=(t={})=>({name:"InboundFilters",processEvent(e,n,r){const i=r.getOptions(),s=function(a={},c={}){return{allowUrls:[...a.allowUrls||[],...c.allowUrls||[]],denyUrls:[...a.denyUrls||[],...c.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...c.ignoreErrors||[],...a.disableErrorDefaults?[]:ed],ignoreTransactions:[...a.ignoreTransactions||[],...c.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}}(t,i);return function(a,c){return c.ignoreInternal&&function(l){try{return l.exception.values[0].type==="SentryError"}catch{}return!1}(a)?(ve&&ee.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ot(a)}`),!0):function(l,u){return l.type||!u||!u.length?!1:function(d){const p=[];d.message&&p.push(d.message);let w;try{w=d.exception.values[d.exception.values.length-1]}catch{}return w&&w.value&&(p.push(w.value),w.type&&p.push(`${w.type}: ${w.value}`)),p}(l).some(d=>Kn(d,u))}(a,c.ignoreErrors)?(ve&&ee.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ot(a)}`),!0):function(l){return l.type||!l.exception||!l.exception.values||l.exception.values.length===0?!1:!l.message&&!l.exception.values.some(u=>u.stacktrace||u.type&&u.type!=="Error"||u.value)}(a)?(ve&&ee.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ot(a)}`),!0):function(l,u){if(l.type!=="transaction"||!u||!u.length)return!1;const d=l.transaction;return!!d&&Kn(d,u)}(a,c.ignoreTransactions)?(ve&&ee.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ot(a)}`),!0):function(l,u){if(!u||!u.length)return!1;const d=or(l);return!!d&&Kn(d,u)}(a,c.denyUrls)?(ve&&ee.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ot(a)}.
Url: ${or(a)}`),!0):function(l,u){if(!u||!u.length)return!0;const d=or(l);return!d||Kn(d,u)}(a,c.allowUrls)?!1:(ve&&ee.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ot(a)}.
Url: ${or(a)}`),!0)}(e,s)?null:e}});function or(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const i=n[r];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return ve&&ee.error(`Cannot extract url for event ${Ot(t)}`),null}}const nd=()=>{let t;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(n,r){return r?!!(function(i,s){const a=i.message,c=s.message;return!(!a&&!c||a&&!c||!a&&c||a!==c||!so(i,s)||!io(i,s))}(n,r)||function(i,s){const a=ao(s),c=ao(i);return!(!a||!c||a.type!==c.type||a.value!==c.value||!so(i,s)||!io(i,s))}(n,r)):!1}(e,t))return ve&&ee.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}};function io(t,e){let n=Ta(t),r=Ta(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.filename!==a.filename||s.lineno!==a.lineno||s.colno!==a.colno||s.function!==a.function)return!1}return!0}function so(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function ao(t){return t.exception&&t.exception.values&&t.exception.values[0]}const xe=ce;let hi=0;function oo(){return hi>0}function un(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Qr(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(a=>un(a,e));return t.apply(this,s)}catch(s){throw hi++,setTimeout(()=>{hi--}),function(...a){const c=ui(sr());if(a.length===2){const[l,u]=a;return l?c.withSetScope(l,u):c.withScope(u)}c.withScope(a[0])}(a=>{var c;a.addEventProcessor(l=>(e.mechanism&&(ni(l,void 0),Cn(l,e.mechanism)),l.extra={...l.extra,arguments:i},l)),c=s,di().captureException(c,void 0)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}ba(r,t),Nt(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}const pi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function mi(t,e){const n=yi(t,e),r={type:e&&e.name,value:sd(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function rd(t,e,n,r){const i=Ne(),s=i&&i.getOptions().normalizeDepth,a=function(u){for(const d in u)if(Object.prototype.hasOwnProperty.call(u,d)){const p=u[d];if(p instanceof Error)return p}}(e),c={__serialized__:xa(e,s)};if(a)return{exception:{values:[mi(t,a)]},extra:c};const l={exception:{values:[{type:Hn(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:ad(e,{isUnhandledRejection:r})}]},extra:c};if(n){const u=yi(t,n);u.length&&(l.exception.values[0].stacktrace={frames:u})}return l}function gi(t,e){return{exception:{values:[mi(t,e)]}}}function yi(t,e){const n=e.stacktrace||e.stack||"",r=function(s){return s&&id.test(s.message)?1:0}(e),i=function(s){return typeof s.framesToPop=="number"?s.framesToPop:0}(e);try{return t(n,r,i)}catch{}return[]}const id=/Minified React error #\d+;/i;function sd(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function vi(t,e,n,r,i){let s;if(ua(e)&&e.error)return gi(t,e.error);if(da(e)||an(e,"DOMException")){const a=e;if("stack"in e)s=gi(t,e);else{const c=a.name||(da(a)?"DOMError":"DOMException"),l=a.message?`${c}: ${a.message}`:c;s=bi(t,l,n,r),ni(s,l)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}return Vr(e)?gi(t,e):on(e)||Hn(e)?(s=rd(t,e,n,i),Cn(s,{synthetic:!0}),s):(s=bi(t,e,n,r),ni(s,`${e}`),Cn(s,{synthetic:!0}),s)}function bi(t,e,n,r){const i={};if(r&&n){const s=yi(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(zr(e)){const{__sentry_template_string__:s,__sentry_template_values__:a}=e;return i.logentry={message:s,params:a},i}return i.message=e,i}function ad(t,{isUnhandledRejection:e}){const n=function(i,s=40){const a=Object.keys(_a(i));a.sort();const c=a[0];if(!c)return"[object has no keys]";if(c.length>=s)return cn(c,s);for(let l=a.length;l>0;l--){const u=a.slice(0,l).join(", ");if(!(u.length>s))return l===a.length?u:cn(u,s)}return""}(t),r=e?"promise rejection":"exception";return ua(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Hn(t)?`Event \`${function(i){try{const s=Object.getPrototypeOf(i);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}class od extends Yu{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e};(function(r,i,s=[i],a="npm"){const c=r._metadata||{};c.sdk||(c.sdk={name:`sentry.javascript.${i}`,packages:s.map(l=>({name:`${a}:@sentry/${l}`,version:It})),version:It}),r._metadata=c})(n,"browser",["browser"],xe.SENTRY_SDK_SOURCE||"npm"),super(n),n.sendClientReports&&xe.document&&xe.document.addEventListener("visibilitychange",()=>{xe.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,i,s,a){const c=vi(r,i,s&&s.syntheticException||void 0,a);return Cn(c),c.level="error",s&&s.event_id&&(c.event_id=s.event_id),$t(c)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(i,s,a="info",c,l){const u=bi(i,s,c&&c.syntheticException||void 0,l);return u.level=a,c&&c.event_id&&(u.event_id=c.event_id),$t(u)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(pi&&ee.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:i,tunnel:s,dsn:a}){const c={event_id:r.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!s&&!!a&&{dsn:Xn(a)}};return Tn(c,[function(u){return[{type:"user_report"},u]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}}const cd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Le=ce;let co,_i,wi,cr;function ld(){if(!Le.document)return;const t=nt.bind(null,"dom"),e=lo(t,!0);Le.document.addEventListener("click",e,!1),Le.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=Le[n]&&Le[n].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(Ve(r,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{const l=this,u=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){const p=lo(t);d.handler=p,i.call(this,s,p,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),Ve(r,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{const l=this,u=l.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function lo(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(s){try{return s.target}catch{return null}}(n);if(function(s,a){return s==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)}(n.type,r))return;Nt(n,"_sentryCaptured",!0),r&&!r._sentryId&&Nt(r,"_sentryId",rt());const i=n.type==="keypress"?"input":n.type;(function(s){if(s.type!==_i)return!1;try{if(!s.target||s.target._sentryId!==wi)return!1}catch{}return!0})(n)||(t({event:n,name:i,global:e}),_i=n.type,wi=r?r._sentryId:void 0),clearTimeout(co),co=Le.setTimeout(()=>{wi=void 0,_i=void 0},1e3)}}function ud(){if(!function(){const n=ir.chrome,r=n&&n.app&&n.app.runtime,i="history"in ir&&!!ir.history.pushState&&!!ir.history.replaceState;return!r&&i}())return;const t=Le.onpopstate;function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=cr,a=String(i);cr=a,nt("history",{from:s,to:a})}return n.apply(this,r)}}Le.onpopstate=function(...n){const r=Le.location.href,i=cr;if(cr=r,nt("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}},Ve(Le.history,"pushState",e),Ve(Le.history,"replaceState",e)}const lr={};function uo(t){lr[t]=void 0}const Mn="__sentry_xhr_v3__";function dd(){if(!Le.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=1e3*Tt(),s=vt(r[0])?r[0].toUpperCase():void 0,a=function(l){if(vt(l))return l;try{return l.toString()}catch{}}(r[1]);if(!s||!a)return e.apply(n,r);n[Mn]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const l=n[Mn];if(l&&n.readyState===4){try{l.status_code=n.status}catch{}nt("xhr",{endTimestamp:1e3*Tt(),startTimestamp:i,xhr:n})}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply:(l,u,d)=>(c(),l.apply(u,d))}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(l,u,d){const[p,w]=d,b=u[Mn];return b&&vt(p)&&vt(w)&&(b.request_headers[p.toLowerCase()]=w),l.apply(u,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[Mn];return i?(r[0]!==void 0&&(i.body=r[0]),nt("xhr",{startTimestamp:1e3*Tt(),xhr:n}),e.apply(n,r)):e.apply(n,r)}})}function fd(t,e=function(n){const r=lr[n];if(r)return r;let i=Le[n];if(ei(i))return lr[n]=i.bind(Le);const s=Le.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const c=a.contentWindow;c&&c[n]&&(i=c[n]),s.head.removeChild(a)}catch(a){cd&&ee.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,a)}return i&&(lr[n]=i.bind(Le))}("fetch")){let n=0,r=0;return Qu(t,function(i){const s=i.body.length;n+=s,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return uo("fetch"),rr("No fetch implementation available");try{return e(t.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return uo("fetch"),n-=s,r--,rr(c)}})}function Si(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?Ft:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const hd=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,pd=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,md=/\((\S*)(?::(\d+))(?::(\d+))\)/,gd=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,yd=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,vd=function(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],a=n.split(`
`);for(let c=r;c<a.length;c++){const l=a[c];if(l.length>1024)continue;const u=ka.test(l)?l.replace(ka,"$1"):l;if(!u.match(/\S*Error: /)){for(const d of e){const p=d(u);if(p){s.push(p);break}}if(s.length>=50+i)break}}return function(c){if(!c.length)return[];const l=Array.from(c);return/sentryWrapped/.test(Zn(l).function||"")&&l.pop(),l.reverse(),Ea.test(Zn(l).function||"")&&(l.pop(),Ea.test(Zn(l).function||"")&&l.pop()),l.slice(0,50).map(u=>({...u,filename:u.filename||Zn(l).filename,function:u.function||Ft}))}(s.slice(i))}}([30,t=>{const e=hd.exec(t);if(e){const[,r,i,s]=e;return Si(r,Ft,+i,+s)}const n=pd.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=md.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[r,i]=fo(n[1]||Ft,n[2]);return Si(i,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,t=>{const e=gd.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=yd.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],r=e[1]||Ft;return[r,n]=fo(r,n),Si(n,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),fo=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Ft,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},ho=1024,bd=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:"Breadcrumbs",setup(n){var r;e.console&&function(i){const s="console";Bt(s,i),Ut(s,Eu)}(function(i){return function(s){if(Ne()!==i)return;const a={category:"console",data:{arguments:s.args,logger:"console"},level:xu(s.level),message:ha(s.args," ")};if(s.level==="assert"){if(s.args[0]!==!1)return;a.message=`Assertion failed: ${ha(s.args.slice(1)," ")||"console.assert"}`,a.data.arguments=s.args.slice(1)}qt(a,{input:s.args,level:s.level})}}(n)),e.dom&&(r=function(i,s){return function(a){if(Ne()!==i)return;let c,l,u=typeof s=="object"?s.serializeAttribute:void 0,d=typeof s=="object"&&typeof s.maxStringLength=="number"?s.maxStringLength:void 0;d&&d>ho&&(pi&&ee.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${d} was configured. Sentry will use 1024 instead.`),d=ho),typeof u=="string"&&(u=[u]);try{const w=a.event,b=function(y){return!!y&&!!y.target}(w)?w.target:w;c=ya(b,{keyAttrs:u,maxStringLength:d}),l=function(y){if(!Gr.HTMLElement)return null;let _=y;for(let S=0;S<5;S++){if(!_)return null;if(_ instanceof HTMLElement){if(_.dataset.sentryComponent)return _.dataset.sentryComponent;if(_.dataset.sentryElement)return _.dataset.sentryElement}_=_.parentNode}return null}(b)}catch{c="<unknown>"}if(c.length===0)return;const p={category:`ui.${a.name}`,message:c};l&&(p.data={"ui.component_name":l}),qt(p,{event:a.event,name:a.name,global:a.global})}}(n,e.dom),Bt("dom",r),Ut("dom",ld)),e.xhr&&function(i){Bt("xhr",i),Ut("xhr",dd)}(function(i){return function(s){if(Ne()!==i)return;const{startTimestamp:a,endTimestamp:c}=s,l=s.xhr[Mn];if(!a||!c||!l)return;const{method:u,url:d,status_code:p,body:w}=l,b={method:u,url:d,status_code:p},y={xhr:s.xhr,input:w,startTimestamp:a,endTimestamp:c};qt({category:"xhr",data:b,type:"http",level:ga(p)},y)}}(n)),e.fetch&&Tu(function(i){return function(s){if(Ne()!==i)return;const{startTimestamp:a,endTimestamp:c}=s;if(c&&(!s.fetchData.url.match(/sentry_key/)||s.fetchData.method!=="POST"))if(s.error)qt({category:"fetch",data:s.fetchData,level:"error",type:"http"},{data:s.error,input:s.args,startTimestamp:a,endTimestamp:c});else{const l=s.response,u={...s.fetchData,status_code:l&&l.status},d={input:s.args,response:l,startTimestamp:a,endTimestamp:c};qt({category:"fetch",data:u,type:"http",level:ga(u.status_code)},d)}}}(n)),e.history&&function(i){const s="history";Bt(s,i),Ut(s,ud)}(function(i){return function(s){if(Ne()!==i)return;let a=s.from,c=s.to;const l=ii(xe.location.href);let u=a?ii(a):void 0;const d=ii(c);u&&u.path||(u=l),l.protocol===d.protocol&&l.host===d.host&&(c=d.relative),l.protocol===u.protocol&&l.host===u.host&&(a=u.relative),qt({category:"navigation",data:{from:a,to:c}})}}(n)),e.sentry&&n.on("beforeSendEvent",function(i){return function(s){Ne()===i&&qt({category:"sentry."+(s.type==="transaction"?"transaction":"event"),event_id:s.event_id,level:s.level,message:Ot(s)},{event:s})}}(n))}}},_d=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],wd=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&Ve(xe,"setTimeout",po),e.setInterval&&Ve(xe,"setInterval",po),e.requestAnimationFrame&&Ve(xe,"requestAnimationFrame",Sd),e.XMLHttpRequest&&"XMLHttpRequest"in xe&&Ve(XMLHttpRequest.prototype,"send",kd);const n=e.eventTarget;n&&(Array.isArray(n)?n:_d).forEach(Ed)}}};function po(t){return function(...e){const n=e[0];return e[0]=un(n,{mechanism:{data:{function:Ct(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Sd(t){return function(e){return t.apply(this,[un(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ct(t)},handled:!1,type:"instrument"}})])}}function kd(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&Ve(n,r,function(i){const s={mechanism:{data:{function:r,handler:Ct(i)},handled:!1,type:"instrument"}},a=Qr(i);return a&&(s.mechanism.data.handler=Ct(a)),un(i,s)})}),t.apply(this,e)}}function Ed(t){const e=xe,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ve(n,"addEventListener",function(r){return function(i,s,a){try{typeof s.handleEvent=="function"&&(s.handleEvent=un(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ct(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,un(s,{mechanism:{data:{function:"addEventListener",handler:Ct(s),target:t},handled:!1,type:"instrument"}}),a])}}),Ve(n,"removeEventListener",function(r){return function(i,s,a){const c=s;try{const l=c&&c.__sentry_wrapped__;l&&r.call(this,i,l,a)}catch{}return r.call(this,i,c,a)}}))}const Cd=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(function(r){(function(i){const s="error";Bt(s,i),Ut(s,Ou)})(i=>{const{stackParser:s,attachStacktrace:a}=go();if(Ne()!==r||oo())return;const{msg:c,url:l,line:u,column:d,error:p}=i,w=function(b,y,_,S){const O=b.exception=b.exception||{},A=O.values=O.values||[],N=A[0]=A[0]||{},E=N.stacktrace=N.stacktrace||{},k=E.frames=E.frames||[],M=isNaN(parseInt(S,10))?void 0:S,D=isNaN(parseInt(_,10))?void 0:_,F=vt(y)&&y.length>0?y:function(){try{return Gr.document.location.href}catch{return""}}();return k.length===0&&k.push({colno:M,filename:F,function:Ft,in_app:!0,lineno:D}),b}(vi(s,p||c,void 0,a,!1),l,u,d);w.level="error",Ga(w,{originalException:p,mechanism:{handled:!1,type:"onerror"}})})}(n),mo("onerror")),e.onunhandledrejection&&(function(r){(function(i){const s="unhandledrejection";Bt(s,i),Ut(s,Mu)})(i=>{const{stackParser:s,attachStacktrace:a}=go();if(Ne()!==r||oo())return;const c=function(u){if(Wr(u))return u;try{if("reason"in u)return u.reason;if("detail"in u&&"reason"in u.detail)return u.detail.reason}catch{}return u}(i),l=Wr(c)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(c)}`}]}}:vi(s,c,void 0,a,!0);l.level="error",Ga(l,{originalException:c,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(n),mo("onunhandledrejection"))}}};function mo(t){pi&&ee.log(`Global Handler attached: ${t}`)}function go(){const t=Ne();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Td=()=>({name:"HttpContext",preprocessEvent(t){if(!xe.navigator&&!xe.location&&!xe.document)return;const e=t.request&&t.request.url||xe.location&&xe.location.href,{referrer:n}=xe.document||{},{userAgent:r}=xe.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),Od=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:"LinkedErrors",preprocessEvent(r,i,s){const a=s.getOptions();_u(mi,a.stackParser,a.maxValueLength,n,e,r,i)}}};var yo="new",vo="loading",bo="loaded",ki="joining-meeting",Jt="joined-meeting",Vt="left-meeting",Pt="error",Ei="unknown",Md="full",Ad="base",_o="no-room",Pd="end-of-life",xd="connection-error",Ld="iframe-ready-for-launch-config",jd="iframe-launch-config",Rd="theme-updated",Dd="loading",Id="load-attempt-failed",wo="loaded",Nd="started-camera",Fd="camera-error",Bd="joining-meeting",Ud="joined-meeting",$d="left-meeting",qd="participant-joined",Jd="participant-updated",Vd="participant-left",zd="participant-counts-updated",Wd="access-state-updated",Hd="meeting-session-summary-updated",Gd="meeting-session-state-updated",Kd="waiting-participant-added",Yd="waiting-participant-updated",Qd="waiting-participant-removed",Xd="track-started",Zd="track-stopped",ef="transcription-started",tf="transcription-stopped",nf="transcription-error",So="recording-started",ko="recording-stopped",rf="recording-stats",sf="recording-error",af="recording-upload-completed",of="recording-data",cf="app-message",lf="transcription-message",uf="remote-media-player-started",df="remote-media-player-updated",ff="remote-media-player-stopped",hf="local-screen-share-started",pf="local-screen-share-stopped",mf="local-screen-share-canceled",gf="active-speaker-change",yf="active-speaker-mode-change",vf="network-quality-change",bf="network-connection",_f="cpu-load-change",wf="face-counts-updated",ur="fullscreen",dr="exited-fullscreen",Sf="live-streaming-started",kf="live-streaming-updated",Ef="live-streaming-stopped",Cf="live-streaming-error",Tf="lang-updated",Of="receive-settings-updated",Mf="input-settings-updated",Eo="nonfatal-error",Co="error",Ci=4096,To=102400,Ti="iframe-call-message",Oo="local-screen-start",Mo="daily-method-update-live-streaming-endpoints",fr="transmit-log",An="daily-custom-track",hr={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Ao={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},Oi={PLAY:"play",PAUSE:"pause"},Mi=["jpg","png","jpeg"],Af="add-endpoints",Pf="remove-endpoints",Po="sip-call-transfer";function Ke(){return!le()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function le(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function xo(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function xf(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(xt(),Pn())||le())}function Lo(){if(le()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var Lf=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function jo(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!le()&&!!Lf&&(t?function(){return No()?!1:["Chrome","Firefox"].includes(xt())}():function(){if(No())return!1;var e=xt();if(e==="Safari"){var n=Pi();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?Ai().major>=77:e==="Firefox"?xi().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function Ro(){if(le()||Io()||typeof AudioWorkletNode>"u")return!1;switch(xt()){case"Chrome":case"Firefox":return!0;case"Safari":return Pn().major>=17&&Pn().minor>=4}return!1}function Do(){return xo()&&!function(){var t,e=xt();if(!Ke())return!0;switch(e){case"Chrome":return(t=Ai()).major&&t.major>0&&t.major<75;case"Firefox":return(t=xi()).major<91;case"Safari":return(t=Pi()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function Io(){return Ke().match(/Linux; Android/)}function No(){var t,e,n=Ke(),r=n.match(/Mac/)&&(!le()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!Ke().match(/DailyAnd\//)||void 0}function xt(){if(typeof window<"u"){var t=Ke();return Fo()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1||Bo()?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function Pn(){switch(xt()){case"Chrome":return Ai();case"Safari":return Pi();case"Firefox":return xi();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=Ke().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function Ai(){var t=0,e=0,n=0,r=0,i=!1;if(typeof window<"u"){var s=Ke(),a=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{t=parseInt(a[1]),e=parseInt(a[2]),n=parseInt(a[3]),r=parseInt(a[4]),i=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:i}}function Fo(){return!!Ke().match(/iPad|iPhone|iPod/i)&&xo()}function Bo(){return Ke().indexOf("AppleWebKit/605.1.15")>-1}function Pi(){var t=0,e=0,n=0;if(typeof window<"u"){var r=Ke().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else(Fo()||Bo())&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function xi(){var t=0,e=0;if(typeof window<"u"){var n=Ke().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var Uo=function(){function t(){Xe(this,t)}return Ze(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){Sn()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){Sn()}},{key:"sendMessageToCallMachine",value:function(e,n,r,i){Sn()}},{key:"sendMessageToDailyJs",value:function(e,n){Sn()}},{key:"removeListener",value:function(e){Sn()}}]),t}();function $o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$o(Object(n),!0).forEach(function(r){gt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jf(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qn(this,n)}}var Rf=function(){$n(e,Uo);var t=jf(e);function e(){var n;return Xe(this,e),(n=t.call(this))._wrappedListeners={},n._messageCallbacks={},n}return Ze(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,i){var s=this,a=function(c){if(c.data&&c.data.what==="iframe-call-message"&&(!c.data.callClientId||c.data.callClientId===r)&&(!c.data.from||c.data.from!=="module")){var l=Li({},c.data);if(delete l.from,l.callbackStamp&&s._messageCallbacks[l.callbackStamp]){var u=l.callbackStamp;s._messageCallbacks[u].call(i,l),delete s._messageCallbacks[u]}delete l.what,delete l.callbackStamp,n.call(i,l)}};this._wrappedListeners[n]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,i){var s=function(a){var c;if(!(!a.data||a.data.what!==Ti||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callClientId&&r&&a.data.callClientId!==r||a!=null&&(c=a.data)!==null&&c!==void 0&&c.callFrameId)){var l=a.data;n.call(i,l)}};this._wrappedListeners[n]=s,window.addEventListener("message",s)}},{key:"sendMessageToCallMachine",value:function(n,r,i,s){if(!i)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var a=Li({},n);if(a.what=Ti,a.from="module",a.callClientId=i,r){var c=Vn();this._messageCallbacks[c]=r,a.callbackStamp=c}var l=s?s.contentWindow:window,u=this._callMachineTargetOrigin(s);u&&l.postMessage(a,u)}},{key:"sendMessageToDailyJs",value:function(n,r){n.what=Ti,n.callClientId=r,n.from="embedded",window.postMessage(n,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"forwardPackagedMessageToCallMachine",value:function(n,r,i){var s=Li({},n);s.callClientId=i;var a=r?r.contentWindow:window,c=this._callMachineTargetOrigin(r);c&&a.postMessage(s,c)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(n,r){var i=function(s){if(s.data&&s.data.what==="iframe-call-message"&&(!s.data.callClientId||s.data.callClientId===r)&&(!s.data.from||s.data.from!=="module")){var a=s.data;n(a)}};return this._wrappedListeners[n]=i,window.addEventListener("message",i),n}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(n){var r=this._wrappedListeners[n];r&&(window.removeEventListener("message",r),delete this._wrappedListeners[n])}},{key:"_callMachineTargetOrigin",value:function(n){return n?n.src?new URL(n.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),e}();function qo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Df(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qn(this,n)}}var If=function(){$n(e,Uo);var t=Df(e);function e(){var n;return Xe(this,e),n=t.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new yt.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new yt.EventEmitter,n._wrappedListeners={},n._messageCallbacks={},n}return Ze(e,[{key:"addListenerForMessagesFromCallMachine",value:function(n,r,i){this._addListener(n,global.callMachineToDailyJsEmitter,r,i,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(n,r,i){this._addListener(n,global.dailyJsToCallMachineEmitter,r,i,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(n,r,i){this._sendMessage(n,global.dailyJsToCallMachineEmitter,i,r,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(n,r){this._sendMessage(n,global.callMachineToDailyJsEmitter,r,null,"sending message to daily-js")}},{key:"removeListener",value:function(n){var r=this._wrappedListeners[n];r&&(global.callMachineToDailyJsEmitter.removeListener("message",r),global.dailyJsToCallMachineEmitter.removeListener("message",r),delete this._wrappedListeners[n])}},{key:"_addListener",value:function(n,r,i,s,a){var c=this,l=function(u){if(u.callClientId===i){if(u.callbackStamp&&c._messageCallbacks[u.callbackStamp]){var d=u.callbackStamp;c._messageCallbacks[d].call(s,u),delete c._messageCallbacks[d]}n.call(s,u)}};this._wrappedListeners[n]=l,r.addListener("message",l)}},{key:"_sendMessage",value:function(n,r,i,s,a){var c=function(u){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?arguments[d]:{};d%2?qo(Object(p),!0).forEach(function(w){gt(u,w,p[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(p)):qo(Object(p)).forEach(function(w){Object.defineProperty(u,w,Object.getOwnPropertyDescriptor(p,w))})}return u}({},n);if(c.callClientId=i,s){var l=Vn();this._messageCallbacks[l]=s,c.callbackStamp=l}r.emit("message",c)}}]),e}(),ji="replace",Ri="shallow-merge",Jo=[ji,Ri],Nf=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,i=r===void 0?ji:r;Xe(this,t),t._validateMergeStrategy(i),t._validateData(n,i),this.mergeStrategy=i,this.data=n}return Ze(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===Ri}},{key:"_validateMergeStrategy",value:function(e){if(!Jo.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Jo,"]"))}},{key:"_validateData",value:function(e,n){if(!function(c){if(c==null||de(c)!=="object")return!1;var l=Object.getPrototypeOf(c);return l==null||l===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===ji){var i=JSON.parse(r);Ie(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(n===Ri){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var a=JSON.parse(JSON.stringify(e[s]));Ie(e[s],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,e[s])}}}catch(c){throw Error("Meeting session data must be serializable to JSON: ".concat(c))}if(r.length>To)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(To,"."))}}]),t}();function Di(t,e,n){return Di=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,i,s){var a=[null];a.push.apply(a,i);var c=new(Function.bind.apply(r,a));return s&&wn(c,s.prototype),c},Di.apply(null,arguments)}function Ii(t){var e=typeof Map=="function"?new Map:void 0;return Ii=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Di(n,arguments,et(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),wn(i,n)},Ii(t)}function Ff(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qn(this,n)}}function Vo(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var Bf=function(){function t(e){Xe(this,t),this._currentLoad=null,this._callClientId=e}return Ze(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void i(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Uf(r,function(){i(!1)},function(a,c){c||Vo(n._callClientId),s(a,c)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Vo(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),Uf=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;Xe(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return Ze(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new zo(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new zo(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),Ni=function(){$n(e,Ii(Error));var t=Ff(e);function e(){return Xe(this,e),t.apply(this,arguments)}return Ze(e)}(),pr=2e4,zo=function(){function t(n,r,i){Xe(this,t),this._loadAttemptImpl=le()||!n.avoidEval?new $f(n,r,i):new qf(n,r,i)}var e;return Ze(t,[{key:"start",value:(e=K(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),$f=function(){function t(s,a,c){Xe(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=a,this._failureCallback=c}var e,n,r,i;return Ze(t,[{key:"start",value:(i=K(function*(){var s=zn(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=K(function*(s){if(!this._iosCache)return!1;try{var a=yield this._iosCache.get(s);return!!this.cancelled||!!a&&(a.code?(Function('"use strict";'+a.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=a.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=K(function*(s){var a=this;this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback({msg:"Timed out (>".concat(pr," ms) when loading call object bundle ").concat(s),type:"timeout"})},pr);try{var c=this._refetchHeaders?{headers:this._refetchHeaders}:{},l=yield fetch(s,c);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new Ni;var u=yield this._getBundleCodeFromResponse(s,l);if(this.cancelled)throw new Ni;Function('"use strict";'+u)(),this._iosCache&&this._iosCache.set(s,u,l.headers),this.succeeded=!0,this._successCallback()}catch(d){if(clearTimeout(this._networkTimeout),d instanceof Ni||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(d),type:d.message})}}),function(s){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=K(function*(s,a){if(a.ok)return yield a.text();if(this._iosCache&&a.status===304)return(yield this._iosCache.renew(s,a.headers)).code;throw new Error("Received ".concat(a.status," response"))}),function(s,a){return e.apply(this,arguments)})}]),t}(),qf=function(){function t(e,n,r){Xe(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=Vn(),this._networkTimeout=null,this._scriptElement=null}return Ze(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=zn(this._dailyConfig);(typeof document>"u"?"undefined":de(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(pr," ms) when loading call object bundle ").concat(e),type:"timeout"})},pr);var r=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},i.onerror=function(s){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},i.src=e,r.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),mr=function(t,e,n){return Vf(t.local,e,n)===!0},Jf=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},dn=function(t,e,n,r){var i=zf(t,e,n,r);return i&&i.pendingTrack},Vf=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},i=t.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?r(i[e].custom):r(i[e].custom[n]):r(i[e][n]):!i||r(i.ALL)},zf=function(t,e,n,r){var i=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,a){return new Date(a.starttime)-new Date(s.starttime)});return i&&i[0]},Wf=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function Wo(t,e){for(var n=e.getState(),r=0,i=["cam","screen"];r<i.length;r++)for(var s=i[r],a=0,c=["video","audio"];a<c.length;a++){var l=c[a],u=s==="cam"?l:"screen".concat(l.charAt(0).toUpperCase()+l.slice(1)),d=t.tracks[u];if(d){var p=t.local?Jf(n,s,l):dn(n,t.session_id,s,l);d.state==="playable"&&(d.track=p),d.persistentTrack=p}}}function Ho(t,e){try{var n=e.getState();for(var r in t.tracks)if(!Hf(r)){var i=t.tracks[r].kind;if(i){var s=t.tracks[r];if(s){var a=t.local?Wf(n,r):dn(n,t.session_id,r,i);s.state==="playable"&&(t.tracks[r].track=a),s.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(c){console.error(c)}}function Hf(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function Go(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var i=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(i=!1)}catch(d){console.error(d)}if(!i)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&mr(r,t.session_id,"cam-audio")){var a=dn(r,t.session_id,"cam","audio");a&&(e&&e.audioTrack&&e.audioTrack.id===a.id?t.audioTrack=a:a.muted||(t.audioTrack=a)),t.audioTrack||(t.audio=!1)}if(t.video&&mr(r,t.session_id,"cam-video")){var c=dn(r,t.session_id,"cam","video");c&&(e&&e.videoTrack&&e.videoTrack.id===c.id?t.videoTrack=c:c.muted||(t.videoTrack=c)),t.videoTrack||(t.video=!1)}if(t.screen&&mr(r,t.session_id,"screen-audio")){var l=dn(r,t.session_id,"screen","audio");l&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===l.id?t.screenAudioTrack=l:l.muted||(t.screenAudioTrack=l))}if(t.screen&&mr(r,t.session_id,"screen-video")){var u=dn(r,t.session_id,"screen","video");u&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===u.id?t.screenVideoTrack=u:u.muted||(t.screenVideoTrack=u))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(d){console.error("unexpected error matching up tracks",d)}}}function Gf(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return Ko(l,u);var d=Object.prototype.toString.call(l).slice(8,-1);if(d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set")return Array.from(l);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Ko(l,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){c=!0,s=l},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw s}}}}function Ko(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var lt=new Map,fn=null;function Kf(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return Yo(l,u);var d=Object.prototype.toString.call(l).slice(8,-1);if(d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set")return Array.from(l);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Yo(l,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){c=!0,s=l},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw s}}}}function Yo(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ut=new Map,xn=null;function Yf(t){Qo()?function(e){lt.has(e)||(lt.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){lt.has(e)&&(lt.get(e).lastDevicesString=JSON.stringify(n),fn||(fn=function(){var r=K(function*(){var i,s=yield navigator.mediaDevices.enumerateDevices(),a=Gf(lt.keys());try{for(a.s();!(i=a.n()).done;){var c=i.value,l=JSON.stringify(s);l!==lt.get(c).lastDevicesString&&(lt.get(c).lastDevicesString=l,c(s))}}catch(u){a.e(u)}finally{a.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",fn)))}).catch(function(){}))}(t):function(e){ut.has(e)||(ut.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){ut.has(e)&&(ut.get(e).lastDevicesString=JSON.stringify(n),xn||(xn=setInterval(K(function*(){var r,i=yield navigator.mediaDevices.enumerateDevices(),s=Kf(ut.keys());try{for(s.s();!(r=s.n()).done;){var a=r.value,c=JSON.stringify(i);c!==ut.get(a).lastDevicesString&&(ut.get(a).lastDevicesString=c,a(i))}}catch(l){s.e(l)}finally{s.f()}}),3e3)))}))}(t)}function Qf(t){Qo()?function(e){lt.has(e)&&(lt.delete(e),lt.size===0&&fn&&(navigator.mediaDevices.removeEventListener("devicechange",fn),fn=null))}(t):function(e){ut.has(e)&&(ut.delete(e),ut.size===0&&xn&&(clearInterval(xn),xn=null))}(t)}function Qo(){return le()||navigator.mediaDevices.ondevicechange!==void 0}var Xf=new Set;function Zf(t,e){var n=e.isLocalScreenVideo;return t&&t.readyState==="live"&&!function(r,i){return(!i.isLocalScreenVideo||xt()!=="Chrome")&&r.muted&&!Xf.has(r.id)}(t,{isLocalScreenVideo:n})}var eh=["result"],th=["preserveIframe"];function Xo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xo(Object(n),!0).forEach(function(r){gt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nh(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qn(this,n)}}function Zo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(l,u){if(l){if(typeof l=="string")return ec(l,u);var d=Object.prototype.toString.call(l).slice(8,-1);if(d==="Object"&&l.constructor&&(d=l.constructor.name),d==="Map"||d==="Set")return Array.from(l);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return ec(l,u)}}(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return a=l.done,l},e:function(l){c=!0,s=l},f:function(){try{a||n.return==null||n.return()}finally{if(c)throw s}}}}function ec(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zt={},tc="video",rh="voice",nc=le()?{data:{}}:{data:{},topology:"none"},rc={present:0,hidden:0},ic={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},Fi=Object.keys(ic),sc=["state","volume","simulcastEncodings"],ac={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},gr={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},Bi={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Wt={customIntegrations:{validate:mc,help:hc()},customTrayButtons:{validate:pc,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(gr))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return gc(t,ac)},help:"reactNativeConfig should look like ".concat(JSON.stringify(ac),", all fields optional")},lang:{validate:function(t){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return cc(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.videoDeviceId=t),e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.audioDeviceId=t),e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var i=0,s=Object.keys(r);i<s.length;i++){var a=s[i];if(!e.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(r[a],'"')),!1}return!0};return de(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return lc(t,{allowAllParticipantsKey:!1})},help:fc({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!uc(t)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),dc(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig),t.audio&&(e._preloadCache.inputSettings.audio=t.audio),t.video&&(e._preloadCache.inputSettings.video=t.video),!0)},help:qi()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},yr={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!le()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(s){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var c in s)if(c==="custom"){if(!n.includes(s[c])&&!i(s[c],!0))return!1}else{var l=!a&&!r.includes(c),u=!n.includes(s[c]);if(l||u)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(le()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Rt(n[e],2),i=r[0],s=r[1];switch(i){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var a,c=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],l=Zo(s);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(!c.includes(u))return!1}}catch(y){l.e(y)}finally{l.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var d,p=["participants","streaming","transcription"],w=Zo(s);try{for(w.s();!(d=w.n()).done;){var b=d.value;if(!p.includes(b))return!1}}catch(y){w.e(y)}finally{w.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=K(function*(e){return new Promise(function(n,r){var i=[];e.forEach(function(s){return Promise.resolve(s).then(function(a){n(a)}).catch(function(a){i.push(a),i.length===e.length&&r(i)})})})});return function(e){return t.apply(this,arguments)}}());var oc=function(){$n(ke,yt);var t,e,n,r,i,s,a,c,l,u,d,p,w,b,y,_,S,O,A,N,E,k,M,D,F,z,L,j,P,I,U,B,$,W,ne,he,te,_e,Ue=nh(ke);function ke(o){var h,f,v,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Xe(this,ke),gt(mt(f=Ue.call(this)),"startListeningForDeviceChanges",function(){Yf(f.handleDeviceChange)}),gt(mt(f),"stopListeningForDeviceChanges",function(){Qf(f.handleDeviceChange)}),gt(mt(f),"handleDeviceChange",function(q){q=q.map(function(H){return JSON.parse(JSON.stringify(H))}),f.emitDailyJSEvent({action:"available-devices-updated",availableDevices:q})}),gt(mt(f),"handleNativeAppStateChange",function(){var q=K(function*(H){if(H==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield f.destroy());var re=H==="active";f.disableReactNativeAutoDeviceManagement("video")||(re?f.camUnmutedBeforeLosingNativeActiveState&&f.setLocalVideo(!0):(f.camUnmutedBeforeLosingNativeActiveState=f.localVideo(),f.camUnmutedBeforeLosingNativeActiveState&&f.setLocalVideo(!1)))});return function(H){return q.apply(this,arguments)}}()),gt(mt(f),"handleNativeAudioFocusChange",function(q){f.disableReactNativeAutoDeviceManagement("audio")||(f._hasNativeAudioFocus=q,f.toggleParticipantAudioBasedOnNativeAudioFocus(),f._hasNativeAudioFocus?f.micUnmutedBeforeLosingNativeAudioFocus&&f.setLocalAudio(!0):(f.micUnmutedBeforeLosingNativeAudioFocus=f.localAudio(),f.setLocalAudio(!1)))}),gt(mt(f),"handleNativeSystemScreenCaptureStop",function(){f.stopScreenShare()}),f.strictMode=m.strictMode===void 0||m.strictMode,f.allowMultipleCallInstances=(h=m.allowMultipleCallInstances)!==null&&h!==void 0&&h,Object.keys(zt).length&&(f._logDuplicateInstanceAttempt(),!f.allowMultipleCallInstances)){if(f.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),f.callClientId=Vn(),v=mt(f),zt[v.callClientId]=v,window._daily.instances[f.callClientId]={},f._sharedTracks={},window._daily.instances[f.callClientId].tracks=f._sharedTracks,m.dailyJsVersion=ke.version(),f._iframe=o,f._callObjectMode=m.layout==="none"&&!f._iframe,f._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},m.showLocalVideo!==void 0?f._callObjectMode?console.error("showLocalVideo is not available in call object mode"):f._showLocalVideo=!!m.showLocalVideo:f._showLocalVideo=!0,m.showParticipantsBar!==void 0?f._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):f._showParticipantsBar=!!m.showParticipantsBar:f._showParticipantsBar=!0,m.customIntegrations!==void 0?f._callObjectMode?console.error("customIntegrations is not available in call object mode"):f._customIntegrations=m.customIntegrations:f._customIntegrations={},m.customTrayButtons!==void 0?f._callObjectMode?console.error("customTrayButtons is not available in call object mode"):f._customTrayButtons=m.customTrayButtons:f._customTrayButtons={},m.activeSpeakerMode!==void 0?f._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):f._activeSpeakerMode=!!m.activeSpeakerMode:f._activeSpeakerMode=!1,m.receiveSettings?f._callObjectMode?f._receiveSettings=m.receiveSettings:console.error("receiveSettings is only available in call object mode"):f._receiveSettings={},f.validateProperties(m),f.properties=Q({},m),f._preloadCache.inputSettings||(f._preloadCache.inputSettings={}),m.inputSettings&&m.inputSettings.audio&&(f._preloadCache.inputSettings.audio=m.inputSettings.audio),m.inputSettings&&m.inputSettings.video&&(f._preloadCache.inputSettings.video=m.inputSettings.video),f._callObjectLoader=f._callObjectMode?new Bf(f.callClientId):null,f._callState=yo,f._isPreparingToJoin=!1,f._accessState={access:Ei},f._meetingSessionSummary={},f._finalSummaryOfPrevSession={},f._meetingSessionState=Ji(nc,f._callObjectMode),f._nativeInCallAudioMode=tc,f._participants={},f._isScreenSharing=!1,f._participantCounts=rc,f._rmpPlayerState={},f._waitingParticipants={},f._network={threshold:"good",quality:100},f._activeSpeaker={},f._localAudioLevel=0,f._isLocalAudioLevelObserverRunning=!1,f._remoteParticipantsAudioLevel={},f._isRemoteParticipantsAudioLevelObserverRunning=!1,f._maxAppMessageSize=Ci,f._messageChannel=le()?new If:new Rf,f._iframe&&(f._iframe.requestFullscreen?f._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===f._iframe?(f.emitDailyJSEvent({action:ur}),f.sendMessageToCallMachine({action:ur})):(f.emitDailyJSEvent({action:dr}),f.sendMessageToCallMachine({action:dr}))}):f._iframe.webkitRequestFullscreen&&f._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===f._iframe?(f.emitDailyJSEvent({action:ur}),f.sendMessageToCallMachine({action:ur})):(f.emitDailyJSEvent({action:dr}),f.sendMessageToCallMachine({action:dr}))})),le()){var T=f.nativeUtils();T.addAudioFocusChangeListener&&T.removeAudioFocusChangeListener&&T.addAppStateChangeListener&&T.removeAppStateChangeListener&&T.addSystemScreenCaptureStopListener&&T.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),f._hasNativeAudioFocus=!0,T.addAudioFocusChangeListener(f.handleNativeAudioFocusChange),T.addAppStateChangeListener(f.handleNativeAppStateChange),T.addSystemScreenCaptureStopListener(f.handleNativeSystemScreenCaptureStop)}return f._callObjectMode&&f.startListeningForDeviceChanges(),f._messageChannel.addListenerForMessagesFromCallMachine(f.handleMessageFromCallMachine,f.callClientId,mt(f)),f}return Ze(ke,[{key:"destroy",value:(_e=K(function*(){var o,h;try{yield this.leave()}catch{}var f=this._iframe;if(f){var v=f.parentElement;v&&v.removeChild(f)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),le()){var m=this.nativeUtils();m.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),m.removeAppStateChangeListener(this.handleNativeAppStateChange),m.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete zt[this.callClientId],!((o=window)===null||o===void 0||(h=o._daily)===null||h===void 0)&&h.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return _e.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(o){var h=o.bodyClass,f=o.cssFile,v=o.cssText;return se(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(f),bodyClass:h,cssText:v}),this}},{key:"iframe",value:function(){return se(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return it(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return it(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(o,h){for(var f in h){if(!yr[f])throw new Error("unrecognized updateParticipant property ".concat(f));if(yr[f].validate&&!yr[f].validate(h[f],this,this._participants[o]))throw new Error(yr[f].help)}}},{key:"updateParticipant",value:function(o,h){return this._participants.local&&this._participants.local.session_id===o&&(o="local"),o&&h&&(this.validateParticipantProperties(o,h),this.sendMessageToCallMachine({action:"update-participant",id:o,properties:h})),this}},{key:"updateParticipants",value:function(o){var h=this._participants.local&&this._participants.local.session_id;for(var f in o)f===h&&(f="local"),f&&o[f]&&this.validateParticipantProperties(f,o[f]);return this.sendMessageToCallMachine({action:"update-participants",participants:o}),this}},{key:"updateWaitingParticipant",value:(te=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(it(this._callObjectMode,"updateWaitingParticipant()"),ge(this._callState,"updateWaitingParticipant()"),typeof h!="string"||de(f)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(v,m){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:h,updates:f},function(T){T.error&&m(T.error),T.id||m(new Error("unknown error in updateWaitingParticipant()")),v({id:T.id})})})}),function(){return te.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(he=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(it(this._callObjectMode,"updateWaitingParticipants()"),ge(this._callState,"updateWaitingParticipants()"),de(h)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(f,v){o.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:h},function(m){m.error&&v(m.error),m.ids||v(new Error("unknown error in updateWaitingParticipants()")),f({ids:m.ids})})})}),function(){return he.apply(this,arguments)})},{key:"requestAccess",value:(ne=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=h.access,v=f===void 0?{level:Md}:f,m=h.name,T=m===void 0?"":m;return it(this._callObjectMode,"requestAccess()"),ge(this._callState,"requestAccess()"),new Promise(function(q,H){o.sendMessageToCallMachine({action:"daily-method-request-access",access:v,name:T},function(re){re.error&&H(re.error),re.access||H(new Error("unknown error in requestAccess()")),q({access:re.access,granted:re.granted})})})}),function(){return ne.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in h&&(le()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),h={}):o&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),h={})),this.sendMessageToCallMachine({action:"local-audio",state:o,options:h}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(o){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:o}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(o){return this.sendMessageToCallMachine({action:"local-video",state:o}),this}},{key:"getReceiveSettings",value:(W=K(function*(o){var h=this,f=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,v=f!==void 0&&f;if(it(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(de(o)){case"string":return new Promise(function(m){h.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:o,showInheritedValues:v},function(T){m(T.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(o){return W.apply(this,arguments)})},{key:"updateReceiveSettings",value:($=K(function*(o){var h=this;if(it(this._callObjectMode,"updateReceiveSettings()"),!lc(o,{allowAllParticipantsKey:!0}))throw new Error(fc({allowAllParticipantsKey:!0}));return ge(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(f){h.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:o},function(v){f({receiveSettings:v.receiveSettings})})})}),function(o){return $.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(o){var h,f,v,m,T,q,H,re;if(o){var Oe={},we=((h=o.audio)===null||h===void 0||(f=h.processor)===null||f===void 0?void 0:f.type)==="none"&&((v=o.audio)===null||v===void 0||(m=v.processor)===null||m===void 0?void 0:m._isDefaultWhenNone);if(o.audio&&!we){var $e=Q({},o.audio.processor);delete $e._isDefaultWhenNone,Oe.audio=Q(Q({},o.audio),{},{processor:$e})}var qe=((T=o.video)===null||T===void 0||(q=T.processor)===null||q===void 0?void 0:q.type)==="none"&&((H=o.video)===null||H===void 0||(re=H.processor)===null||re===void 0?void 0:re._isDefaultWhenNone);if(o.video&&!qe){var Ye=Q({},o.video.processor);delete Ye._isDefaultWhenNone,Oe.video=Q(Q({},o.video),{},{processor:Ye})}return Oe}}},{key:"getInputSettings",value:function(){var o=this;return se(),new Promise(function(h){h(o._getInputSettings())})}},{key:"_getInputSettings",value:function(){var o,h,f,v,m,T,q,H,re={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(o=((f=this._inputSettings)===null||f===void 0?void 0:f.video)||re,h=((v=this._inputSettings)===null||v===void 0?void 0:v.audio)||re):(o=((m=this._preloadCache)===null||m===void 0||(T=m.inputSettings)===null||T===void 0?void 0:T.video)||re,h=((q=this._preloadCache)===null||q===void 0||(H=q.inputSettings)===null||H===void 0?void 0:H.audio)||re);var Oe={audio:h,video:o};return this._prepInputSettingsToPresentToUser(Oe)}},{key:"updateInputSettings",value:(B=K(function*(o){var h=this;return se(),uc(o)?(o&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),dc(o,this.properties.dailyConfig),o.audio&&(this._preloadCache.inputSettings.audio=o.audio),o.video&&(this._preloadCache.inputSettings.video=o.video)),o.video||o.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise(function(f,v){h.sendMessageToCallMachine({action:"update-input-settings",inputSettings:o},function(m){m.error?v(m.error):f({inputSettings:h._prepInputSettingsToPresentToUser(m.inputSettings)})})}):this._getInputSettings()):(console.error(qi()),Promise.reject(qi()))}),function(o){return B.apply(this,arguments)})},{key:"setBandwidth",value:function(o){var h=o.kbs,f=o.trackConstraints;if(se(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:h,trackConstraints:f}),this}},{key:"getDailyLang",value:function(){var o=this;if(se(),this._callMachineInitialized)return new Promise(function(h){o.sendMessageToCallMachine({action:"get-daily-lang"},function(f){delete f.action,delete f.callbackStamp,h(f)})})}},{key:"setDailyLang",value:function(o){return se(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:o}),this}},{key:"setProxyUrl",value:function(o){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:o}),this}},{key:"setIceConfig",value:function(o){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:o}),this}},{key:"meetingSessionSummary",value:function(){return[Vt,Pt].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(U=K(function*(){var o=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),ge(this._callState,"getMeetingSession()"),new Promise(function(h){o.sendMessageToCallMachine({action:"get-meeting-session"},function(f){delete f.action,delete f.callbackStamp,h(f)})})}),function(){return U.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return ge(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";it(this._callObjectMode,"setMeetingSessionData()"),ge(this._callState,"setMeetingSessionData");try{(function(f,v){new Nf({data:f,mergeStrategy:v})})(o,h)}catch(f){throw console.error(f),f}try{this.sendMessageToCallMachine({action:"set-session-data",data:o,mergeStrategy:h})}catch(f){throw new Error("Error setting meeting session data: ".concat(f))}}},{key:"setUserName",value:function(o,h){var f=this;return this.properties.userName=o,new Promise(function(v){f.sendMessageToCallMachine({action:"set-user-name",name:o??"",thisMeetingOnly:le()||!!h&&!!h.thisMeetingOnly},function(m){delete m.action,delete m.callbackStamp,v(m)})})}},{key:"setUserData",value:(I=K(function*(o){var h=this;try{cc(o)}catch(f){throw console.error(f),f}if(this.properties.userData=o,this._callMachineInitialized)return new Promise(function(f){try{h.sendMessageToCallMachine({action:"set-user-data",userData:o},function(v){delete v.action,delete v.callbackStamp,f(v)})}catch(v){throw new Error("Error setting user data: ".concat(v))}})}),function(o){return I.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(o){if(o&&(o<100||typeof o!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(o){var h=this;if(typeof AudioWorkletNode>"u"&&!le())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(f,v){h.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:o},function(m){h._isLocalAudioLevelObserverRunning=!m.error,m.error?v({error:m.error}):f()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:o}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(o){var h=this;if(this.validateAudioLevelInterval(o),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(f,v){h.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:o},function(m){h._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?v({error:m.error}):f()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:o}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(P=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(it(this._callObjectMode,"startCamera()"),Ui(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(h)}catch(f){return Promise.reject(f)}else{if(this._didPreAuth){if(h.url&&h.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(h.token&&h.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(h),this.properties=Q(Q({},this.properties),h)}return new Promise(function(f){o.sendMessageToCallMachine({action:"start-camera",properties:hn(o.properties,o.callClientId),preloadCache:hn(o._preloadCache,o.callClientId)},function(v){delete v.action,delete v.callbackStamp,f(v)})})}),function(){return P.apply(this,arguments)})},{key:"validateCustomTrack",value:function(o,h,f){if(f&&f.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(h&&h!=="music"&&h!=="speech"&&!(h instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(f&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(f))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(o instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return se(),ge(this._callState,"startCustomTrack()"),this.validateCustomTrack(h.track,h.mode,h.trackName),new Promise(function(f,v){o._sharedTracks.customTrack=h.track,h.track=An,o.sendMessageToCallMachine({action:"start-custom-track",properties:h},function(m){m.error?v({error:m.error}):f(m.mediaTag)})})}},{key:"stopCustomTrack",value:function(o){var h=this;return se(),ge(this._callState,"stopCustomTrack()"),new Promise(function(f){h.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:o},function(v){f(v.mediaTag)})})}},{key:"setCamera",value:function(o){var h=this;return Ln(),br(this._callMachineInitialized,"setCamera()"),new Promise(function(f){h.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:o},function(v){f({device:v.device})})})}},{key:"setAudioDevice",value:(j=K(function*(o){return Ln(),this.nativeUtils().setAudioDevice(o),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(o){return j.apply(this,arguments)})},{key:"cycleCamera",value:function(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(f){o.sendMessageToCallMachine({action:"cycle-camera",properties:h},function(v){f({device:v.device})})})}},{key:"cycleMic",value:function(){var o=this;return se(),new Promise(function(h){o.sendMessageToCallMachine({action:"cycle-mic"},function(f){h({device:f.device})})})}},{key:"getCameraFacingMode",value:function(){var o=this;return Ln(),new Promise(function(h){o.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(f){h(f.facingMode)})})}},{key:"setInputDevicesAsync",value:(L=K(function*(o){var h=this,f=o.audioDeviceId,v=o.videoDeviceId,m=o.audioSource,T=o.videoSource;return se(),m!==void 0&&(f=m),T!==void 0&&(v=T),f&&(this._preloadCache.audioDeviceId=f,this._sharedTracks.audioDeviceId=f),v&&(this._preloadCache.videoDeviceId=v,this._sharedTracks.videoDeviceId=v),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(f instanceof MediaStreamTrack&&(f=An),v instanceof MediaStreamTrack&&(v=An),new Promise(function(q){h.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:f,videoDeviceId:v},function(H){delete H.action,delete H.callbackStamp,H.returnPreloadCache?q({camera:{deviceId:h._preloadCache.videoDeviceId},mic:{deviceId:h._preloadCache.audioDeviceId},speaker:{deviceId:h._preloadCache.outputDeviceId}}):q(H)})}))}),function(o){return L.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(z=K(function*(o){var h=this,f=o.outputDeviceId;return se(),f&&(this._preloadCache.outputDeviceId=f),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(v){h.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:f},function(m){delete m.action,delete m.callbackStamp,m.returnPreloadCache?v({camera:{deviceId:h._preloadCache.videoDeviceId},mic:{deviceId:h._preloadCache.audioDeviceId},speaker:{deviceId:h._preloadCache.outputDeviceId}}):v(m)})})}),function(o){return z.apply(this,arguments)})},{key:"getInputDevices",value:(F=K(function*(){var o=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(h){o.sendMessageToCallMachine({action:"get-input-devices"},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?h({camera:{deviceId:o._preloadCache.videoDeviceId},mic:{deviceId:o._preloadCache.audioDeviceId},speaker:{deviceId:o._preloadCache.outputDeviceId}}):h(f)})})}),function(){return F.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Ln(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(o){if(Ln(),[tc,rh].includes(o)){if(o!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=o,!this.disableReactNativeAutoDeviceManagement("audio")&&vr(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",o)}},{key:"preAuth",value:(D=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(it(this._callObjectMode,"preAuth()"),Ui(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(h)),!h.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(h),this.properties=Q(Q({},this.properties),h),new Promise(function(f,v){o.sendMessageToCallMachine({action:"daily-method-preauth",properties:hn(o.properties,o.callClientId),preloadCache:hn(o._preloadCache,o.callClientId)},function(m){return m.error?v(m.error):m.access?(o._didPreAuth=!0,void f({access:m.access})):v(new Error("unknown error in preAuth()"))})})}),function(){return D.apply(this,arguments)})},{key:"load",value:(M=K(function*(o){var h=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(o&&(this.validateProperties(o),this.properties=Q(Q({},this.properties),o)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(vo),this.emitDailyJSEvent({action:Dd}),this._callObjectMode?new Promise(function(f,v){h._callObjectLoader.cancel();var m=Date.now();h._callObjectLoader.load(h.properties.dailyConfig,function(T){h._bundleLoadTime=T?"no-op":Date.now()-m,h._updateCallState(bo),T&&h.emitDailyJSEvent({action:wo}),f()},function(T,q){if(h.emitDailyJSEvent({action:Id}),!q){h._updateCallState(Pt),h.resetMeetingDependentVars();var H={action:Co,errorMsg:T.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:T,bundleUrl:zn(h.properties.dailyConfig)}}};h._maybeSendToSentry(H),h.emitDailyJSEvent(H),v(T.msg)}})}):(this._iframe.src=ca(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(f,v){h._loadedCallback=function(m){h._callState!==Pt?(h._updateCallState(bo),(h.properties.cssFile||h.properties.cssText)&&h.loadCss(h.properties),f()):v(m)}}))}}),function(o){return M.apply(this,arguments)})},{key:"join",value:(k=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var f=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(h)}catch(v){return this.updateIsPreparingToJoin(!1),Promise.reject(v)}}else{if(f=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(h.url&&h.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(h.token&&h.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(h.url&&!this._callObjectMode&&h.url&&h.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(h.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(h),this.properties=Q(Q({},this.properties),h)}return h.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!h.showLocalVideo),h.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!h.showParticipantsBar),this._callState===Jt||this._callState===ki?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(ki,!1),this.emitDailyJSEvent({action:Bd}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),h.inputSettings&&h.inputSettings.audio&&(this._preloadCache.inputSettings.audio=h.inputSettings.audio),h.inputSettings&&h.inputSettings.video&&(this._preloadCache.inputSettings.video=h.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:hn(this.properties,this.callClientId),preloadCache:hn(this._preloadCache,this.callClientId)}),new Promise(function(v,m){o._joinedCallback=function(T,q){if(o._callState!==Pt){if(o._updateCallState(Jt),T)for(var H in T){if(o._callObjectMode){var re=o._callMachine().store;Wo(T[H],re),Ho(T[H],re),Go(T[H],o._participants[H],re)}o._participants[H]=Q({},T[H]),o.toggleParticipantAudioBasedOnNativeAudioFocus()}f&&o.loadCss(o.properties),v(T)}else m(q)}}))}),function(){return k.apply(this,arguments)})},{key:"leave",value:(E=K(function*(){var o=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(h){o._callState===Vt||o._callState===Pt?h():o._callObjectLoader&&!o._callObjectLoader.loaded?(o._callObjectLoader.cancel(),o._updateCallState(Vt),o.resetMeetingDependentVars(),o.emitDailyJSEvent({action:Vt}),h()):(o._resolveLeave=h,o.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return E.apply(this,arguments)})},{key:"startScreenShare",value:(N=K(function*(){var o=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(br(this._callMachineInitialized,"startScreenShare()"),h.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",h.screenVideoSendSettings),h.mediaStream&&(this._sharedTracks.screenMediaStream=h.mediaStream,h.mediaStream=An),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var f=this.nativeUtils();if(yield f.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Eo,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});f.setSystemScreenCaptureStartCallback(function(){f.setSystemScreenCaptureStartCallback(null),o.sendMessageToCallMachine({action:Oo,captureOptions:h})}),f.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Oo,captureOptions:h})}),function(){return N.apply(this,arguments)})},{key:"stopScreenShare",value:function(){br(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Q({action:"local-recording-start"},o))}},{key:"updateRecording",value:function(o){var h=o.layout,f=h===void 0?{preset:"default"}:h,v=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:f,instanceId:v})}},{key:"stopRecording",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Q({action:"local-recording-stop"},o))}},{key:"startLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Q({action:"daily-method-start-live-streaming"},o))}},{key:"updateLiveStreaming",value:function(o){var h=o.layout,f=h===void 0?{preset:"default"}:h,v=o.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:f,instanceId:v})}},{key:"addLiveStreamingEndpoints",value:function(o){var h=o.endpoints,f=o.instanceId;this.sendMessageToCallMachine({action:Mo,endpointsOp:Af,endpoints:h,instanceId:f})}},{key:"removeLiveStreamingEndpoints",value:function(o){var h=o.endpoints,f=o.instanceId;this.sendMessageToCallMachine({action:Mo,endpointsOp:Pf,endpoints:h,instanceId:f})}},{key:"stopLiveStreaming",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(Q({action:"daily-method-stop-live-streaming"},o))}},{key:"validateDailyConfig",value:function(o){o.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(o.camSimulcastEncodings)),o.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),Io()&&o.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(o){if(!(o instanceof Array||Array.isArray(o)))throw new Error("encodings must be an Array");if(!bc(o.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var v=0;v<o.length;v++){var m=o[v];for(var T in this._validateEncodingLayerHasValidProperties(m),m)if(Fi.includes(T)){if(typeof m[T]!="number")throw new Error("".concat(T," must be a number"));if(h){var q=h[T],H=q.min,re=q.max;if(!bc(m[T],H,re))throw new Error("".concat(T," value not in range. valid range: ").concat(H," to ").concat(re))}}else if(!["active","scalabilityMode"].includes(T))throw new Error("Invalid key ".concat(T,", valid keys are:")+Object.values(Fi));if(f&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(A=K(function*(o){var h=this,f=o.url,v=o.settings,m=v===void 0?{state:Oi.PLAY}:v;try{(function(T){if(typeof T!="string")throw new Error('url parameter must be "string" type')})(f),vc(m),function(T){for(var q in T)if(!sc.includes(q))throw new Error("Invalid key ".concat(q,", valid keys are: ").concat(sc));T.simulcastEncodings&&this.validateSimulcastEncodings(T.simulcastEncodings,ic,!0)}(m)}catch(T){throw console.error("invalid argument Error: ".concat(T)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),T}return new Promise(function(T,q){h.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:f,settings:m},function(H){H.error?q({error:H.error,errorMsg:H.errorMsg}):T({session_id:H.session_id,remoteMediaPlayerState:{state:H.state,settings:H.settings}})})})}),function(o){return A.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(O=K(function*(o){var h=this;if(typeof o!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(f,v){h.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:o},function(m){m.error?v({error:m.error,errorMsg:m.errorMsg}):f()})})}),function(o){return O.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(S=K(function*(o){var h=this,f=o.session_id,v=o.settings;try{vc(v)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise(function(m,T){h.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:f,settings:v},function(q){q.error?T({error:q.error,errorMsg:q.errorMsg}):m({session_id:q.session_id,remoteMediaPlayerState:{state:q.state,settings:q.settings}})})})}),function(o){return S.apply(this,arguments)})},{key:"startTranscription",value:function(o){ge(this._callState,"startTranscription()"),this.sendMessageToCallMachine(Q({action:"daily-method-start-transcription"},o))}},{key:"updateTranscription",value:function(o){if(ge(this._callState,"updateTranscription()"),!o)throw new Error("updateTranscription Error: options is mandatory");if(de(o)!=="object")throw new Error("updateTranscription Error: options must be object type");if(o.participants&&!Array.isArray(o.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(Q({action:"daily-method-update-transcription"},o))}},{key:"stopTranscription",value:function(o){if(ge(this._callState,"stopTranscription()"),o&&de(o)!=="object")throw new Error("stopTranscription Error: options must be object type");if(o&&!o.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(Q({action:"daily-method-stop-transcription"},o))}},{key:"startDialOut",value:(_=K(function*(o){var h=this;ge(this._callState,"startDialOut()");var f=function(v){if(v){if(!Array.isArray(v))throw new Error("Error starting dial out: audio codec must be an array");if(v.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");v.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: audio codec must be a string");if(m!=="OPUS"&&m!=="PCMU"&&m!=="PCMA"&&m!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!o.sipUri&&!o.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(o.sipUri&&o.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(o.sipUri){if(typeof o.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!o.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(o.video&&typeof o.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(v){if(v&&(f(v.audio),v.video)){if(!Array.isArray(v.video))throw new Error("Error starting dial out: video codec must be an array");if(v.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");v.video.forEach(function(m){if(typeof m!="string")throw new Error("Error starting dial out: video codec must be a string");if(m!=="H264"&&m!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(o.codecs)}if(o.phoneNumber){if(typeof o.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(o.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");o.codecs&&f(o.codecs.audio)}if(o.callerId){if(typeof o.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(o.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(o.displayName){if(typeof o.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(o.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(o.userId){if(typeof o.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(o.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(v,m){h.sendMessageToCallMachine(Q({action:"dialout-start"},o),function(T){T.error?m(T.error):v(T)})})}),function(o){return _.apply(this,arguments)})},{key:"stopDialOut",value:function(o){var h=this;return ge(this._callState,"stopDialOut()"),new Promise(function(f,v){h.sendMessageToCallMachine(Q({action:"dialout-stop"},o),function(m){m.error?v(m.error):f(m)})})}},{key:"sipCallTransfer",value:(y=K(function*(o){var h=this;if(ge(this._callState,"sipCallTransfer()"),!o)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return o.useSipRefer=!1,yc(o,"sipCallTransfer"),new Promise(function(f,v){h.sendMessageToCallMachine(Q({action:Po},o),function(m){m.error?v(m.error):f(m)})})}),function(o){return y.apply(this,arguments)})},{key:"sipRefer",value:(b=K(function*(o){var h=this;if(ge(this._callState,"sipRefer()"),!o)throw new Error("sessionId and toEndPoint are mandatory parameter");return o.useSipRefer=!0,yc(o,"sipRefer"),new Promise(function(f,v){h.sendMessageToCallMachine(Q({action:Po},o),function(m){m.error?v(m.error):f(m)})})}),function(o){return b.apply(this,arguments)})},{key:"sendDTMF",value:(w=K(function*(o){var h=this;return ge(this._callState,"sendDTMF()"),function(f){var v=f.sessionId,m=f.tones;if(!v||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof v!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var T=/[^0-9A-D*#]/g,q=m.match(T);if(q&&q[0])throw new Error("".concat(q[0]," is not valid DTMF tone"))}(o),new Promise(function(f,v){h.sendMessageToCallMachine(Q({action:"send-dtmf"},o),function(m){m.error?v(m.error):f(m)})})}),function(o){return w.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var o=this;return this._callState!==Jt?{stats:{latest:{}}}:new Promise(function(h){o.sendMessageToCallMachine({action:"get-calc-stats"},function(f){h(Q({stats:f.stats},o._network))})})}},{key:"testWebsocketConnectivity",value:(p=K(function*(){var o=this;if($i(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(h){return Promise.reject(h)}return new Promise(function(h,f){o.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(v){v.error?f(v.error):h(v.results)})})}),function(){return p.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(o){return o?o instanceof MediaStreamTrack?!!Zf(o,{isLocalScreenVideo:!1})||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(d=K(function*(){var o=this;se(),it(this._callObjectMode,"testCallQuality()"),br(this._callMachineInitialized,"testCallQuality()",null,!0),Ui(this._callState,this._isPreparingToJoin,"testCallQuality()");var h=this._testCallAlreadyInProgress,f=function(m){h||(o._testCallInProgress=m)};if(f(!0),this.needsLoad())try{var v=this._callState;yield this.load(),this._callState=v}catch(m){return f(!1),Promise.reject(m)}return new Promise(function(m){o.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:o.properties.dailyJsVersion},function(T){var q=T.results,H=q.result,re=qs(q,eh);if(H==="failed"){var Oe,we=Q({},re);(Oe=re.error)!==null&&Oe!==void 0&&Oe.details?(re.error.details=JSON.parse(re.error.details),we.error=Q(Q({},we.error),{},{details:Q({},we.error.details)}),we.error.details.duringTest="testCallQuality"):(we.error=we.error?Q({},we.error):{},we.error.details={duringTest:"testCallQuality"}),o._maybeSendToSentry(we)}f(!1),m(Q({result:H},re))})})}),function(){return d.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(u=K(function*(o){var h;le()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),h=yield this.testPeerToPeerCallQuality(o)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),h=yield this.testCallQuality());var f={result:h.result,secondsElapsed:h.secondsElapsed};return h.data&&(f.data={maxRTT:h.data.maxRoundTripTime,packetLoss:h.data.avgRecvPacketLoss}),f}),function(o){return u.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(l=K(function*(o){var h=this;if($i(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var f=o.videoTrack,v=o.duration;if(!this._validateVideoTrackForNetworkTests(f))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=f,new Promise(function(m,T){h.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:v},function(q){q.error?T(q.error):m(q.results)})})}),function(o){return l.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){le()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(c=K(function*(o){var h=this;if($i(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(f){return Promise.reject(f)}if(!this._validateVideoTrackForNetworkTests(o))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=o,new Promise(function(f,v){h.sendMessageToCallMachine({action:"test-network-connectivity"},function(m){m.error?v(m.error):f(m.results)})})}),function(o){return c.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var o=this;return new Promise(function(h){o._callState===Jt?o.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(f){h(f.cpuStats)}):h({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(o){var h;if(!(((h=Object.keys(o))===null||h===void 0?void 0:h.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(Fi))}},{key:"_validateVideoSendSettings",value:function(o,h){var f=o==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],v="Video send settings should be either an object or one of the supported presets: ".concat(f.join());if(typeof h=="string"){if(!f.includes(h))throw new Error(v)}else{if(de(h)!=="object")throw new Error(v);if(!h.maxQuality&&!h.encodings&&h.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(h.maxQuality&&["low","medium","high"].indexOf(h.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(h.encodings){var m=!1;switch(Object.keys(h.encodings).length){case 1:m=!h.encodings.low;break;case 2:m=!h.encodings.low||!h.encodings.medium;break;case 3:m=!h.encodings.low||!h.encodings.medium||!h.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");h.encodings.low&&this._validateEncodingLayerHasValidProperties(h.encodings.low),h.encodings.medium&&this._validateEncodingLayerHasValidProperties(h.encodings.medium),h.encodings.high&&this._validateEncodingLayerHasValidProperties(h.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(o){var h=this;if(!o||Object.keys(o).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(o).forEach(function(f){var v=Rt(f,2),m=v[0],T=v[1];h._validateVideoSendSettings(m,T)})}},{key:"updateSendSettings",value:function(o){var h=this;return this.validateUpdateSendSettings(o),this.needsLoad()?(this._preloadCache.sendSettings=o,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(f,v){h.sendMessageToCallMachine({action:"update-send-settings",sendSettings:o},function(m){m.error?v(m.error):f(m.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return se(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(o){return se(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:o}),this}},{key:"activeSpeakerMode",value:function(){return se(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(o){return ge(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=o,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:o}),this}},{key:"enumerateDevices",value:(a=K(function*(){var o=this;if(this._callObjectMode){var h=yield navigator.mediaDevices.enumerateDevices();return xt()==="Firefox"&&Pn().major>115&&Pn().major<123&&(h=h.filter(function(f){return f.kind!=="audiooutput"})),{devices:h.map(function(f){var v=JSON.parse(JSON.stringify(f));if(!le()&&f.kind==="videoinput"&&f.getCapabilities){var m,T=f.getCapabilities();v.facing=(T==null||(m=T.facingMode)===null||m===void 0?void 0:m.length)>=1?T.facingMode[0]:void 0}return v})}}return new Promise(function(f){o.sendMessageToCallMachine({action:"enumerate-devices"},function(v){f({devices:v.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(ge(this._callState,"sendAppMessage()"),JSON.stringify(o).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:o,to:h}),this}},{key:"addFakeParticipant",value:function(o){return se(),ge(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(Q({action:"add-fake-participant"},o)),this}},{key:"setShowNamesMode",value:function(o){return ze(this._callObjectMode,"setShowNamesMode()"),se(),o&&o!=="always"&&o!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:o}),this)}},{key:"setShowLocalVideo",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ze(this._callObjectMode,"setShowLocalVideo()"),se(),ge(this._callState,"setShowLocalVideo()"),typeof o!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:o}),this._showLocalVideo=o,this)}},{key:"showLocalVideo",value:function(){return ze(this._callObjectMode,"showLocalVideo()"),se(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ze(this._callObjectMode,"setShowParticipantsBar()"),se(),ge(this._callState,"setShowParticipantsBar()"),typeof o!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:o}),this._showParticipantsBar=o,this)}},{key:"showParticipantsBar",value:function(){return ze(this._callObjectMode,"showParticipantsBar()"),se(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return se(),ze(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(o){return se(),ze(this._callObjectMode,"setCustomIntegrations()"),ge(this._callState,"setCustomIntegrations()"),mc(o)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:o}),this._customIntegrations=o,this):this}},{key:"startCustomIntegrations",value:function(o){var h=this;if(se(),ze(this._callObjectMode,"startCustomIntegrations()"),ge(this._callState,"startCustomIntegrations()"),Array.isArray(o)&&o.some(function(m){return typeof m!="string"})||!Array.isArray(o)&&typeof o!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var f=typeof o=="string"?[o]:o,v=f.filter(function(m){return!(m in h._customIntegrations)});return v.length?(console.error(`Can't find custom integration(s): "`.concat(v.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:f}),this)}},{key:"stopCustomIntegrations",value:function(o){var h=this;if(se(),ze(this._callObjectMode,"stopCustomIntegrations()"),ge(this._callState,"stopCustomIntegrations()"),Array.isArray(o)&&o.some(function(m){return typeof m!="string"})||!Array.isArray(o)&&typeof o!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var f=typeof o=="string"?[o]:o,v=f.filter(function(m){return!(m in h._customIntegrations)});return v.length?(console.error(`Can't find custom integration(s): "`.concat(v.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:f}),this)}},{key:"customTrayButtons",value:function(){return ze(this._callObjectMode,"customTrayButtons()"),se(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(o){return ze(this._callObjectMode,"updateCustomTrayButtons()"),se(),ge(this._callState,"updateCustomTrayButtons()"),pc(o)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:o}),this._customTrayButtons=o,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(gr))),this)}},{key:"theme",value:function(){return ze(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(o){var h=this;return ze(this._callObjectMode,"setTheme()"),new Promise(function(f,v){try{h.validateProperties({theme:o}),h.properties.theme=Q({},o),h.sendMessageToCallMachine({action:"set-theme",theme:h.properties.theme});try{h.emitDailyJSEvent({action:Rd,theme:h.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}f(h.properties.theme)}catch(m){v(m)}})}},{key:"requestFullscreen",value:(s=K(function*(){if(se(),this._iframe&&!document.fullscreenElement&&Lo())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(o){console.log("could not make video call fullscreen",o)}}),function(){return s.apply(this,arguments)})},{key:"exitFullscreen",value:function(){se(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=K(function*(){var o=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(h){o.sendMessageToCallMachine({action:"get-sidebar-view"},function(f){h(f.view)})})}),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(o){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:o}),this)}},{key:"room",value:(r=K(function*(){var o=this,h=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,f=h===void 0||h;return this._accessState.access===Ei||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(v){o.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:f},function(m){delete m.action,delete m.callbackStamp,v(m)})})}),function(){return r.apply(this,arguments)})},{key:"geo",value:(n=K(function*(){try{var o=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield o.json()).geo}}catch(h){return console.error("geo lookup failed",h),{current:""}}}),function(){return n.apply(this,arguments)})},{key:"setNetworkTopology",value:(e=K(function*(o){var h=this;return se(),ge(this._callState,"setNetworkTopology()"),new Promise(function(f,v){h.sendMessageToCallMachine({action:"set-network-topology",opts:o},function(m){m.error?v({error:m.error}):f({workerId:m.workerId})})})}),function(o){return e.apply(this,arguments)})},{key:"getNetworkTopology",value:(t=K(function*(){var o=this;return new Promise(function(h,f){o.needsLoad()&&h({topology:"none"}),o.sendMessageToCallMachine({action:"get-network-topology"},function(v){v.error?f({error:v.error}):h({topology:v.topology})})})}),function(){return t.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(o){if(se(),typeof o!="number"&&o!==!0&&o!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(o));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:o})}},{key:"on",value:function(o,h){return yt.prototype.on.call(this,o,h)}},{key:"once",value:function(o,h){return yt.prototype.once.call(this,o,h)}},{key:"off",value:function(o,h){return yt.prototype.off.call(this,o,h)}},{key:"validateProperties",value:function(o){for(var h in o){if(!Wt[h])throw new Error("unrecognized property '".concat(h,"'"));if(Wt[h].validate&&!Wt[h].validate(o[h],this))throw new Error("property '".concat(h,"': ").concat(Wt[h].help))}}},{key:"assembleMeetingUrl",value:function(){var o,h,f=Q(Q({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(o=this.properties.dailyConfig)!==null&&o!==void 0&&o.proxyUrl?encodeURIComponent((h=this.properties.dailyConfig)===null||h===void 0?void 0:h.proxyUrl):void 0}),v=f.url.match(/\?/)?"&":"?";return f.url+v+Object.keys(Wt).filter(function(m){return Wt[m].queryString&&f[m]!==void 0}).map(function(m){return"".concat(Wt[m].queryString,"=").concat(f[m])}).join("&")}},{key:"needsLoad",value:function(){return[yo,vo,Vt,Pt].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(o,h){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(o,h,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(o){this._messageChannel.forwardPackagedMessageToCallMachine(o,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(o){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(o,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(o){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(o)}},{key:"handleMessageFromCallMachine",value:function(o){switch(o.action){case Ld:this.sendMessageToCallMachine(Q({action:jd},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var h={action:fr,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:zn(this.properties.dailyConfig)}};this.sendMessageToCallMachine(h),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case wo:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(o);break;case Ud:var f,v=Q({},o);delete v.internal,this._maxAppMessageSize=((f=o.internal)===null||f===void 0?void 0:f._maxAppMessageSize)||Ci,this._joinedCallback&&(this._joinedCallback(o.participants),this._joinedCallback=null),this.emitDailyJSEvent(v);break;case qd:case Jd:if(this._callState===Vt)return;if(o.participant&&o.participant.session_id){var m=o.participant.local?"local":o.participant.session_id;if(this._callObjectMode){var T=this._callMachine().store;Wo(o.participant,T),Ho(o.participant,T),Go(o.participant,this._participants[m],T)}try{this.maybeParticipantTracksStopped(this._participants[m],o.participant),this.maybeParticipantTracksStarted(this._participants[m],o.participant),this.maybeEventRecordingStopped(this._participants[m],o.participant),this.maybeEventRecordingStarted(this._participants[m],o.participant)}catch(gn){console.error("track events error",gn)}this.compareEqualForParticipantUpdateEvent(o.participant,this._participants[m])||(this._participants[m]=Q({},o.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(o))}break;case Vd:if(o.participant&&o.participant.session_id){var q=this._participants[o.participant.session_id];q&&this.maybeParticipantTracksStopped(q,null),delete this._participants[o.participant.session_id],this.emitDailyJSEvent(o)}break;case zd:Ie(this._participantCounts,o.participantCounts)||(this._participantCounts=o.participantCounts,this.emitDailyJSEvent(o));break;case Wd:var H={access:o.access};o.awaitingAccess&&(H.awaitingAccess=o.awaitingAccess),Ie(this._accessState,H)||(this._accessState=H,this.emitDailyJSEvent(o));break;case Hd:if(o.meetingSession){this._meetingSessionSummary=o.meetingSession,this.emitDailyJSEvent(o);var re=Q(Q({},o),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(re)}break;case Co:var Oe;this._iframe&&!o.preserveIframe&&(this._iframe.src=""),this._updateCallState(Pt),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(o.errorMsg),this._loadedCallback=null),o.preserveIframe;var we=qs(o,th);we!=null&&(Oe=we.error)!==null&&Oe!==void 0&&Oe.details&&(we.error.details=JSON.parse(we.error.details)),this._maybeSendToSentry(o),this._joinedCallback&&(this._joinedCallback(null,we),this._joinedCallback=null),this.emitDailyJSEvent(we);break;case $d:this._callState!==Pt&&this._updateCallState(Vt),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(o);break;case"selected-devices-updated":o.devices&&this.emitDailyJSEvent(o);break;case vf:var $e=o.threshold,qe=o.quality;$e===this._network.threshold&&qe===this._network.quality||(this._network.quality=qe,this._network.threshold=$e,this.emitDailyJSEvent(o));break;case _f:o&&o.cpuLoadState&&this.emitDailyJSEvent(o);break;case wf:o&&o.faceCounts!==void 0&&this.emitDailyJSEvent(o);break;case gf:var Ye=o.activeSpeaker;this._activeSpeaker.peerId!==Ye.peerId&&(this._activeSpeaker.peerId=Ye.peerId,this.emitDailyJSEvent({action:o.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Qt=o.show;this._showLocalVideo=Qt,this.emitDailyJSEvent({action:o.action,show:Qt});break;case yf:var ft=o.enabled;this._activeSpeakerMode!==ft&&(this._activeSpeakerMode=ft,this.emitDailyJSEvent({action:o.action,enabled:this._activeSpeakerMode}));break;case Kd:case Yd:case Qd:this._waitingParticipants=o.allWaitingParticipants,this.emitDailyJSEvent({action:o.action,participant:o.participant});break;case Of:Ie(this._receiveSettings,o.receiveSettings)||(this._receiveSettings=o.receiveSettings,this.emitDailyJSEvent({action:o.action,receiveSettings:o.receiveSettings}));break;case Mf:if(!Ie(this._inputSettings,o.inputSettings)){var Me=this._getInputSettings();this._inputSettings=o.inputSettings,this._preloadCache.inputSettings={},Ie(Me,this._getInputSettings())||this.emitDailyJSEvent({action:o.action,inputSettings:this._getInputSettings()})}break;case"send-settings-updated":Ie(this._sendSettings,o.sendSettings)||(this._sendSettings=o.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:o.action,sendSettings:o.sendSettings}));break;case"local-audio-level":this._localAudioLevel=o.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=o.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(o);break;case uf:var at=o.session_id;this._rmpPlayerState[at]=o.playerState,this.emitDailyJSEvent(o);break;case ff:delete this._rmpPlayerState[o.session_id],this.emitDailyJSEvent(o);break;case df:var ot=o.session_id,Xt=this._rmpPlayerState[ot];Xt&&this.compareEqualForRMPUpdateEvent(Xt,o.remoteMediaPlayerState)||(this._rmpPlayerState[ot]=o.remoteMediaPlayerState,this.emitDailyJSEvent(o));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(o);break;case Gd:var Nn=this._meetingSessionState.topology!==(o.meetingSessionState&&o.meetingSessionState.topology);this._meetingSessionState=Ji(o.meetingSessionState,this._callObjectMode),(this._callObjectMode||Nn)&&this.emitDailyJSEvent(o);break;case hf:this._isScreenSharing=!0,this.emitDailyJSEvent(o);break;case pf:case mf:this._isScreenSharing=!1,this.emitDailyJSEvent(o);break;case So:case ko:case rf:case sf:case af:case ef:case tf:case nf:case Nd:case Fd:case cf:case lf:case"test-completed":case bf:case of:case Sf:case kf:case Ef:case Cf:case Eo:case Tf:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(o);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(o,h){var f="record";o&&(h.local||h[f]!==!1||o[f]===h[f]||this.emitDailyJSEvent({action:ko}))}},{key:"maybeEventRecordingStarted",value:function(o,h){var f="record";o&&(h.local||h[f]!==!0||o[f]===h[f]||this.emitDailyJSEvent({action:So}))}},{key:"maybeEventTrackStopped",value:function(o,h,f,v){o&&(o.readyState!=="ended"&&h&&o.id===h.id||this.emitDailyJSEvent({action:Zd,track:o,participant:f,type:v}))}},{key:"maybeEventTrackStarted",value:function(o,h,f,v){h&&(o&&o.readyState!=="ended"&&h.id===o.id||this.emitDailyJSEvent({action:Xd,track:h,participant:f,type:v}))}},{key:"maybeParticipantTracksStopped",value:function(o,h){if(o)for(var f in o.tracks)this.maybeEventTrackStopped(o.tracks[f].track,h&&h.tracks[f]?h.tracks[f].track:null,h,f)}},{key:"maybeParticipantTracksStarted",value:function(o,h){if(h)for(var f in h.tracks)this.maybeEventTrackStarted(o&&o.tracks[f]?o.tracks[f].track:null,h.tracks[f].track,h,f)}},{key:"compareEqualForRMPUpdateEvent",value:function(o,h){var f,v;return o.state===h.state&&((f=o.settings)===null||f===void 0?void 0:f.volume)===((v=h.settings)===null||v===void 0?void 0:v.volume)}},{key:"emitDailyJSEvent",value:function(o){try{o.callClientId=this.callClientId,this.emit(o.action,o)}catch(h){console.log("could not emit",o,h)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(o,h){return!!Ie(o,h)&&(!o.videoTrack||!h.videoTrack||o.videoTrack.id===h.videoTrack.id&&o.videoTrack.muted===h.videoTrack.muted&&o.videoTrack.enabled===h.videoTrack.enabled)&&(!o.audioTrack||!h.audioTrack||o.audioTrack.id===h.audioTrack.id&&o.audioTrack.muted===h.audioTrack.muted&&o.audioTrack.enabled===h.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return le()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(o){this._updateCallState(this._callState,o)}},{key:"_updateCallState",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(o!==this._callState||h!==this._isPreparingToJoin){var f=this._callState,v=this._isPreparingToJoin;this._callState=o,this._isPreparingToJoin=h;var m=this._callState===Jt;this.updateShowAndroidOngoingMeetingNotification(m);var T=vr(f,v),q=vr(this._callState,this._isPreparingToJoin);T!==q&&(this.updateKeepDeviceAwake(q),this.updateDeviceAudioMode(q),this.updateNoOpRecordingEnsuringBackgroundContinuity(q))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=rc,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Ei},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=Ji(nc,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Ci,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(o){le()&&this.nativeUtils().setKeepDeviceAwake(o,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(o){if(le()&&!this.disableReactNativeAutoDeviceManagement("audio")){var h=o?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(h)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(o){if(le()&&this.nativeUtils().setShowOngoingMeetingNotification){var h,f,v,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var T=this.properties.reactNativeConfig.androidInCallNotification;h=T.title,f=T.subtitle,v=T.iconName,m=T.disableForCustomOverride}m&&(o=!1),this.nativeUtils().setShowOngoingMeetingNotification(o,h,f,v,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(o){le()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(o)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var o,h;if(le()){var f=(o=this._callMachine())===null||o===void 0||(h=o.store)===null||h===void 0?void 0:h.getState();for(var v in f==null?void 0:f.streams){var m=f.streams[v];m&&m.pendingTrack&&m.pendingTrack.kind==="audio"&&(m.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(o){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[o]}},{key:"absoluteUrl",value:function(o){if(o!==void 0){var h=document.createElement("a");return h.href=o,h.href}}},{key:"sayHello",value:function(){var o="hello, world.";return console.log(o),o}},{key:"_logUseAfterDestroy",value:function(){var o=Object.values(zt)[0];if(this.needsLoad())if(o&&!o.needsLoad()){var h={action:fr,level:"error",code:this.strictMode?9995:9997};o.sendMessageToCallMachine(h)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var f={action:fr,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(f,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var o=0,h=Object.values(zt);o<h.length;o++){var f=h[o];f._callMachineInitialized?(f.sendMessageToCallMachine({action:fr,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),f._delayDuplicateInstanceLog=!1):f._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(o){var h,f,v,m,T,q;if(!((h=o.error)!==null&&h!==void 0&&h.type&&(![xd,Pd,_o].includes(o.error.type)||o.error.type===_o&&o.error.msg.includes("deleted")))){var H=(f=this.properties)!==null&&f!==void 0&&f.url?new URL(this.properties.url):void 0,re="production";H&&H.host.includes(".staging.daily")&&(re="staging");var Oe,we,$e,qe,Ye,Qt=[td(),Zu(),wd(),bd(),Cd(),Od(),nd(),Td()].filter(function(gn){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(gn.name)}),ft=new od({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:fd,stackParser:vd,integrations:Qt,environment:re}),Me=new At;if(Me.setClient(ft),ft.init(),this.session_id&&Me.setExtra("sessionId",this.session_id),this.properties){var at=Q({},this.properties);at.userName=at.userName?"[Filtered]":void 0,at.userData=at.userData?"[Filtered]":void 0,at.token=at.token?"[Filtered]":void 0,Me.setExtra("properties",at)}if(H){var ot=H.searchParams.get("domain");if(!ot){var Xt=H.host.match(/(.*?)\./);ot=Xt&&Xt[1]||""}ot&&Me.setTag("domain",ot)}o.error&&(Me.setTag("fatalErrorType",o.error.type),Me.setExtra("errorDetails",o.error.details),!((Oe=o.error.details)===null||Oe===void 0)&&Oe.uri&&Me.setTag("serverAddress",o.error.details.uri),!((we=o.error.details)===null||we===void 0)&&we.workerGroup&&Me.setTag("workerGroup",o.error.details.workerGroup),!(($e=o.error.details)===null||$e===void 0)&&$e.geoGroup&&Me.setTag("geoGroup",o.error.details.geoGroup),!((qe=o.error.details)===null||qe===void 0)&&qe.on&&Me.setTag("connectionAttempt",o.error.details.on),(Ye=o.error.details)!==null&&Ye!==void 0&&Ye.bundleUrl&&(Me.setTag("bundleUrl",o.error.details.bundleUrl),Me.setTag("bundleError",o.error.details.sourceError.type))),Me.setTags({callMode:this._callObjectMode?le()?"reactNative":(v=this.properties)!==null&&v!==void 0&&(m=v.dailyConfig)!==null&&m!==void 0&&(T=m.callMode)!==null&&T!==void 0&&T.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ke.version()});var Nn=((q=o.error)===null||q===void 0?void 0:q.msg)||o.errorMsg;Me.captureException(new Error(Nn))}}},{key:"_callMachine",value:function(){var o,h,f;return(o=window._daily)===null||o===void 0||(h=o.instances)===null||h===void 0||(f=h[this.callClientId])===null||f===void 0?void 0:f.callMachine}}],[{key:"supportedBrowser",value:function(){if(le())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var o=vu.getParser(Ke());return{supported:!!Do(),mobile:o.getPlatformType()==="mobile",name:o.getBrowserName(),version:o.getBrowserVersion(),supportsFullscreen:!!Lo(),supportsScreenShare:!!xf(),supportsSfu:!!Do(),supportsVideoProcessing:jo(),supportsAudioProcessing:Ro()}}},{key:"version",value:function(){return"0.73.0"}},{key:"createCallObject",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.layout="none",new ke(null,o)}},{key:"wrap",value:function(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(se(),!o||!o.contentWindow||typeof o.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return h.layout||(h.customLayout?h.layout="custom-v1":h.layout="browser"),new ke(o,h)}},{key:"createFrame",value:function(o,h){var f,v;se(),o&&h?(f=o,v=h):o&&o.append?(f=o,v={}):(f=document.body,v=o||{});var m=v.iframeStyle;m||(m=f===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var T=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?T.allow="microphone, camera":T.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",T.style.visibility="hidden",f.appendChild(T),T.style.visibility=null,Object.keys(m).forEach(function(q){return T.style[q]=m[q]}),v.layout||(v.customLayout?v.layout="custom-v1":v.layout="browser");try{return new ke(T,v)}catch(q){throw f.removeChild(T),q}}},{key:"createTransparentFrame",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};se();var h=document.createElement("iframe");return h.allow="microphone; camera; autoplay",h.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(h),o.layout||(o.layout="custom-v1"),ke.wrap(h,o)}},{key:"getCallInstance",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return o?zt[o]:Object.values(zt)[0]}}]),ke}();function hn(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)n[r]=An;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function ge(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==Jt){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function vr(t,e){return[ki,Jt].includes(t)||e}function Ui(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(vr(t,e)){var i="".concat(n," not supported after joining a meeting.");throw r&&(i+=" ".concat(r)),console.error(i),new Error(i)}}function br(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function $i(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function it(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function ze(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function se(){if(le())throw new Error("This daily-js method is not currently supported in React Native")}function Ln(){if(!le())throw new Error("This daily-js method is only supported in React Native")}function cc(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),Ie(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function lc(t,e){for(var n=e.allowAllParticipantsKey,r=function(p){var w=["local"];return n||w.push("*"),p&&!w.includes(p)},i=function(p){return!!(p.layer===void 0||Number.isInteger(p.layer)&&p.layer>=0||p.layer==="inherit")},s=function(p){return!!p&&!(p.video&&!i(p.video))&&!(p.screenVideo&&!i(p.screenVideo))},a=0,c=Object.entries(t);a<c.length;a++){var l=Rt(c[a],2),u=l[0],d=l[1];if(!r(u)||!s(d))return!1}return!0}function uc(t){return de(t)==="object"&&!(t.video&&(de(t.video)!=="object"||!function(i){var s=["type","config"];return!i||de(i)!=="object"||!function(a){return typeof a!="string"?!1:Object.values(hr).includes(a)?!0:(console.error("inputSettings video processor type invalid"),!1)}(i.type)||i.config&&(de(i.config)!=="object"||!function(a,c){var l=Object.keys(c);if(l.length===0)return!0;var u="invalid object in inputSettings -> video -> processor -> config";switch(a){case hr.BGBLUR:return l.length>1||l[0]!=="strength"?(console.error(u),!1):!(typeof c.strength!="number"||c.strength<=0||c.strength>1||isNaN(c.strength))||(console.error("".concat(u,"; expected: {0 < strength <= 1}, got: ").concat(c.strength)),!1);case hr.BGIMAGE:return!(c.source!==void 0&&!function(d){if(d.source==="default")return d.type="default",!0;if(d.source instanceof ArrayBuffer)return!0;if(Wn(d.source))return d.type="url",!!function(b){var y=new URL(b),_=y.pathname;if(y.protocol==="data:")try{var S=_.substring(_.indexOf(":")+1,_.indexOf(";")).split("/")[1];return Mi.includes(S)}catch(A){return console.error("failed to deduce blob content type",A),!1}var O=_.split(".").at(-1).toLowerCase().trim();return Mi.includes(O)}(d.source)||(console.error("invalid image type; supported types: [".concat(Mi.join(", "),"]")),!1);return p=d.source,w=Number(p),isNaN(w)||!Number.isInteger(w)||w<=0||w>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(d.type="daily-preselect",!0);var p,w}(c));default:return!0}}(i.type,i.config))?!1:(Object.keys(i).filter(function(a){return!s.includes(a)}).forEach(function(a){console.warn("invalid key inputSettings -> video -> processor : ".concat(a)),delete i[a]}),!0)}(t.video.processor)))&&!(t.audio&&(de(t.audio)!=="object"||(n=t.audio.processor,r=["type"],!n||de(n)!=="object"||(Object.keys(n).filter(function(i){return!r.includes(i)}).forEach(function(i){console.warn("invalid key inputSettings -> audio -> processor : ".concat(i)),delete n[i]}),e=n.type,typeof e!="string"||!Object.values(Ao).includes(e)&&(console.error("inputSettings audio processor type invalid"),1)))));var e,n,r}function dc(t,e){var n,r=[];t.video&&!jo((n=e==null?void 0:e.useLegacyVideoProcessor)!==null&&n!==void 0&&n)&&(delete t.video,r.push("video")),t.audio&&!Ro()&&(delete t.audio,r.push("audio")),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", ")))}function qi(){var t=Object.values(hr).join(" | "),e=Object.values(Ao).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function fc(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Ad).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function hc(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Bi),".")}function pc(t){if(t&&de(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(gr),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=Rt(n[e],1)[0],i=0,s=Object.entries(t[r]);i<s.length;i++){var a=Rt(s[i],2),c=a[0],l=a[1],u=gr.id[c];if(!u)return console.error("customTrayButton does not support key ".concat(c)),!1;switch(c){case"iconPath":case"iconPathDarkMode":if(!Wn(l))return console.error("customTrayButton ".concat(c," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(l))return console.error("customTrayButton ".concat(c," should be ").concat(u,". Got: ").concat(l)),!1;break;default:if(de(l)!==u)return console.error("customTrayButton ".concat(c," should be a ").concat(u,".")),!1}}return!0}function mc(t){if(!t||t&&de(t)!=="object"||Array.isArray(t))return console.error(hc()),!1;for(var e=function(p){return"".concat(p," should be ").concat(Bi.id[p])},n=function(p,w){return console.error("customIntegration ".concat(p,": ").concat(w))},r=0,i=Object.entries(t);r<i.length;r++){var s=Rt(i[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var a=0,c=Object.entries(t[s]);a<c.length;a++){var l=Rt(c[a],2),u=l[0],d=l[1];switch(u){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof d!="string")return n(s,e(u)),!1;break;case"iconURL":if(!Wn(d))return n(s,"".concat(u," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!Wn(d))return n(s,'src "'.concat(d,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof d!="string")return n(s,e(u)),!1;break;case"location":if(!["main","sidebar"].includes(d))return n(s,e(u)),!1;break;case"controlledBy":if(d!=="*"&&d!=="owners"&&(!Array.isArray(d)||d.some(function(p){return typeof p!="string"})))return n(s,e(u)),!1;break;case"shared":if((!Array.isArray(d)||d.some(function(p){return typeof p!="string"}))&&d!=="owners"&&typeof d!="boolean")return n(s,e(u)),!1;break;default:if(!Bi.id[u])return console.error("customIntegration does not support key ".concat(u)),!1}}}return!0}function gc(t,e){if(e===void 0)return!1;switch(de(e)){case"string":return de(t)===e;case"object":if(de(t)!=="object")return!1;for(var n in t)if(!gc(t[n],e[n]))return!1;return!0;default:return!1}}function yc(t,e){var n=t.sessionId,r=t.toEndPoint,i=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function vc(t){if(de(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(Oi).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(Oi));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function bc(t,e,n){return!(typeof t!="number"||t<e||t>n)}function Ji(t,e){return t&&!e&&delete t.data,t}function ih(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var sh={};ih(sh,"DailyTransport",()=>_c);class _c extends $s{constructor({dailyFactoryOptions:e={}}={}){super(),this._botId="",this._selectedCam={},this._selectedMic={},this._selectedSpeaker={},this._dailyFactoryOptions=e}initialize(e,n){this._callbacks=e.callbacks??{},this._onMessage=n;const r=oc.getCallInstance();r&&r.destroy(),this._daily=oc.createCallObject({...this._dailyFactoryOptions,startVideoOff:e.enableCam!=!0,startAudioOff:e.enableMic==!1,allowMultipleCallInstances:!0}),this.attachEventListeners(),this.state="disconnected",pe.debug("[RTVI Transport] Initialized")}get state(){return this._state}set state(e){var n,r;this._state!==e&&(this._state=e,(r=(n=this._callbacks).onTransportStateChanged)==null||r.call(n,e))}async getAllCams(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="videoinput")}updateCam(e){this._daily.setInputDevicesAsync({videoDeviceId:e}).then(n=>{this._selectedCam=n.camera})}get selectedCam(){return this._selectedCam}async getAllMics(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="audioinput")}updateMic(e){this._daily.setInputDevicesAsync({audioDeviceId:e}).then(n=>{this._selectedMic=n.mic})}get selectedMic(){return this._selectedMic}async getAllSpeakers(){const{devices:e}=await this._daily.enumerateDevices();return e.filter(n=>n.kind==="audiooutput")}updateSpeaker(e){this._daily.setOutputDeviceAsync({outputDeviceId:e}).then(n=>{this._selectedSpeaker=n.speaker})}get selectedSpeaker(){return this._selectedSpeaker}enableMic(e){this._daily.setLocalAudio(e)}get isMicEnabled(){return this._daily.localAudio()}enableCam(e){this._daily.setLocalVideo(e)}get isCamEnabled(){return this._daily.localVideo()}enableScreenShare(e){e?this._daily.startScreenShare():this._daily.stopScreenShare()}get isSharingScreen(){return this._daily.localScreenAudio()||this._daily.localScreenVideo()}tracks(){var i,s,a,c,l,u,d,p,w,b,y,_,S,O,A,N,E;const e=((i=this._daily)==null?void 0:i.participants())??{},n=e==null?void 0:e[this._botId],r={local:{audio:(c=(a=(s=e==null?void 0:e.local)==null?void 0:s.tracks)==null?void 0:a.audio)==null?void 0:c.persistentTrack,screenAudio:(d=(u=(l=e==null?void 0:e.local)==null?void 0:l.tracks)==null?void 0:u.screenAudio)==null?void 0:d.persistentTrack,screenVideo:(b=(w=(p=e==null?void 0:e.local)==null?void 0:p.tracks)==null?void 0:w.screenVideo)==null?void 0:b.persistentTrack,video:(S=(_=(y=e==null?void 0:e.local)==null?void 0:y.tracks)==null?void 0:_.video)==null?void 0:S.persistentTrack}};return n&&(r.bot={audio:(A=(O=n==null?void 0:n.tracks)==null?void 0:O.audio)==null?void 0:A.persistentTrack,video:(E=(N=n==null?void 0:n.tracks)==null?void 0:N.video)==null?void 0:E.persistentTrack}),r}async initDevices(){var a,c,l,u,d,p,w,b,y,_,S,O;if(!this._daily)throw new He("Transport instance not initialized");this.state="initializing";const e=await this._daily.startCamera(),{devices:n}=await this._daily.enumerateDevices(),r=n.filter(A=>A.kind==="videoinput"),i=n.filter(A=>A.kind==="audioinput"),s=n.filter(A=>A.kind==="audiooutput");(c=(a=this._callbacks).onAvailableCamsUpdated)==null||c.call(a,r),(u=(l=this._callbacks).onAvailableMicsUpdated)==null||u.call(l,i),(p=(d=this._callbacks).onAvailableSpeakersUpdated)==null||p.call(d,s),this._selectedCam=e.camera,(b=(w=this._callbacks).onCamUpdated)==null||b.call(w,e.camera),this._selectedMic=e.mic,(_=(y=this._callbacks).onMicUpdated)==null||_.call(y,e.mic),this._selectedSpeaker=e.speaker,(O=(S=this._callbacks).onSpeakerUpdated)==null||O.call(S,e.speaker),this._daily.isLocalAudioLevelObserverRunning()||await this._daily.startLocalAudioLevelObserver(100),this._daily.isRemoteParticipantsAudioLevelObserverRunning()||await this._daily.startRemoteParticipantsAudioLevelObserver(100),this.state="initialized"}async connect(e,n){var r,i,s;if(!this._daily)throw new He("Transport instance not initialized");if(!n.signal.aborted){this.state="connecting";try{await this._daily.join({url:e.room_url,token:e.token});const a=await this._daily.room();a&&"id"in a&&(this._expiry=(r=a.config)==null?void 0:r.exp)}catch{throw this.state="error",new js}n.signal.aborted||(this.state="connected",(s=(i=this._callbacks).onConnected)==null||s.call(i))}}async sendReadyMessage(){return new Promise(e=>{(async()=>this._daily.on("track-started",n=>{var r;(r=n.participant)!=null&&r.local||(this.state="ready",this.sendMessage(Pe.clientReady()),e())}))()})}attachEventListeners(){this._daily.on("available-devices-updated",this.handleAvailableDevicesUpdated.bind(this)),this._daily.on("selected-devices-updated",this.handleSelectedDevicesUpdated.bind(this)),this._daily.on("track-started",this.handleTrackStarted.bind(this)),this._daily.on("track-stopped",this.handleTrackStopped.bind(this)),this._daily.on("participant-joined",this.handleParticipantJoined.bind(this)),this._daily.on("participant-left",this.handleParticipantLeft.bind(this)),this._daily.on("local-audio-level",this.handleLocalAudioLevel.bind(this)),this._daily.on("remote-participants-audio-level",this.handleRemoteAudioLevel.bind(this)),this._daily.on("app-message",this.handleAppMessage.bind(this)),this._daily.on("left-meeting",this.handleLeftMeeting.bind(this)),this._daily.on("nonfatal-error",this.handleNonFatalError.bind(this))}async disconnect(){this._daily.stopLocalAudioLevelObserver(),this._daily.stopRemoteParticipantsAudioLevelObserver(),await this._daily.leave(),await this._daily.destroy()}sendMessage(e){this._daily.sendAppMessage(e,"*")}handleAppMessage(e){e.data.label==="rtvi-ai"&&this._onMessage({id:e.data.id,type:e.data.type,data:e.data.data})}handleAvailableDevicesUpdated(e){var n,r,i,s,a,c;(r=(n=this._callbacks).onAvailableCamsUpdated)==null||r.call(n,e.availableDevices.filter(l=>l.kind==="videoinput")),(s=(i=this._callbacks).onAvailableMicsUpdated)==null||s.call(i,e.availableDevices.filter(l=>l.kind==="audioinput")),(c=(a=this._callbacks).onAvailableSpeakersUpdated)==null||c.call(a,e.availableDevices.filter(l=>l.kind==="audiooutput"))}handleSelectedDevicesUpdated(e){var n,r,i,s,a,c,l,u,d;((n=this._selectedCam)==null?void 0:n.deviceId)!==e.devices.camera&&(this._selectedCam=e.devices.camera,(i=(r=this._callbacks).onCamUpdated)==null||i.call(r,e.devices.camera)),((s=this._selectedMic)==null?void 0:s.deviceId)!==e.devices.mic&&(this._selectedMic=e.devices.mic,(c=(a=this._callbacks).onMicUpdated)==null||c.call(a,e.devices.mic)),((l=this._selectedSpeaker)==null?void 0:l.deviceId)!==e.devices.speaker&&(this._selectedSpeaker=e.devices.speaker,(d=(u=this._callbacks).onSpeakerUpdated)==null||d.call(u,e.devices.speaker))}handleTrackStarted(e){var n,r,i,s;e.type==="screenAudio"||e.type==="screenVideo"?(r=(n=this._callbacks).onScreenTrackStarted)==null||r.call(n,e.track,e.participant?Ht(e.participant):void 0):(s=(i=this._callbacks).onTrackStarted)==null||s.call(i,e.track,e.participant?Ht(e.participant):void 0)}handleTrackStopped(e){var n,r,i,s;e.type==="screenAudio"||e.type==="screenVideo"?(r=(n=this._callbacks).onScreenTrackStopped)==null||r.call(n,e.track,e.participant?Ht(e.participant):void 0):(s=(i=this._callbacks).onTrackStopped)==null||s.call(i,e.track,e.participant?Ht(e.participant):void 0)}handleParticipantJoined(e){var r,i,s,a;const n=Ht(e.participant);(i=(r=this._callbacks).onParticipantJoined)==null||i.call(r,n),!n.local&&(this._botId=e.participant.session_id,(a=(s=this._callbacks).onBotConnected)==null||a.call(s,n))}handleParticipantLeft(e){var r,i,s,a;const n=Ht(e.participant);(i=(r=this._callbacks).onParticipantLeft)==null||i.call(r,n),!n.local&&(this._botId="",(a=(s=this._callbacks).onBotDisconnected)==null||a.call(s,n))}handleLocalAudioLevel(e){var n,r;(r=(n=this._callbacks).onLocalAudioLevel)==null||r.call(n,e.audioLevel)}handleRemoteAudioLevel(e){var i,s;const n=this._daily.participants(),r=Object.keys(e.participantsAudioLevel);for(let a=0;a<r.length;a++){const c=r[a],l=e.participantsAudioLevel[c];(s=(i=this._callbacks).onRemoteAudioLevel)==null||s.call(i,l,Ht(n[c]))}}handleLeftMeeting(){var e,n;this.state="disconnecting",this._botId="",(n=(e=this._callbacks).onDisconnected)==null||n.call(e)}handleNonFatalError(e){var n,r;switch(e.type){case"screen-share-error":(r=(n=this._callbacks).onScreenShareError)==null||r.call(n,e.errorMsg);break}}}const Ht=t=>({id:t.user_id,local:t.local,name:t.user_name});let ah=0;function Fe(t,e){const n=`atom${++ah}`,r={toString(){return n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=oh,r.write=ch),e&&(r.write=e),r}function oh(t){return t(this)}function ch(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const wc=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,Sc=t=>"init"in t,kc=t=>!!t.write,_r=new WeakMap,Vi=t=>{var e;return zi(t)&&!((e=_r.get(t))!=null&&e[1])},lh=(t,e)=>{const n=_r.get(t);n&&(n[1]=!0,n[0].forEach(r=>r(e)))},uh=t=>{if(_r.has(t))return;const e=[new Set,!1];_r.set(t,e);const n=()=>{e[1]=!0};t.then(n,n),t.onCancel=r=>{e[0].add(r)}},zi=t=>typeof(t==null?void 0:t.then)=="function",Ec=t=>"v"in t||"e"in t,wr=t=>{if("e"in t)throw t.e;return t.v},Cc=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},dh=(t,e,n,r)=>{var i;e.d.set(n,r.n),Vi(e.v)&&Cc(t,e.v,r),(i=r.m)==null||i.t.add(t)},fh=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Tc=(...t)=>{const[e,n,r,i,s,a]=t,c=j=>{let P=e(j);return P||(P={d:new Map,p:new Set,n:0},n(j,P),s==null||s(j,L)),P},l=new WeakMap,u=new Map,d=new Set,p=new Set,w=()=>{var j;const P=[],I=U=>{try{U()}catch(B){P.push(B)}};do{(j=L[fh])==null||j.call(L);const U=new Set,B=U.add.bind(U);u.forEach($=>{var W;return(W=$.m)==null?void 0:W.l.forEach(B)}),u.clear(),d.forEach(B),d.clear(),p.forEach(B),p.clear(),U.forEach(I),u.size&&A()}while(u.size||d.size||p.size);if(P.length)throw P[0]},b=(j,P,I)=>{const U="v"in P,B=P.v,$=Vi(P.v)?P.v:null;if(zi(I)){uh(I);for(const W of P.d.keys())Cc(j,I,c(W));P.v=I}else P.v=I;delete P.e,(!U||!Object.is(B,P.v))&&(++P.n,$&&lh($,I))},y=j=>{var P;const I=c(j);if(Ec(I)&&(I.m&&l.get(j)!==I.n||Array.from(I.d).every(([te,_e])=>y(te).n===_e)))return I;I.d.clear();let U=!0;const B=()=>{I.m&&(k(j,I),A(),w())},$=te=>{if(wc(j,te)){const Ue=c(te);if(!Ec(Ue))if(Sc(te))b(te,Ue,te.init);else throw new Error("no atom init");return wr(Ue)}const _e=y(te);try{return wr(_e)}finally{dh(j,I,te,_e),U||B()}};let W,ne;const he={get signal(){return W||(W=new AbortController),W.signal},get setSelf(){return!ne&&kc(j)&&(ne=(...te)=>{if(!U)return E(j,...te)}),ne}};try{const te=r(j,$,he);return b(j,I,te),zi(te)&&((P=te.onCancel)==null||P.call(te,()=>W==null?void 0:W.abort()),te.then(B,B)),I}catch(te){return delete I.v,I.e=te,++I.n,I}finally{U=!1}},_=j=>wr(y(j)),S=j=>{var P;const I=new Map;for(const U of((P=j.m)==null?void 0:P.t)||[]){const B=c(U);B.m&&I.set(U,B)}for(const U of j.p)I.set(U,c(U));return I},O=j=>{const P=[j];for(;P.length;){const I=P.pop();for(const[U,B]of S(I))l.has(U)||(l.set(U,B.n),P.push(B))}},A=()=>{var j;const P=[],I=new WeakSet,U=new WeakSet,B=Array.from(u);for(;B.length;){const[$,W]=B[B.length-1];if(U.has($)){B.pop();continue}if(I.has($)){l.get($)===W.n?P.push([$,W,W.n]):(l.delete($),u.set($,W)),U.add($),B.pop();continue}I.add($);for(const[ne,he]of S(W))I.has(ne)||B.push([ne,he])}for(let $=P.length-1;$>=0;--$){const[W,ne,he]=P[$];let te=!1;for(const _e of ne.d.keys())if(_e!==W&&u.has(_e)){te=!0;break}te&&(y(W),k(W,ne),he!==ne.n&&(u.set(W,ne),(j=ne.u)==null||j.call(ne))),l.delete(W)}},N=(j,...P)=>{let I=!0;const U=$=>wr(y($)),B=($,...W)=>{var ne;const he=c($);try{if(wc(j,$)){if(!Sc($))throw new Error("atom not writable");const te=he.n,_e=W[0];b($,he,_e),k($,he),te!==he.n&&(u.set($,he),(ne=he.u)==null||ne.call(he),O(he));return}else return N($,...W)}finally{I||(A(),w())}};try{return i(j,U,B,...P)}finally{I=!1}},E=(j,...P)=>{try{return N(j,...P)}finally{A(),w()}},k=(j,P)=>{var I;if(P.m&&!Vi(P.v)){for(const[U,B]of P.d)if(!P.m.d.has(U)){const $=c(U);M(U,$).t.add(j),P.m.d.add(U),B!==$.n&&(u.set(U,$),(I=$.u)==null||I.call($),O($))}for(const U of P.m.d||[])if(!P.d.has(U)){P.m.d.delete(U);const B=D(U,c(U));B==null||B.t.delete(j)}}},M=(j,P)=>{var I;if(!P.m){y(j);for(const U of P.d.keys())M(U,c(U)).t.add(j);if(P.m={l:new Set,d:new Set(P.d.keys()),t:new Set},(I=P.h)==null||I.call(P),kc(j)){const U=P.m,B=()=>{let $=!0;const W=(...ne)=>{try{return N(j,...ne)}finally{$||(A(),w())}};try{const ne=a(j,W);ne&&(U.u=()=>{$=!0;try{ne()}finally{$=!1}})}finally{$=!1}};p.add(B)}}return P.m},D=(j,P)=>{var I;if(P.m&&!P.m.l.size&&!Array.from(P.m.t).some(U=>{var B;return(B=c(U).m)==null?void 0:B.d.has(j)})){const U=P.m.u;U&&d.add(U),delete P.m,(I=P.h)==null||I.call(P);for(const B of P.d.keys()){const $=D(B,c(B));$==null||$.t.delete(j)}return}return P.m},L={get:_,set:E,sub:(j,P)=>{const I=c(j),B=M(j,I).l;return B.add(P),w(),()=>{B.delete(P),D(j,I),w()}},unstable_derive:j=>Tc(...j(...t))};return L},Wi=()=>{const t=new WeakMap;return Tc(n=>t.get(n),(n,r)=>t.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var i;return(i=n.unstable_onInit)==null?void 0:i.call(n,...r)},(n,...r)=>{var i;return(i=n.onMount)==null?void 0:i.call(n,...r)})};let Hi;const hh=()=>(Hi||(Hi=Wi()),Hi),Oc=J.createContext(void 0),Mc=t=>{const e=J.useContext(Oc);return(t==null?void 0:t.store)||e||hh()},ph=({children:t,store:e})=>{const n=J.useRef(void 0);return!e&&!n.current&&(n.current=Wi()),J.createElement(Oc.Provider,{value:e||n.current},t)},Gi=t=>typeof(t==null?void 0:t.then)=="function",Ac=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},mh=J.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(Ac(t),t)}),Ki=new WeakMap,Pc=t=>{let e=Ki.get(t);return e||(e=new Promise((n,r)=>{let i=t;const s=l=>u=>{i===l&&n(u)},a=l=>u=>{i===l&&r(u)},c=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(u=>{Gi(u)?(Ki.set(u,e),i=u,u.then(s(u),a(u)),c(u)):n(u)})};t.then(s(t),a(t)),c(t)}),Ki.set(t,e)),e};function xc(t,e){const n=Mc(e),[[r,i,s],a]=J.useReducer(u=>{const d=n.get(t);return Object.is(u[0],d)&&u[1]===n&&u[2]===t?u:[d,n,t]},void 0,()=>[n.get(t),n,t]);let c=r;(i!==n||s!==t)&&(a(),c=n.get(t));const l=e==null?void 0:e.delay;if(J.useEffect(()=>{const u=n.sub(t,()=>{if(typeof l=="number"){const d=n.get(t);Gi(d)&&Ac(Pc(d)),setTimeout(a,l);return}a()});return a(),u},[n,t,l]),J.useDebugValue(c),Gi(c)){const u=Pc(c);return mh(u)}return c}function Lc(t,e){const n=Mc(e);return J.useCallback((...i)=>n.set(t,...i),[n,t])}function gh(t,e){return[xc(t,e),Lc(t,e)]}function yh(t,e){let n=null;const r=new Map,i=new Set,s=c=>{let l;if(e===void 0)l=r.get(c);else for(const[d,p]of r)if(e(d,c)){l=p;break}if(l!==void 0)if(n!=null&&n(l[1],c))s.remove(c);else return l[0];const u=t(c);return r.set(c,[u,Date.now()]),a("CREATE",c,u),u};function a(c,l,u){for(const d of i)d({type:c,param:l,atom:u})}return s.unstable_listen=c=>(i.add(c),()=>{i.delete(c)}),s.getParams=()=>r.keys(),s.remove=c=>{if(e===void 0){if(!r.has(c))return;const[l]=r.get(c);r.delete(c),a("REMOVE",c,l)}else for(const[l,[u]]of r)if(e(l,c)){r.delete(l),a("REMOVE",l,u);break}},s.setShouldRemove=c=>{if(n=c,!!n)for(const[l,[u,d]]of r)n(d,l)&&(r.delete(l),a("REMOVE",l,u))},s}const vh=t=>typeof(t==null?void 0:t.then)=="function";function bh(t=()=>{try{return window.localStorage}catch{return}},e){var n;let r,i;const s={getItem:(l,u)=>{var d,p;const w=y=>{if(y=y||"",r!==y){try{i=JSON.parse(y,e==null?void 0:e.reviver)}catch{return u}r=y}return i},b=(p=(d=t())==null?void 0:d.getItem(l))!=null?p:null;return vh(b)?b.then(w):w(b)},setItem:(l,u)=>{var d;return(d=t())==null?void 0:d.setItem(l,JSON.stringify(u,void 0))},removeItem:l=>{var u;return(u=t())==null?void 0:u.removeItem(l)}},a=l=>(u,d,p)=>l(u,w=>{let b;try{b=JSON.parse(w||"")}catch{b=p}d(b)});let c;try{c=(n=t())==null?void 0:n.subscribe}catch{}return!c&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(c=(l,u)=>{if(!(t()instanceof window.Storage))return()=>{};const d=p=>{p.storageArea===t()&&p.key===l&&u(p.newValue)};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}}),c&&(s.subscribe=a(c)),s}bh();function _h(t,e){const n=J.useMemo(()=>Fe(null,(r,i,...s)=>t(r,i,...s)),[t]);return Lc(n,e)}const wh=Wi(),jc=J.createContext({}),Rc=({children:t,client:e,jotaiStore:n=wh})=>X.jsx(ph,{store:n,children:X.jsx(jc.Provider,{value:{client:e},children:t})});Rc.displayName="RTVIClientProvider";const Yi=()=>{const{client:t}=J.useContext(jc);return t},Sr=(t,e)=>{const n=Yi();J.useEffect(()=>{if(n)return n.on(t,e),()=>{n.off(t,e)}},[t,e,n])},Sh=Fe(null),kh=Fe(null),Eh=Fe(null),Ch=Fe(null),Th=Fe(null),Oh=Fe(null),Dc=yh(({local:t,trackType:e})=>{if(t)switch(e){case"audio":return Sh;case"screenAudio":return Eh;case"screenVideo":return Ch;case"video":return kh}return e==="audio"?Th:Oh}),Qi=(t,e)=>{const n=Yi(),r=xc(Dc({local:e==="local",trackType:t})),i=_h(J.useCallback((s,a,c,l,u)=>{const d=Dc({local:u,trackType:l}),p=s(d);(p==null?void 0:p.id)!==c.id&&a(d,c)},[e,r,t]));return Sr(G.TrackStarted,J.useCallback((s,a)=>{i(s,s.kind,!!(a!=null&&a.local))},[])),Sr(G.ScreenTrackStarted,J.useCallback((s,a)=>{const c=s.kind==="audio"?"screenAudio":"screenVideo";i(s,c,!!(a!=null&&a.local))},[])),J.useEffect(()=>{var c;if(!n)return;const s=n.tracks(),a=(c=s==null?void 0:s[e])==null?void 0:c[t];a&&i(a,t,e==="local")},[e,t,i,n]),r},Ic=()=>{const t=J.useRef(null),e=Qi("audio","bot");return J.useEffect(()=>{!t.current||!e||t.current.srcObject&&t.current.srcObject.getAudioTracks()[0].id===e.id||(t.current.srcObject=new MediaStream([e]))},[e]),Sr(G.SpeakerUpdated,J.useCallback(n=>{t.current&&typeof t.current.setSinkId=="function"&&t.current.setSinkId(n.deviceId)},[])),X.jsx(X.Fragment,{children:X.jsx("audio",{ref:t,autoPlay:!0})})};Ic.displayName="RTVIClientAudio";function Mh(...t){return J.useCallback(e=>{for(let n=0;n<t.length;n++){const r=t[n];typeof r=="function"?r(e):r&&typeof r=="object"&&(r.current=e)}},t)}var Ah=Mh;const Ph=J.forwardRef(function({participant:e="local",fit:n="contain",mirror:r,onResize:i,style:s={},trackType:a="video",...c},l){const u=Qi(a,e),d=J.useRef(null),p=Ah(d,l);return J.useEffect(function(){const b=d.current;if(!b)return;const y=()=>{const N=b.play();N!==void 0&&N.then(()=>{b.controls=!1}).catch(E=>{b.controls=!0,console.warn("Failed to play video",E)})},_=()=>{b.paused&&y()},S=()=>{b.style.transform="scale(1)"},O=()=>{b.style.transform="",setTimeout(()=>{b.paused&&y()},100)},A=()=>{document.visibilityState!=="hidden"&&b.paused&&y()};return b.addEventListener("canplay",_),b.addEventListener("enterpictureinpicture",S),b.addEventListener("leavepictureinpicture",O),document.addEventListener("visibilitychange",A),()=>{b.removeEventListener("canplay",_),b.removeEventListener("enterpictureinpicture",S),b.removeEventListener("leavepictureinpicture",O),document.removeEventListener("visibilitychange",A)}},[]),J.useEffect(function(){const b=d.current;if(!(!b||!u))return b.srcObject=new MediaStream([u]),b.load(),()=>{b.srcObject=null,b.load()}},[u,u==null?void 0:u.id]),J.useEffect(function(){const b=d.current;if(!i||!b)return;let y;function _(){y&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{const S=d.current;if(!S||document.hidden)return;const O=S.videoWidth,A=S.videoHeight;O&&A&&(i==null||i({aspectRatio:O/A,height:A,width:O}))})}return _(),b.addEventListener("loadedmetadata",_),b.addEventListener("resize",_),()=>{y&&cancelAnimationFrame(y),b.removeEventListener("loadedmetadata",_),b.removeEventListener("resize",_)}},[i]),X.jsx("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:p,style:{objectFit:n,transform:r?"scale(-1, 1)":"",...s},...c})});Ph.displayName="RTVIClientVideo",Fe([]),Fe([]),Fe([]),Fe({}),Fe({}),Fe({});const xh=Fe("disconnected"),Lh=()=>{const[t,e]=gh(xh);return Sr(G.TransportStateChanged,e),t},jh=J.memo(({backgroundColor:t="transparent",barColor:e="black",barWidth:n=30,barGap:r=12,barMaxHeight:i=120,participantType:s})=>{const a=J.useRef(null),c=Qi("audio",s);return J.useEffect(()=>{if(!a.current)return;const l=5*n+4*r,u=i,d=a.current,p=2,w=()=>{d.width=l*p,d.height=u*p,d.style.width=`${l}px`,d.style.height=`${u}px`,b.lineCap="round",b.scale(p,p)},b=d.getContext("2d");if(w(),!c)return;const y=new AudioContext,_=y.createMediaStreamSource(new MediaStream([c])),S=y.createAnalyser();S.fftSize=1024,_.connect(S);const O=new Uint8Array(S.frequencyBinCount);b.lineCap="round";const A=[{startFreq:85,endFreq:255,smoothValue:0},{startFreq:255,endFreq:500,smoothValue:0},{startFreq:500,endFreq:2e3,smoothValue:0},{startFreq:2e3,endFreq:4e3,smoothValue:0},{startFreq:4e3,endFreq:8e3,smoothValue:0}],N=M=>{const D=y.sampleRate/2;return Math.round(M/D*(S.frequencyBinCount-1))};function E(){S.getByteFrequencyData(O),b.clearRect(0,0,d.width/p,d.height/p),b.fillStyle=t,b.fillRect(0,0,d.width/p,d.height/p);let M=!1;const D=A.length*n+(A.length-1)*r,F=(d.width/p-D)/2,z=n/2;A.forEach((L,j)=>{const P=N(L.startFreq),I=N(L.endFreq),U=O.slice(P,I),B=U.reduce((_e,Ue)=>_e+Ue,0)/U.length,$=.2;B<1?L.smoothValue=Math.max(L.smoothValue-$*5,0):(L.smoothValue=L.smoothValue+(B-L.smoothValue)*$,M=!0);const W=F+j*(n+r),ne=Math.min(L.smoothValue/255*i,i),he=Math.max(d.height/p/2-ne/2,z),te=Math.min(d.height/p/2+ne/2,d.height/p-z);L.smoothValue>0?(b.beginPath(),b.moveTo(W+n/2,he),b.lineTo(W+n/2,te),b.lineWidth=n,b.strokeStyle=e,b.stroke()):(b.beginPath(),b.arc(W+n/2,d.height/p/2,z,0,2*Math.PI),b.fillStyle=e,b.fill(),b.closePath())}),M||k(z,e),requestAnimationFrame(E)}function k(M,D){const F=A.length*n+(A.length-1)*r,z=(d.width/p-F)/2,L=d.height/p/2;A.forEach((j,P)=>{const I=z+P*(n+r);b.beginPath(),b.arc(I+n/2,L,M,0,2*Math.PI),b.fillStyle=D,b.fill(),b.closePath()})}return E(),window.addEventListener("resize",w),()=>{y.close(),window.removeEventListener("resize",w)}},[t,e,r,i,n,c]),X.jsx("canvas",{ref:a,style:{display:"block",width:"100%",height:"100%"}})});jh.displayName="VoiceVisualizer";function Nc(t,e){return function(){return t.apply(e,arguments)}}const{toString:Rh}=Object.prototype,{getPrototypeOf:Xi}=Object,kr=(t=>e=>{const n=Rh.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),st=t=>(t=t.toLowerCase(),e=>kr(e)===t),Er=t=>e=>typeof e===t,{isArray:pn}=Array,jn=Er("undefined");function Dh(t){return t!==null&&!jn(t)&&t.constructor!==null&&!jn(t.constructor)&&We(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Fc=st("ArrayBuffer");function Ih(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Fc(t.buffer),e}const Nh=Er("string"),We=Er("function"),Bc=Er("number"),Cr=t=>t!==null&&typeof t=="object",Fh=t=>t===!0||t===!1,Tr=t=>{if(kr(t)!=="object")return!1;const e=Xi(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Bh=st("Date"),Uh=st("File"),$h=st("Blob"),qh=st("FileList"),Jh=t=>Cr(t)&&We(t.pipe),Vh=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||We(t.append)&&((e=kr(t))==="formdata"||e==="object"&&We(t.toString)&&t.toString()==="[object FormData]"))},zh=st("URLSearchParams"),[Wh,Hh,Gh,Kh]=["ReadableStream","Request","Response","Headers"].map(st),Yh=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rn(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),pn(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let c;for(r=0;r<a;r++)c=s[r],e.call(null,t[c],c,t)}}function Uc(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Gt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$c=t=>!jn(t)&&t!==Gt;function Zi(){const{caseless:t}=$c(this)&&this||{},e={},n=(r,i)=>{const s=t&&Uc(e,i)||i;Tr(e[s])&&Tr(r)?e[s]=Zi(e[s],r):Tr(r)?e[s]=Zi({},r):pn(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Rn(arguments[r],n);return e}const Qh=(t,e,n,{allOwnKeys:r}={})=>(Rn(e,(i,s)=>{n&&We(i)?t[s]=Nc(i,n):t[s]=i},{allOwnKeys:r}),t),Xh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Zh=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ep=(t,e,n,r)=>{let i,s,a;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!c[a]&&(e[a]=t[a],c[a]=!0);t=n!==!1&&Xi(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},tp=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},np=t=>{if(!t)return null;if(pn(t))return t;let e=t.length;if(!Bc(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},rp=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xi(Uint8Array)),ip=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},sp=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},ap=st("HTMLFormElement"),op=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),qc=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cp=st("RegExp"),Jc=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Rn(n,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(r[s]=a||i)}),Object.defineProperties(t,r)},lp=t=>{Jc(t,(e,n)=>{if(We(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(We(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},up=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return pn(t)?r(t):r(String(t).split(e)),n},dp=()=>{},fp=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,es="abcdefghijklmnopqrstuvwxyz",Vc="0123456789",zc={DIGIT:Vc,ALPHA:es,ALPHA_DIGIT:es+es.toUpperCase()+Vc},hp=(t=16,e=zc.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function pp(t){return!!(t&&We(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const mp=t=>{const e=new Array(10),n=(r,i)=>{if(Cr(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=pn(r)?[]:{};return Rn(r,(a,c)=>{const l=n(a,i+1);!jn(l)&&(s[c]=l)}),e[i]=void 0,s}}return r};return n(t,0)},gp=st("AsyncFunction"),yp=t=>t&&(Cr(t)||We(t))&&We(t.then)&&We(t.catch),Wc=((t,e)=>t?setImmediate:e?((n,r)=>(Gt.addEventListener("message",({source:i,data:s})=>{i===Gt&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Gt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",We(Gt.postMessage)),vp=typeof queueMicrotask<"u"?queueMicrotask.bind(Gt):typeof process<"u"&&process.nextTick||Wc,C={isArray:pn,isArrayBuffer:Fc,isBuffer:Dh,isFormData:Vh,isArrayBufferView:Ih,isString:Nh,isNumber:Bc,isBoolean:Fh,isObject:Cr,isPlainObject:Tr,isReadableStream:Wh,isRequest:Hh,isResponse:Gh,isHeaders:Kh,isUndefined:jn,isDate:Bh,isFile:Uh,isBlob:$h,isRegExp:cp,isFunction:We,isStream:Jh,isURLSearchParams:zh,isTypedArray:rp,isFileList:qh,forEach:Rn,merge:Zi,extend:Qh,trim:Yh,stripBOM:Xh,inherits:Zh,toFlatObject:ep,kindOf:kr,kindOfTest:st,endsWith:tp,toArray:np,forEachEntry:ip,matchAll:sp,isHTMLForm:ap,hasOwnProperty:qc,hasOwnProp:qc,reduceDescriptors:Jc,freezeMethods:lp,toObjectSet:up,toCamelCase:op,noop:dp,toFiniteNumber:fp,findKey:Uc,global:Gt,isContextDefined:$c,ALPHABET:zc,generateString:hp,isSpecCompliantForm:pp,toJSONObject:mp,isAsyncFn:gp,isThenable:yp,setImmediate:Wc,asap:vp};function Z(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}C.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}});const Hc=Z.prototype,Gc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gc[t]={value:t}}),Object.defineProperties(Z,Gc),Object.defineProperty(Hc,"isAxiosError",{value:!0}),Z.from=(t,e,n,r,i,s)=>{const a=Object.create(Hc);return C.toFlatObject(t,a,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),Z.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const bp=null;function ts(t){return C.isPlainObject(t)||C.isArray(t)}function Kc(t){return C.endsWith(t,"[]")?t.slice(0,-2):t}function Yc(t,e,n){return t?t.concat(e).map(function(i,s){return i=Kc(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function _p(t){return C.isArray(t)&&!t.some(ts)}const wp=C.toFlatObject(C,{},null,function(e){return/^is[A-Z]/.test(e)});function Or(t,e,n){if(!C.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=C.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!C.isUndefined(S[_])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(e);if(!C.isFunction(i))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(C.isDate(y))return y.toISOString();if(!l&&C.isBlob(y))throw new Z("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(y)||C.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,_,S){let O=y;if(y&&!S&&typeof y=="object"){if(C.endsWith(_,"{}"))_=r?_:_.slice(0,-2),y=JSON.stringify(y);else if(C.isArray(y)&&_p(y)||(C.isFileList(y)||C.endsWith(_,"[]"))&&(O=C.toArray(y)))return _=Kc(_),O.forEach(function(N,E){!(C.isUndefined(N)||N===null)&&e.append(a===!0?Yc([_],E,s):a===null?_:_+"[]",u(N))}),!1}return ts(y)?!0:(e.append(Yc(S,_,s),u(y)),!1)}const p=[],w=Object.assign(wp,{defaultVisitor:d,convertValue:u,isVisitable:ts});function b(y,_){if(!C.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));p.push(y),C.forEach(y,function(O,A){(!(C.isUndefined(O)||O===null)&&i.call(e,O,C.isString(A)?A.trim():A,_,w))===!0&&b(O,_?_.concat(A):[A])}),p.pop()}}if(!C.isObject(t))throw new TypeError("data must be an object");return b(t),e}function Qc(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ns(t,e){this._pairs=[],t&&Or(t,this,e)}const Xc=ns.prototype;Xc.append=function(e,n){this._pairs.push([e,n])},Xc.toString=function(e){const n=e?function(r){return e.call(this,r,Qc)}:Qc;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Sp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zc(t,e,n){if(!e)return t;const r=n&&n.encode||Sp;C.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=C.isURLSearchParams(e)?e.toString():new ns(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class el{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){C.forEach(this.handlers,function(r){r!==null&&e(r)})}}const tl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kp={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:ns,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},rs=typeof window<"u"&&typeof document<"u",is=typeof navigator=="object"&&navigator||void 0,Ep=rs&&(!is||["ReactNative","NativeScript","NS"].indexOf(is.product)<0),Cp=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tp=rs&&window.location.href||"http://localhost",je={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rs,hasStandardBrowserEnv:Ep,hasStandardBrowserWebWorkerEnv:Cp,navigator:is,origin:Tp},Symbol.toStringTag,{value:"Module"})),...kp};function Op(t,e){return Or(t,new je.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return je.isNode&&C.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Mp(t){return C.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ap(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function nl(t){function e(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),l=s>=n.length;return a=!a&&C.isArray(i)?i.length:a,l?(C.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!c):((!i[a]||!C.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&C.isArray(i[a])&&(i[a]=Ap(i[a])),!c)}if(C.isFormData(t)&&C.isFunction(t.entries)){const n={};return C.forEachEntry(t,(r,i)=>{e(Mp(r),i,n,0)}),n}return null}function Pp(t,e,n){if(C.isString(t))try{return(e||JSON.parse)(t),C.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Dn={transitional:tl,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=C.isObject(e);if(s&&C.isHTMLForm(e)&&(e=new FormData(e)),C.isFormData(e))return i?JSON.stringify(nl(e)):e;if(C.isArrayBuffer(e)||C.isBuffer(e)||C.isStream(e)||C.isFile(e)||C.isBlob(e)||C.isReadableStream(e))return e;if(C.isArrayBufferView(e))return e.buffer;if(C.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Op(e,this.formSerializer).toString();if((c=C.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Or(c?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Pp(e)):e}],transformResponse:[function(e){const n=this.transitional||Dn.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(C.isResponse(e)||C.isReadableStream(e))return e;if(e&&C.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(a)throw c.name==="SyntaxError"?Z.from(c,Z.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],t=>{Dn.headers[t]={}});const xp=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Lp=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&xp[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},rl=Symbol("internals");function In(t){return t&&String(t).trim().toLowerCase()}function Mr(t){return t===!1||t==null?t:C.isArray(t)?t.map(Mr):String(t)}function jp(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Rp=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ss(t,e,n,r,i){if(C.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!C.isString(e)){if(C.isString(r))return e.indexOf(r)!==-1;if(C.isRegExp(r))return r.test(e)}}function Dp(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Ip(t,e){const n=C.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}class Be{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(c,l,u){const d=In(l);if(!d)throw new Error("header name must be a non-empty string");const p=C.findKey(i,d);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||l]=Mr(c))}const a=(c,l)=>C.forEach(c,(u,d)=>s(u,d,l));if(C.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(C.isString(e)&&(e=e.trim())&&!Rp(e))a(Lp(e),n);else if(C.isHeaders(e))for(const[c,l]of e.entries())s(l,c,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=In(e),e){const r=C.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return jp(i);if(C.isFunction(n))return n.call(this,i,r);if(C.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=In(e),e){const r=C.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||ss(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=In(a),a){const c=C.findKey(r,a);c&&(!n||ss(r,r[c],c,n))&&(delete r[c],i=!0)}}return C.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||ss(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return C.forEach(this,(i,s)=>{const a=C.findKey(r,s);if(a){n[a]=Mr(i),delete n[s];return}const c=e?Dp(s):String(s).trim();c!==s&&delete n[s],n[c]=Mr(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return C.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&C.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[rl]=this[rl]={accessors:{}}).accessors,i=this.prototype;function s(a){const c=In(a);r[c]||(Ip(i,a),r[c]=!0)}return C.isArray(e)?e.forEach(s):s(e),this}}Be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),C.reduceDescriptors(Be.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}}),C.freezeMethods(Be);function as(t,e){const n=this||Dn,r=e||n,i=Be.from(r.headers);let s=r.data;return C.forEach(t,function(c){s=c.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function il(t){return!!(t&&t.__CANCEL__)}function mn(t,e,n){Z.call(this,t??"canceled",Z.ERR_CANCELED,e,n),this.name="CanceledError"}C.inherits(mn,Z,{__CANCEL__:!0});function sl(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Z("Request failed with status code "+n.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Np(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Fp(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[s];a||(a=u),n[i]=l,r[i]=u;let p=s,w=0;for(;p!==i;)w+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-a<e)return;const b=d&&u-d;return b?Math.round(w*1e3/b):void 0}}function Bp(t,e){let n=0,r=1e3/e,i,s;const a=(u,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),p=d-n;p>=r?a(u,d):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},r-p)))},()=>i&&a(i)]}const Ar=(t,e,n=3)=>{let r=0;const i=Fp(50,250);return Bp(s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,l=a-r,u=i(l),d=a<=c;r=a;const p={loaded:a,total:c,progress:c?a/c:void 0,bytes:l,rate:u||void 0,estimated:u&&c&&d?(c-a)/u:void 0,event:s,lengthComputable:c!=null,[e?"download":"upload"]:!0};t(p)},n)},al=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},ol=t=>(...e)=>C.asap(()=>t(...e)),Up=je.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,je.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,$p=je.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const a=[t+"="+encodeURIComponent(e)];C.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),C.isString(r)&&a.push("path="+r),C.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function qp(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Jp(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function cl(t,e){return t&&!qp(e)?Jp(t,e):e}const ll=t=>t instanceof Be?{...t}:t;function Kt(t,e){e=e||{};const n={};function r(u,d,p,w){return C.isPlainObject(u)&&C.isPlainObject(d)?C.merge.call({caseless:w},u,d):C.isPlainObject(d)?C.merge({},d):C.isArray(d)?d.slice():d}function i(u,d,p,w){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u,p,w)}else return r(u,d,p,w)}function s(u,d){if(!C.isUndefined(d))return r(void 0,d)}function a(u,d){if(C.isUndefined(d)){if(!C.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function c(u,d,p){if(p in e)return r(u,d);if(p in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(u,d,p)=>i(ll(u),ll(d),p,!0)};return C.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,w=p(t[d],e[d],d);C.isUndefined(w)&&p!==c||(n[d]=w)}),n}const ul=t=>{const e=Kt({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=e;e.headers=a=Be.from(a),e.url=Zc(cl(e.baseURL,e.url),t.params,t.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let l;if(C.isFormData(n)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(je.hasStandardBrowserEnv&&(r&&C.isFunction(r)&&(r=r(e)),r||r!==!1&&Up(e.url))){const u=i&&s&&$p.read(s);u&&a.set(i,u)}return e},Vp=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(n,r){const i=ul(t);let s=i.data;const a=Be.from(i.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:u}=i,d,p,w,b,y;function _(){b&&b(),y&&y(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function O(){if(!S)return;const N=Be.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),k={data:!c||c==="text"||c==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:N,config:t,request:S};sl(function(D){n(D),_()},function(D){r(D),_()},k),S=null}"onloadend"in S?S.onloadend=O:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(O)},S.onabort=function(){S&&(r(new Z("Request aborted",Z.ECONNABORTED,t,S)),S=null)},S.onerror=function(){r(new Z("Network Error",Z.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||tl;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new Z(E,k.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,t,S)),S=null},s===void 0&&a.setContentType(null),"setRequestHeader"in S&&C.forEach(a.toJSON(),function(E,k){S.setRequestHeader(k,E)}),C.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),c&&c!=="json"&&(S.responseType=i.responseType),u&&([w,y]=Ar(u,!0),S.addEventListener("progress",w)),l&&S.upload&&([p,b]=Ar(l),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(d=N=>{S&&(r(!N||N.type?new mn(null,t,S):N),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const A=Np(i.url);if(A&&je.protocols.indexOf(A)===-1){r(new Z("Unsupported protocol "+A+":",Z.ERR_BAD_REQUEST,t));return}S.send(s||null)})},zp=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(u){if(!i){i=!0,c();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Z?d:new mn(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,s(new Z(`timeout ${e} of ms exceeded`,Z.ETIMEDOUT))},e);const c=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>C.asap(c),l}},Wp=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Hp=async function*(t,e){for await(const n of Gp(t))yield*Wp(n,e)},Gp=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},dl=(t,e,n,r)=>{const i=Hp(t,e);let s=0,a,c=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await i.next();if(u){c(),l.close();return}let p=d.byteLength;if(n){let w=s+=p;n(w)}l.enqueue(new Uint8Array(d))}catch(u){throw c(u),u}},cancel(l){return c(l),i.return()}},{highWaterMark:2})},Pr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fl=Pr&&typeof ReadableStream=="function",Kp=Pr&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),hl=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Yp=fl&&hl(()=>{let t=!1;const e=new Request(je.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),pl=64*1024,os=fl&&hl(()=>C.isReadableStream(new Response("").body)),xr={stream:os&&(t=>t.body)};Pr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xr[e]&&(xr[e]=C.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Z(`Response type '${e}' is not supported`,Z.ERR_NOT_SUPPORT,r)})})})(new Response);const Qp=async t=>{if(t==null)return 0;if(C.isBlob(t))return t.size;if(C.isSpecCompliantForm(t))return(await new Request(je.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(C.isArrayBufferView(t)||C.isArrayBuffer(t))return t.byteLength;if(C.isURLSearchParams(t)&&(t=t+""),C.isString(t))return(await Kp(t)).byteLength},Xp=async(t,e)=>{const n=C.toFiniteNumber(t.getContentLength());return n??Qp(e)},cs={http:bp,xhr:Vp,fetch:Pr&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:c,onUploadProgress:l,responseType:u,headers:d,withCredentials:p="same-origin",fetchOptions:w}=ul(t);u=u?(u+"").toLowerCase():"text";let b=zp([i,s&&s.toAbortSignal()],a),y;const _=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let S;try{if(l&&Yp&&n!=="get"&&n!=="head"&&(S=await Xp(d,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(C.isFormData(r)&&(M=k.headers.get("content-type"))&&d.setContentType(M),k.body){const[D,F]=al(S,Ar(ol(l)));r=dl(k.body,pl,D,F)}}C.isString(p)||(p=p?"include":"omit");const O="credentials"in Request.prototype;y=new Request(e,{...w,signal:b,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:O?p:void 0});let A=await fetch(y);const N=os&&(u==="stream"||u==="response");if(os&&(c||N&&_)){const k={};["status","statusText","headers"].forEach(z=>{k[z]=A[z]});const M=C.toFiniteNumber(A.headers.get("content-length")),[D,F]=c&&al(M,Ar(ol(c),!0))||[];A=new Response(dl(A.body,pl,D,()=>{F&&F(),_&&_()}),k)}u=u||"text";let E=await xr[C.findKey(xr,u)||"text"](A,t);return!N&&_&&_(),await new Promise((k,M)=>{sl(k,M,{data:E,headers:Be.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:y})})}catch(O){throw _&&_(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,t,y),{cause:O.cause||O}):Z.from(O,O&&O.code,t,y)}})};C.forEach(cs,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ml=t=>`- ${t}`,Zp=t=>C.isFunction(t)||t===null||t===!1,gl={getAdapter:t=>{t=C.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let a;if(r=n,!Zp(n)&&(r=cs[(a=String(n)).toLowerCase()],r===void 0))throw new Z(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(ml).join(`
`):" "+ml(s[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:cs};function ls(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new mn(null,t)}function yl(t){return ls(t),t.headers=Be.from(t.headers),t.data=as.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gl.getAdapter(t.adapter||Dn.adapter)(t).then(function(r){return ls(t),r.data=as.call(t,t.transformResponse,r),r.headers=Be.from(r.headers),r},function(r){return il(r)||(ls(t),r&&r.response&&(r.response.data=as.call(t,t.transformResponse,r.response),r.response.headers=Be.from(r.response.headers))),Promise.reject(r)})}const vl="1.7.9",Lr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Lr[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const bl={};Lr.transitional=function(e,n,r){function i(s,a){return"[Axios v"+vl+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,c)=>{if(e===!1)throw new Z(i(a," has been removed"+(n?" in "+n:"")),Z.ERR_DEPRECATED);return n&&!bl[a]&&(bl[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,c):!0}},Lr.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function em(t,e,n){if(typeof t!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const c=t[s],l=c===void 0||a(c,s,t);if(l!==!0)throw new Z("option "+s+" must be "+l,Z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Z("Unknown option "+s,Z.ERR_BAD_OPTION)}}const jr={assertOptions:em,validators:Lr},dt=jr.validators;class Yt{constructor(e){this.defaults=e,this.interceptors={request:new el,response:new el}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Kt(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&jr.assertOptions(r,{silentJSONParsing:dt.transitional(dt.boolean),forcedJSONParsing:dt.transitional(dt.boolean),clarifyTimeoutError:dt.transitional(dt.boolean)},!1),i!=null&&(C.isFunction(i)?n.paramsSerializer={serialize:i}:jr.assertOptions(i,{encode:dt.function,serialize:dt.function},!0)),jr.assertOptions(n,{baseUrl:dt.spelling("baseURL"),withXsrfToken:dt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&C.merge(s.common,s[n.method]);s&&C.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=Be.concat(a,s);const c=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(l=l&&_.synchronous,c.unshift(_.fulfilled,_.rejected))});const u=[];this.interceptors.response.forEach(function(_){u.push(_.fulfilled,_.rejected)});let d,p=0,w;if(!l){const y=[yl.bind(this),void 0];for(y.unshift.apply(y,c),y.push.apply(y,u),w=y.length,d=Promise.resolve(n);p<w;)d=d.then(y[p++],y[p++]);return d}w=c.length;let b=n;for(p=0;p<w;){const y=c[p++],_=c[p++];try{b=y(b)}catch(S){_.call(this,S);break}}try{d=yl.call(this,b)}catch(y){return Promise.reject(y)}for(p=0,w=u.length;p<w;)d=d.then(u[p++],u[p++]);return d}getUri(e){e=Kt(this.defaults,e);const n=cl(e.baseURL,e.url);return Zc(n,e.params,e.paramsSerializer)}}C.forEach(["delete","get","head","options"],function(e){Yt.prototype[e]=function(n,r){return this.request(Kt(r||{},{method:e,url:n,data:(r||{}).data}))}}),C.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,c){return this.request(Kt(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Yt.prototype[e]=n(),Yt.prototype[e+"Form"]=n(!0)});class us{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(c=>{r.subscribe(c),s=c}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,c){r.reason||(r.reason=new mn(s,a,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new us(function(i){e=i}),cancel:e}}}function tm(t){return function(n){return t.apply(null,n)}}function nm(t){return C.isObject(t)&&t.isAxiosError===!0}const ds={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ds).forEach(([t,e])=>{ds[e]=t});function _l(t){const e=new Yt(t),n=Nc(Yt.prototype.request,e);return C.extend(n,Yt.prototype,e,{allOwnKeys:!0}),C.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return _l(Kt(t,i))},n}const be=_l(Dn);be.Axios=Yt,be.CanceledError=mn,be.CancelToken=us,be.isCancel=il,be.VERSION=vl,be.toFormData=Or,be.AxiosError=Z,be.Cancel=be.CanceledError,be.all=function(e){return Promise.all(e)},be.spread=tm,be.isAxiosError=nm,be.mergeConfig=Kt,be.AxiosHeaders=Be,be.formToJSON=t=>nl(C.isHTMLForm(t)?new FormData(t):t),be.getAdapter=gl.getAdapter,be.HttpStatusCode=ds,be.default=be;const wl=t=>{let e;const n=new Set,r=(u,d)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const w=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(b=>b(e,w))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,i,c);return c},rm=t=>t?wl(t):wl,im=t=>t;function sm(t,e=im){const n=J.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return J.useDebugValue(n),n}const am=t=>{const e=rm(t),n=r=>sm(e,r);return Object.assign(n,e),n},Rr=(t=>am(t))(t=>({sessionId:null,setSessionId:e=>t({sessionId:e}),getSessionId:()=>Rr.getState().sessionId}));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sl=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=J.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},l)=>J.createElement("svg",{ref:l,...cm,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Sl("lucide",i),...c},[...a.map(([u,d])=>J.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=(t,e)=>{const n=J.forwardRef(({className:r,...i},s)=>J.createElement(lm,{ref:s,iconNode:e,className:Sl(`lucide-${om(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=fs("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=fs("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=fs("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),kl={baseURL:"https://app.snowie.ai"};function hm(t){const e=Yi();J.useState("");const[n,r]=J.useState(!1),[i,s]=J.useState(null),a=Lh(),c=Rr(L=>L.setSessionId),l=Rr(L=>L.sessionId);console.log(l);const[u,d]=J.useState([]),[p,w]=J.useState(!1),[b,y]=J.useState(!1),[_,S]=J.useState(""),[O,A]=J.useState([]);J.useState([]);const[N,E]=J.useState("idle"),k=J.useMemo(()=>Array.from({length:180},()=>({x:Math.random()*500-250,y:Math.random()*500-250,size:.6+Math.random()*1.2,opacity:.3+Math.random()*.4,hue:Math.random()*15-7.5,delay:Math.random()*.8,scale:.98+Math.random()*.25})),[]),M=J.useMemo(()=>Array.from({length:5},(L,j)=>({radius:140+j*28,particles:Array.from({length:45},()=>({angle:Math.random()*Math.PI*2,speed:.18+Math.random()*.1,size:.8+Math.random()*.7,opacity:.3+Math.random()*.35,hueRotate:Math.random()*15-7.5,scale:.98+Math.random()*.2}))})),[]);J.useEffect(()=>{switch(a){case"initialized":E("ready");break;case"authenticating":case"connecting":E("connecting");break;case"connected":case"ready":E("connected");break;default:E("idle")}},[a]),J.useEffect(()=>{if(a!=="connected")return;(async()=>{try{const j=await be.post("api/start-transcription/",{schema_name:t.schemaName,call_session_id:l},kl);console.log("Transcription API Response:",j.data)}catch(j){console.error("Failed to start transcription:",j)}})()},[a,t,l]),J.useEffect(()=>{if(!e)return;const L=new Jr({callbacks:{}});return s(L),()=>{e.unregisterHelper("llm")}},[e]),e==null||e.on(G.BotStartedSpeaking,()=>{set}),e==null||e.on(G.BotStoppedSpeaking,()=>S(O)),e==null||e.on(G.BotTranscript,L=>{A(L.text)});const D=J.useCallback(()=>{p?y(!b):(w(!0),y(!1))},[p,b]),F=async()=>{if(!(n||!e))try{await e.connect(),r(!0)}catch(L){console.error("Connection error:",L),alert("Failed to connect. Please try again.")}},z=async()=>{if(!(!n||!e)){if(!l){console.error("Cannot end session: Missing session ID");return}try{c(null),await be.post(`${kl.baseURL}/api/end_call_session/`,{call_session_id:l,schema_name:t.schemaName},{headers:{}}),c(null),await e.disconnect(),r(!1)}catch(L){console.error("Disconnection error:",L),alert("Failed to disconnect. Please try again.")}}};return X.jsx("div",{className:"voice-interface",children:X.jsxs("div",{className:"glass-sphere",children:[X.jsxs("div",{className:"absolute inset-0 rounded-full",children:[X.jsx("div",{className:"absolute inset-0 rounded-full glass-layer-primary"}),X.jsx("div",{className:"absolute inset-0 rounded-full glass-layer-secondary"}),X.jsx("div",{className:"absolute inset-0 rounded-full glass-layer-tertiary"}),X.jsx("div",{className:"absolute inset-0 rounded-full glass-layer-noise"})]}),X.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-full",children:k.map((L,j)=>X.jsx("div",{className:"absolute rounded-full enhanced-particle",style:{width:`${L.size}px`,height:`${L.size}px`,left:`${250+L.x}px`,top:`${250+L.y}px`,opacity:"isActive ? particle.opacity : 0",filter:`blur(0.3px) hue-rotate(${L.hue}deg)`,transform:`scale(${p?L.scale:0})`,transition:`all 0.6s cubic-bezier(0.4, 0, 0.2, 1) ${L.delay}s`,willChange:"transform, opacity"}},j))}),M.map((L,j)=>X.jsx("div",{className:"absolute left-1/2 top-1/2",style:{width:`${L.radius*2}px`,height:`${L.radius*2}px`,transform:"translate(-50%, -50%)"},children:L.particles.map((P,I)=>X.jsx("div",{className:"absolute enhanced-orbital-particle",style:{"--orbit-radius":`${L.radius}px`,width:`${P.size}px`,height:`${P.size}px`,opacity:"isActive ? particle.opacity : 0",animation:p?`orbit ${80/P.speed}s linear infinite`:"none",transform:`scale(${P.scale})`,willChange:"transform"},children:X.jsx("div",{className:`w-full h-full rounded-full particle-core ${p?b?"muted":"active":"inactive"}`,style:{filter:`blur(0.2px) hue-rotate(${P.hueRotate}deg)`}})},I))},j)),X.jsxs("button",{onClick:()=>{F(),D()},className:`mic-button-enhanced relative rounded-full flex items-center justify-center z-10
            ${p?b?"text-red-400 muted-state":"text-white active-state":"text-white/80 inactive-state"}`,children:[X.jsx("div",{className:"absolute inset-0 rounded-full glass-button-primary"}),X.jsx("div",{className:"absolute inset-0 rounded-full glass-button-secondary"}),X.jsx("div",{className:"absolute inset-0 rounded-full glass-button-border"}),Array.from({length:4}).map((L,j)=>X.jsx("div",{className:`absolute inset-0 rounded-full border enhanced-pulse-ring
                ${p?b?"muted":"active":"inactive"}`,style:{animation:p&&!b?`pulse-ring ${j*.7+1.4}s cubic-bezier(0.4, 0, 0.6, 1) infinite ${j*.2}s`:"none",willChange:"transform, opacity"}},j)),X.jsx("div",{className:"absolute inset-2 rounded-full enhanced-inner-glow"}),X.jsx("div",{className:"transform transition-all duration-500 hover:scale-110 relative z-10",children:b?X.jsx(um,{size:48}):X.jsx(dm,{size:48})})]}),X.jsxs("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-[280px]",children:[X.jsxs("div",{className:`status-panel py-3 px-6 transform transition-all duration-700
            ${u?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"}`,children:[X.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-lg enhanced-glass-text"}),X.jsxs("p",{className:"relative text-sm font-light text-center text-white/95 tracking-wider",children:[X.jsx("div",{className:"live-subtitles",children:X.jsx("p",{children:_})})," "]})]}),X.jsx("button",{onClick:z,className:"end-call-button ml-[40%] pt-8",children:X.jsx(fm,{size:48})})]})]})})}function pm(){const[t,e]=J.useState(null),[n,r]=J.useState(null),[i,s]=J.useState(!1),[a,c]=J.useState(),[l,u]=J.useState(""),[d,p]=J.useState(!1),[w,b]=J.useState(""),y=Rr(N=>N.setSessionId),_="https://app.snowie.ai",S="cd2a438f-7eeb-43ee-a49f-c848101798ce",O="6af30ad4-a50c-4acc-8996-d5f562b6987f";J.useEffect(()=>{(async()=>{try{const E=await be.get(`${_}/api/get-agent/${S}/?schema_name=${O}`,{headers:{}});s(E.data.type==="OpenAIVoice"),c(E.data.cal_event_id),u(E.data.agent_phone_number),b(E.data.cal_api_key),p(!0),console.log("voice agent",i),console.log("voice agent",E.data.type==="OpenAIVoice")}catch(E){console.error("Error checking agent type:",E),s(!1),p(!0)}})()},[]);async function A(N,E){try{const k=await be.patch(`${_}/api/callsession/${N}/`,E,{headers:{}});console.log("Updated Call Session:",k.data)}catch(k){console.error("Update Call Session Error:",k)}}return J.useEffect(()=>{(async()=>{try{const k=(await be.post(`${_}/api/callsession/create/${S}/`,{schema_name:O},{})).data.response;y(k);const M=new pt({params:{baseUrl:`${_}/api/daily-bots/voice-openai`,requestData:{agent_code:S,schema_name:O,call_session_id:k},vad_stop_secs:.5},transport:new _c,enableCam:!0,enableMic:!0}),D=M.registerHelper("llm",new Jr({callbacks:{}}));D.handleFunctionCall(async F=>{const z=F.arguments;if(console.log("FN args",z),console.log("FN",F),F.functionName==="collect_user_details"){const{name:L,email:j,phone:P}=z;if(console.log("Collected User Details:"),console.log(`Name: ${L}`),console.log(`Email: ${j}`),console.log(`Phone: ${P}`),r({name:L,email:j,phone:P}),!k)return console.error("Session ID not found."),{success:!1,message:"Session ID not found"};const I=L.trim().split(" "),U=I[0]||"",B=I.length>1?I.slice(1).join(" "):"N/A";try{return await A(k,{first_name:U,last_name:B,email:j,phone_number:P,agent:S,schema_name:O}),console.log("Call session updated successfully."),{success:!0}}catch($){return console.error("Error updating call session:",$),{success:!1,message:"Failed to update call session"}}}else if(F.functionName==="notify_agency"){const{name:L,email:j,phone:P}=z;if(!L)return console.log("USER DETAILS NOT FOUND"),{error:"User details not collected yet"};const I=`
              New Lead:
              Name: ${L}
              Email: ${j}
              Phone: ${P}
    
              You have a new lead
            `,B=await(await fetch(`${_}/api/daily-bots/send-sms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:l,from:"+17755879759",message:I})})).json();return console.log("SMS Response:",B),{success:!0,smsResponse:B}}else if(F.functionName==="get_first_available_slot"){const{appointment_date:L}=z;let j,P,I;if(I=L,I){const $=new Date(I);j=$.toISOString();const W=new Date($);W.setDate(W.getDate()+1),P=W.toISOString()}else{j=new Date().toISOString();const $=new Date;$.setDate($.getDate()+1),P=$.toISOString()}console.log("Fetching first available slot..."),await D.appendToMessages({role:"assistant",content:"Let me check that for you..."},!0);const B=await(await fetch(`https://api.cal.com/v2/slots/available?startTime=${encodeURIComponent(j)}&endTime=${encodeURIComponent(P)}&eventTypeId=${a}`,{method:"GET",headers:{Authorization:`Bearer ${w}`}})).json();if(console.log("Available Slot Response:",B),B.data){console.log("slot dataa",B.data),console.log("slot",B.data.slots);for(const $ in B.data.slots){console.log("date",$);const W=B.data.slots[$];if(W&&W.length>0){const ne=W[0];return console.log("SUCCESS",ne.time),{success:!0,slot:ne.time}}}}return{error:"No slots available"}}else if(F.functionName==="book_appointment"){const{user_name:L,user_email:j,user_phone:P,appointment_date:I}=z;console.log("name","email","phone","app",L,j,P,I),console.log("BOOK APPOINTMENT INITIATED");const U=L,B=j,$=P,W=I;if(!U||!B||!$||!W)return console.log("Incomplete appointment details"),{error:"Incomplete user details or appointment time"};const ne={start:new Date(W).toISOString(),eventTypeId:parseInt(a),attendee:{name:U,email:B,phoneNumber:$,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:"en"},metadata:{}},te=await(await fetch("https://api.cal.com/v2/bookings",{method:"POST",headers:{"Content-Type":"application/json","cal-api-version":"2024-08-13"},body:JSON.stringify(ne)})).json();if(console.log("Booking Response:",te),te.status==="success"){const _e=`
                New Appointment:
                Name: ${U}
                Email: ${B}
                Phone: ${$}
                Appointment Time: ${W}
                Meeting link: ${te.data.meetingUrl}
              `;console.log("Appointment Details:",_e);const ke=await(await fetch(`${_}/api/daily-bots/send-sms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:$,from:"+17755879759",message:_e})})).json();return console.log("Agency Notification Response:",ke),{success:!0,appointment:te,notifyAgencyResponse:ke}}else return console.log("Booking failed:",te),{error:"Failed to book the appointment"};return{success:!0}}else if(F.functionName==="insert_in_ghl"){const{user_name:L,user_email:j,user_phone:P,appointment_date:I}=z;if(console.log("GHL Integration - User Details:",{name:L,email:j,phone:P,appointment:I}),!L||!j||!P||!I)return console.log("Incomplete appointment details"),{error:"Incomplete user details or appointment time"};const U={schema_name:O,name:L,email:j,phone:P,agent_code:S};try{const B=await be.post(`${_}/api/create-ghl-contact/`,U,{headers:{"Content-Type":"application/json"}});if(B.status===201){const $=B.data.contactId;if((await be.post(`${_}/api/agent/leadconnect/appointment/`,{lead_name:L,contact_id:$,agent_id:S,appointment_book_ts:I,schema_name:O},{headers:{"Content-Type":"application/json"}})).data.success)return console.log("GHL Integration - Appointment Scheduled Successfully"),{success:!0,message:"Contact created and appointment scheduled in GHL",contactId:$}}return console.error("GHL Integration - Failed to create contact or appointment"),{success:!0,message:"Contact created and appointment scheduled in GHL"}}catch(B){return console.error("GHL Integration Error:",B),{error:"Failed to integrate with GHL"}}}else if(F.functionName==="end_function")console.log("Call Ended");else return console.log("Unhandled Function Call:",F.functionName),{error:"Function not supported"}}),e(M)}catch(E){console.error("Error initializing client:",E)}})()},[d]),X.jsxs(Rc,{client:t,children:[X.jsx(Ic,{}),X.jsx(hm,{})]})}const mm=J.createContext(void 0),gm=({children:t,agent_id:e,schema:n,access_token:r})=>X.jsx(mm.Provider,{value:{agent_id:e,schema:n,access_token:r},children:t});class ym extends HTMLElement{constructor(){super();Dl(this,"root",null);this.attachShadow({mode:"open"})}connectedCallback(){var c,l;const n=document.createElement("div"),r=document.createElement("link");r.rel="stylesheet",r.href="http://localhost:5173/dist/react-widget.css",(c=this.shadowRoot)==null||c.appendChild(r),(l=this.shadowRoot)==null||l.appendChild(n);const i=this.getAttribute("agent_id")||"",s=this.getAttribute("schema")||"",a=this.getAttribute("access_token")||"";this.root=$l.createRoot(n),this.root.render(X.jsx(J.StrictMode,{children:X.jsx(gm,{agent_id:i,schema:s,access_token:a,children:X.jsx(pm,{})})}))}disconnectedCallback(){this.root&&(this.root.unmount(),this.root=null)}}customElements.define("react-widget",ym)})(React,ReactDOM);
